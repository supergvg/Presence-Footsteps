<div class="guest-list-editor">
  <div ng-show="loading">
    <h4>Loading Guest List...</h4>
    <span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span>
  </div>
  <div ng-show="!initializing">
    <div>
      <form name="form.createGuestListForm">
        <div class="block-field">
          <div layout layout-sm="column">
            <md-input-container flex="75" md-no-float flex-sm="auto">
              <h4>Guest List Title</h4>
              <input type="text" ng-model="gli.title" name="title" required placeholder="Enter Guest List Title"
                     ng-disabled="isPromoter()"
                     ng-change="onDataChange()">
            </md-input-container>
            <md-input-container flex="25" md-no-float flex-sm="auto">
              <h4>Guest Type</h4>
              <ui-select required name="listType" ng-model="gli.listType"
                         ng-disabled="guestTypeDisabled"
                         ng-change="onDataChange()"
                         search-enabled="false" flex>
                <ui-select-match placeholder="Select Type">
                  {{$select.selected}}
                </ui-select-match>
                <ui-select-choices repeat="t in guestListTypes">
                  {{t}}
                </ui-select-choices>
              </ui-select>
            </md-input-container>
          </div>
        </div>
        <div class="block-field" ng-if="!isPublicRSVP() && !isFacebookList()">
          <h4>Promoter</h4>
          <md-input-container flex md-no-float>
            <ui-select name="promoter" ng-model="gli.promoter_Id" search-enabled="false" ng-disabled="disablePromoterList()" ng-change="onDataChange()" ng-click="onPromoterClick()">
              <ui-select-match placeholder="Select Promoter to Manage List">
                {{$select.selected.firstName}} {{$select.selected.lastName}}
              </ui-select-match>
              <ui-select-choices repeat="promoter.Id as promoter in promoters">
                {{promoter.firstName}} {{promoter.lastName}}
              </ui-select-choices>
            </ui-select>
          </md-input-container>
        </div>
      </form>
    </div>
    <div class="block-field" ng-if="!isPublicRSVP() && !isSpotType() && !isFacebookList()">
      <h4>{{isRSVP() || isPublicRSVP() ? 'Import Emails' : 'Import Guests'}}</h4>
      <md-list>
        <md-list-item layout="row" layout-align="space-between center" layout-sm="column" layout-align-sm="center stretch">
          <p flex>Link previous {{isRSVP() || isPublicRSVP() ? 'mailing list' : 'guest list'}}</p>
          <div>
            <md-button class="raised-btn" ng-click="onLinkClicked($event)">
              Link
            </md-button>
          </div>
        </md-list-item>
        <md-list-item layout="row" layout-align="space-between center" layout-sm="column" layout-align-sm="center stretch">
          <p flex ng-show="isRSVP() || isPublicRSVP()">
            Upload new mailing list (csv, xlsx)
            Upload:
            <a href="assets/docs/Mailing List Upload format 1.xlsx">format 1</a>,
            <a href="assets/docs/Mailing List Upload format 2.xlsx">format 2</a>
          </p>
          <p flex ng-hide="isRSVP()">
            Upload new guest list (csv, xlsx)
            Upload:
            <a href="assets/docs/Guest List Upload format 1.xlsx">format 1</a>,
            <a href="assets/docs/Guest List Upload format 2.xlsx}}">format 2</a>,
            <a href="assets/docs/Mailing List Upload format 1.xlsx">RSVP format</a>
          </p>
          <div>
            <md-button class="raised-btn" ng-file-select="onFileSelect($files)" accept=".csv,.xlsx,.xls">
              Upload
            </md-button>
          </div>
        </md-list-item>
        <md-list-item layout="column" layout-align="space-between stretch" layout-sm="column" layout-align-sm="space-between stretch">
          <div layout-fill>
            <p>Add Multiple {{isRSVP() || isPublicRSVP() ? 'Emails' : 'Guests'}} by Copying and Pasting</p>
            <p><i>
              Paste your guest list here in these formats: <b>{{isRSVP() || isPublicRSVP() ? 'Email' : 'Name'}}</b>
              OR <b>{{isRSVP() || isPublicRSVP() ? 'Name, Email' : 'Name +1'}}</b><span ng-hide="isRSVP() || isPublicRSVP()"> OR <b>Name, Note, Pluses</b></span>.<br/>
              Use line break for each guest.
            </i></p>
          </div>
          <div layout="row" layout-align="start end" layout-fill md-no-float>
            <textarea class="guest-list-import-box" flex="75" ng-model="data.textGuestList"
                      placeholder="{{isRSVP() || isPublicRSVP() ? 'Example: Amy White, Amy@mail.com' : 'Example: Amy White +1'}}"
                      rows="10" md-no-autogrow></textarea>
            <div flex layout="row" layout-align="end end">
              <md-button class="raised-btn" ng-click="onAddGuestsClicked()">Add</md-button>
            </div>
          </div>
          <div class="save-button" layout="row" layout-align="end center" layout-fill>
            <div layout="row" layout-align="center center">
              <md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular>
              <md-button class="raised-btn" ng-click="save()" ng-disabled="fetchingData">
                Save
              </md-button>
            </div>
          </div>
        </md-list-item>
      </md-list>
    </div>
    <div class="block-field">
      <h4>Guests</h4>
      <div flex class="actions">
        <md-button class="raised-btn" ng-disabled="!rowSelected || fetchingData" ng-click="deleteSelectedRows()">
          Delete
        </md-button>
      </div>
      <ui-grid-responsive options="options"></ui-grid-responsive>
      <div flex layout="row" layout-align="end center" hide-gt-sm>
        <md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular>
        <md-button class="raised-btn" ng-click="save()" ng-disabled="fetchingData">
          Save
        </md-button>
      </div>
    </div>
  </div>
</div>
