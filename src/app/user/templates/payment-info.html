<md-dialog flex="50" flex-sm="90" class="payment-info">
    <div layout="row" layout-wrap layout-align="space-between center" class="section-title">
        <h3>Edit Payment Information</h3>
    </div>
    <md-content>
        <div class="block-field" ng-repeat="card in cards">
            <h4>{{card.cardDataSaved.isDefault ? 'Primary Payment' : (card.cardData.cardId ? 'Different Card' : 'Add a Different Card')}}</h4>        
            <form name="cardForm[{{$index}}]">
                <div layout="row" layout-align="space-between stretch" layout-sm="column">
                    <md-input-container flex="60" md-no-float flex-sm="100">
                        <h4>Credit Card Number</h4>
                        <input type="text" ng-model="card.cardData.number" name="number" pattern="\d{14,16}" placeholder="{{cardsDataLoaded ? 'XXXX XXXX XXXX '+card.cardDataSaved.number : 'Enter Credit Card Number'}}" required ng-disabled="card.cardData.cardId">
                    </md-input-container>
                    <md-input-container flex="40" md-no-float flex-sm="100">
                        <h4>Security Code</h4>
                        <input type="text" ng-model="card.cardData.cvc" name="cvc" pattern="\d{2,4}" placeholder="{{cardsDataLoaded ? 'XXX' : 'Enter Security Code'}}" required ng-disabled="card.cardData.cardId">
                    </md-input-container>
                </div>
                <div layout="row" layout-align="space-between stretch" layout-sm="column">
                    <div flex="60" flex-sm="100">
                        <h4>Expire Date</h4>
                        <div layout="row" layout-align="start center" class="expire-date">
                            <md-input-container md-no-float flex="30">
                                <input type="number" ng-model="card.cardData.expiryMonth" name="exp_month" pattern="\d{1,2}" min="1" max="12" placeholder="Month" required>
                            </md-input-container>
                            <md-input-container md-no-float flex="30">
                                <input type="number" ng-model="card.cardData.expiryYear" name="exp_year" pattern="\d{4}" min="1970" placeholder="Year" required>
                            </md-input-container>
                        </div>
                    </div>
                    <div flex="40" flex-sm="100">
                        <md-input-container md-no-float>
                            <h4>Billing Zip Code</h4>
                            <input type="text" ng-model="card.cardData.zipCode" name="address_zip" placeholder="Enter Zip Code" ng-disabled="card.cardData.cardId">
                        </md-input-container>
                    </div>
                </div>
            </form>                
            <div layout="row" layout-align="{{!card.cardDataSaved.isDefault ? 'space-between' : 'end'}} center">
                <md-radio-group ng-model="card.cardData.isDefault" ng-if="!card.cardDataSaved.isDefault">
                    <md-radio-button ng-value="true" aria-label="Default card" ng-click="">Set this card as primary payment</md-radio-button>
                </md-radio-group>
                <md-button ng-click="close()" ng-if="$last">
                    Cancel
                </md-button>
                <md-button class="raised-btn" ng-click="card.cardData.cardId ? delete($index) : update(cardForm[$index], $index)" ng-disabled="savingCard">
                    {{card.cardData.cardId ? 'Delete' : 'Add'}}
                </md-button>
                <div ng-if="savingCard">
                    <md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular>
                </div>
            </div>
        </div>
    </md-content>
</md-dialog>