<div ng-init="init()" class="account-details">
    <div ng-show="initializing">
        <h4>Loading...</h4>
        <span>
            <md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular>
        </span>
    </div>
    <div ng-hide="initializing" ng-cloak>
        <div class="block-field">
            <h4>Manage Accounts</h4>
            <md-list>
                <md-list-item layout="row" layout-sm="column" layout-align="space-between center">
                    <div flex="75" flex-sm="auto">
                        <p>Create new Account (Enter details for the users you would like to invite)</p>
                    </div>
                    <div flex="25" flex-sm="auto" layout="row" layout-align="end center" layout-align-sm="center center">
                        <md-button class="raised-btn" ng-click="linkNewAccount($event)">
                            Invite
                        </md-button>
                    </div>
                </md-list-item>
                <md-list-item layout="row" layout-sm="column" layout-align="space-between center">
                    <div flex="75" flex-sm="auto">
                        <p>Delete Account</p>
                    </div>
                    <div flex="25" flex-sm="auto" layout="row" layout-align="end center" layout-align-sm="center center">
                        <md-button class="raised-btn" ng-click="deleteAccount($event)">
                            Delete
                        </md-button>
                    </div>
                </md-list-item>
            </md-list>
        </div>
        <div class="block-field">
            <h4>Edit previously added Accounts</h4>
            <md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-if="refreshing"></md-progress-circular>
            <md-list ng-if="!refreshing">
                <md-list-item ng-repeat="user in getLinkedUsers()" layout="row" layout-sm="column" layout-align="space-between center">
                    <div flex layout="row" layout-align="space-between center" layout-sm="column" layout-align-sm="center start">
                        <div flex="30" flex-sm="auto">
                            <p>{{user.firstName}} {{user.lastName}}</p>
                        </div>
                        <div flex="15" flex-sm="auto">
                            <p>{{user.permissions | replaceUnderscores}}</p>
                        </div>
                        <div flex="40" flex-sm="auto">
                            <p>{{user.UserName}}</p>
                        </div>
                        <div flex="15" flex-sm="auto">
                            <p>{{user.phoneNumber}}</p>
                        </div>
                    </div>
                    <div class="actions">
                        <md-button class="icon-btn" ng-click="deleteUser($event, user)" ng-hide="options.readOnly" ng-cloak aria-label="Delete">
                            <ng-md-icon icon="delete" size="24"></ng-md-icon>
                        </md-button>
                        <md-button class="icon-btn" ng-click="editUser($event, user)" ng-hide="options.readOnly" ng-cloak aria-label="Edit">
                            <ng-md-icon icon="mode_edit" size="24"></ng-md-icon>
                        </md-button>
                    </div>
                </md-list-item>
            </md-list>
        </div>
    </div>
</div>