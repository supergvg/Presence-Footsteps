<md-dialog class="payment-popup">
    <div class="header" layout="row" layout-align="center center">
        <img src="assets/images/gliist_logo_blue.png" style="height:90px"/>
    </div>
    <div class="content">
        <div layout="row" layout-align="space-between stretch" layout-sm="column">
            <div flex="50" flex-sm="100" class="order">
                <h3>YOUR ORDER SUMMARY</h3>
                <div class="summary">
                    <md-list>
                        <md-list-item>
                            <div flex="80">
                                Plan
                            </div>
                            <div flex="20" layout="row" layout-align="end center">
                                Total
                            </div>
                        </md-list-item>
                        <md-list-item>
                            <div flex="80">
                                {{selectedPlan.name}}
                            </div>
                            <div flex="20" layout="row" layout-align="end center">
                                <div ng-if="pricePolicyBeforePromo"><i><s>{{pricePolicyBeforePromo.prices[0].amount | money : pricePolicyBeforePromo.prices[0].currency}}</s></i>&nbsp;&nbsp;</div>
                                {{pricePolicy.prices[0].amount | money : pricePolicy.prices[0].currency}}
                            </div>
                        </md-list-item>
                    </md-list>
                    <!--<p>*monthly payment will be proceed on __th of each month</p>-->
                </div>
                <div class="promo" ng-if="selectedPlan.hasPromo">
                    <h4>Promo Code</h4>
                    <div layout="row" layout-align="space-between start">
                        <md-input-container md-no-float flex="50">
                            <input type="text" ng-disabled="waiting" ng-model="promo.code" aria-label="Promo Code" placeholder="Enter your promo code">
                            <div class="promo-apply" ng-if="promo.applied" ng-click="undoPromo()">Applied X</div>
                        </md-input-container>
                        <md-button class="raised-btn" ng-click="applyPromo()" ng-disabled="waiting">Enter</md-button>
                    </div>
                    <div class="promo-status" ng-if="promo.invalid">This promo code is invalid. Please use a different promo code, thank you.</div>
                </div>
            </div>
            <div flex="50" flex-sm="100" class="payment">
                <h3>ENTER PAYMENT DETAIL</h3>
                <form name="card">
                    <div class="block-field">
                        <div layout="row" layout-align="space-between stretch" layout-sm="column">
                            <md-input-container flex="60" md-no-float flex-sm="100">
                                <h4>Card Number Number</h4>
                                <input type="text" ng-disabled="waiting" ng-model="cardData.number" name="number" pattern="\d{14,16}" placeholder="{{cardDataLoaded ? 'XXXX XXXX XXXX '+cardDataSaved.number : 'Enter Credit Card Number'}}" required>
                            </md-input-container>
                            <md-input-container flex="40" md-no-float flex-sm="100">
                                <h4>Security Code</h4>
                                <input type="text" ng-disabled="waiting" ng-model="cardData.cvc" name="cvc" pattern="\d{2,4}" placeholder="{{cardDataLoaded ? 'XXX' : 'Enter Security Code'}}" required>
                            </md-input-container>
                        </div>
                        <div layout="row" layout-align="space-between stretch" layout-sm="column">
                            <div flex="60" flex-sm="100">
                                <h4>Expire Date</h4>
                                <div layout="row" layout-align="start center">
                                    <md-input-container md-no-float flex="30">
                                        <input type="number" ng-disabled="waiting" ng-model="cardData.expiryMonth" name="exp_month" pattern="\d{1,2}" min="1" max="12" placeholder="Month" required>
                                    </md-input-container>
                                    <md-input-container md-no-float flex="30">
                                        <input type="number" ng-disabled="waiting" ng-model="cardData.expiryYear" name="exp_year" pattern="\d{4}" min="1970" placeholder="Year" required>
                                    </md-input-container>
                                </div>
                            </div>
                            <div flex="40" flex-sm="100">
                                <md-input-container md-no-float>
                                    <h4>Billing Zip Code</h4>
                                    <input type="text" ng-disabled="waiting" ng-model="addressData.address_zip" name="address_zip" placeholder="Enter Zip Code">
                                </md-input-container>
                            </div>
                        </div>
                    </div>
                    <div layout="row" layout-align="start center">
                        <md-checkbox aria-label="Terms" ng-disabled="waiting" ng-model="terms">I agree to the </md-checkbox>
                        <a href="http://www.gjests.com/terms-conditions/" target="_blank">Terms and Conditions</a>
                    </div>
                </form>        
            </div>
        </div>
        <div class="payment-actions margin-top" layout="row" layout-align="space-between start">
            <md-button class="raised-btn" ng-click="close()">BACK</md-button>
            <md-progress-circular class="md-hue-2 near" md-mode="indeterminate" ng-show="waiting"></md-progress-circular>
            <md-button class="raised-btn" ng-click="process(card)" ng-disabled="waiting || loadingCard">PROCESS PAYMENT</md-button>
        </div>
    </div>
</md-dialog>