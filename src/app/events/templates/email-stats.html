<div ng-init="init()">
    <div ng-show="initializing">
        <h4>Loading Event...</h4>
        <span>
            <md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular>
        </span>
    </div>
    <div ng-show="!initializing" class="email-stats">
        <div layout="row" layout-wrap class="header">
            <div flex>
                <h3>Email Status</h3>
            </div>
        </div>
        <!--<h4>Thank you! Your Event has been Published + Email Delivery Status</h4>-->

        <event-preview event="event"></event-preview>

        <div layout="row" layout-align="space-between center">
            <h5>Email Status</h5>
            <md-input-container class="search">
                <label>Search Guest</label>
                <input type="text" ng-model="searchText">
                <button><img src="assets/images/icons/search.png" /></button>
            </md-input-container>
        </div>
        
        <md-list ng-show="guests.length > 0">
            <md-list-item>
                <div class="md-list-item-inner" layout="row" flex>
                    <div flex="15" ng-class="sort.field === 'status' ? sort.dir : ''" ng-click="changeSort('status')">
                        Status
                    </div>
                    <div flex="35" ng-class="sort.field === 'firstName' ? sort.dir : ''" ng-click="changeSort('firstName')">
                        Name
                    </div>
                    <div flex="35" ng-class="sort.field === 'email' ? sort.dir : ''" ng-click="changeSort('email')">
                        Email
                    </div>
                    <div flex class="last">
                        Select
                    </div>
                </div>
            </md-list-item>
            <md-list-item ng-repeat="guest in guests | orderBy : sort.field : sort.dir === 'desc' | filter : searchText">
                <div layout="row" flex>
                    <div flex="15">
                    </div>
                    <div flex="35">
                        <p>{{guest.firstName}} {{guest.lastName}}</p>
                    </div>
                    <div flex="35">
                        <p ng-if="!isChecked(guest)">{{guest.email}}</p>
                        <p ng-if="isChecked(guest)" class="checked" contenteditable="true" ng-model="guest.email"></p>
                    </div>
                    <div flex>
                        <md-checkbox ng-model="selectedForInvite[guest.id]" aria-label="re-invite" ng-if="true"></md-checkbox>
                    </div>
                </div>
            </md-list-item>
        </md-list>        
        
        <div layout="row" layout-align="end center" class="actions">
            <md-button class="md-primary md-raised" ng-hide="" ng-click="">RE-INVITE</md-button>
            <md-button class="md-primary md-raised" ng-click="done()">DONE</md-button>
        </div>        
    </div>
</div>