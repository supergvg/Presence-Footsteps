<ion-view class="light-bg" ng-init="initGuestListView()"
          style="background-color: #EEEEEE"
          view-title="Guest Lists"
          cache-view="false">
    <ion-content class="content-body">
        <ion-spinner ng-show="fecthingData"></ion-spinner>

        <div class="list list-inset" ng-show="!fecthingData" ng-cloak>
            <label class="item item-input">
                <i class="icon ion-search placeholder-icon"></i>
                <input type="text" placeholder="Search Guests" ng-model="filter">
            </label>
        </div>

        <grey>
            <ion-list can-swipe="'true'">
                <ion-item collection-repeat="guestEntry in guestEntries | filter:filter"
                          class="item-thumbnail-left"
                          ui-sref="app.check_guest({guestId:guestEntry.guest.id, gliId:guestEntry.glist.id})">

                    <img ng-src="img/icons/user_01.png">

                    <h2>{{guestEntry.guest.firstName}} {{guestEntry.guest.lastName}}</h2>

                    <p>{{guestEntry.guest.plus + guestEntry.guestChecked - guestEntry.plusBalance}} /
                        {{guestEntry.guest.plus + 1}}
                        Checked-in</p>
                    <ion-option-button ng-show="!isCheckinDisabled(guestEntry)"
                                       class="button-positive"
                                       ng-click="subtractGuestCount(guestEntry)"
                                       style="color:white;background-color: #2CD6D6">
                        -GUEST
                    </ion-option-button>
                    <ion-option-button ng-show="!isCheckinDisabled(guestEntry)"
                                       class="button-info"
                                       ng-click="addGuestCount(guestEntry)"
                                       style="color:white;background-color: #2CD6D6">
                        +GUEST
                    </ion-option-button>
                    <ion-option-button ng-show="!isCheckinDisabled(guestEntry)"
                                       class="button-info"
                                       ng-click="checkIn(guestEntry)" style="color:white;background-color: #2CD6D6">
                        <span ng-show="!checkinSpinnerOn">CHECK IN PLUS {{guestEntry.plusBalance}}</span>
                        <ion-spinner ng-show="checkinSpinnerOn"></ion-spinner>
                    </ion-option-button>

                </ion-item>
            </ion-list>
        </grey>
    </ion-content>

    <div class="bar bar-footer logo-bg">
    </div>


</ion-view>