"use strict";angular.module("gliist",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","ngMaterial","ngMdIcons","angularFileUpload","googlechart","ngAutocomplete","ui.bootstrap","ui.bootstrap.datetimepicker","ui.grid","ui.grid.edit","ui.grid.cellNav","ui.grid.selection","ui.grid.autoResize"]).config(["$stateProvider","$urlRouterProvider","$provide","$httpProvider","$mdThemingProvider","$mdIconProvider",function(e,t,i,n,s,o){s.theme("default").primaryPalette("cyan").warnPalette("red").backgroundPalette("grey"),window.redirectUrl="http://gjests.azurewebsites.net/",i.factory("myHttpInterceptor",function(){return{request:function(e){var t=window.redirectUrl;return e.url.indexOf("api")>-1?e.url=t+e.url:e.url.indexOf("Token")>-1&&(e.url=t+e.url),e}}}),o.iconSet("social","img/icons/sets/social-icons.svg",24).defaultIconSet("img/icons/sets/core-icons.svg",24),n.interceptors.push("myHttpInterceptor"),e.state("home",{url:"/",templateUrl:"app/templates/home.html",access:{allowAnonymous:!0}}).state("signup",{url:"/signup",templateUrl:"app/user/templates/signup.html",controller:"SignupCtrl",access:{allowAnonymous:!0}}).state("recover_password",{url:"/recover_password",templateUrl:"app/user/templates/recover-password.html",controller:"RecoverPasswordCtrl",access:{allowAnonymous:!0}}).state("reset_password",{url:"/reset_password/:token",templateUrl:"app/user/templates/reset-password.html",controller:"ResetPasswordCtrl",access:{allowAnonymous:!0}}).state("signup_invite",{url:"/signup/invite/:company/:token",templateUrl:"app/user/templates/signup-invite.html",controller:"SignupInviteCtrl",access:{allowAnonymous:!0}}).state("main",{url:"/main",templateUrl:"app/templates/main.html",controller:"MainCtrl"}).state("main.user",{url:"/user",templateUrl:"app/user/templates/profile.html",controller:"ProfileCtrl"}).state("main.create_event",{url:"/create?view",templateUrl:"app/templates/create-event.html",reloadOnSearch:!1,controller:"EventsCtrl"}).state("main.create_gl_event",{url:"/event/edit/guestlist/:eventId",templateUrl:"app/events/templates/event-add-guestlist.html",controller:"AddGLEventCtrl"}).state("main.edit_gl_event",{url:"/event/edit/guestlistinstance/:gli",templateUrl:"app/events/templates/event-edit-guestlist.html",controller:"EditGLEventCtrl"}).state("main.edit_event",{url:"/event/edit/:eventId?view",templateUrl:"app/events/templates/edit-event.html",controller:"EditEventCtrl"}).state("main.event_summary",{url:"/event/summary/:eventId",templateUrl:"app/events/templates/event-summary.html",controller:"EventSummaryCtrl"}).state("main.event_checkin",{url:"/event/checkin/:eventId",templateUrl:"app/events/templates/event-checkin.html",controller:"EventCheckinCtrl"}).state("main.check_guest",{url:"/event/guest/checkin/:gliId/:guestId",templateUrl:"app/guest-lists/templates/guest-checkin.html",controller:"CheckGuestCtrl"}).state("main.event_stats",{url:"/event/stats/:eventId",templateUrl:"app/events/templates/event-stats.html",controller:"EventsStatsCtrl"}).state("main.current_events",{url:"/current_events",templateUrl:"app/templates/current-events.html",controller:"EventsCtrl"}).state("main.past_events",{url:"/past_events",templateUrl:"app/templates/past-events.html",controller:"EventsCtrl"}).state("main.list_management",{url:"/list_management",templateUrl:"app/guest-lists/templates/list-management.html",controller:"GuestListCtrl"}).state("main.edit_glist",{url:"/edit_list_management/:listId",templateUrl:"app/guest-lists/templates/edit-list-management.html",controller:"EditGuestListCtrl"}).state("main.create_list_management",{url:"/create_list_management",templateUrl:"app/guest-lists/templates/create-list-management.html",controller:"GuestListCtrl"}).state("main.stats",{url:"/stats",templateUrl:"app/templates/stats/stats.html",controller:"StatsCtrl"}).state("main.email_stats",{url:"/email_stats/:eventId",templateUrl:"app/events/templates/email-stats.html",controller:"EmailStatsController"}).state("main.welcome",{url:"/welcome",templateUrl:"app/templates/welcome.html",controller:"WelcomeController"}),t.otherwise("/main/welcome")}]).run(["$rootScope","$state","userService","$timeout","$document",function(e,t,i,n,s){s.on("keydown",function(e){var t=!1;if(8===e.keyCode){var i=e.srcElement||e.target;t="INPUT"===i.tagName.toUpperCase()&&("TEXT"===i.type.toUpperCase()||"PASSWORD"===i.type.toUpperCase()||"FILE"===i.type.toUpperCase()||"EMAIL"===i.type.toUpperCase()||"SEARCH"===i.type.toUpperCase()||"NUMBER"===i.type.toUpperCase()||"DATE"===i.type.toUpperCase())||"TEXTAREA"===i.tagName.toUpperCase()?i.readOnly||i.disabled:!0}t&&e.preventDefault()}),e.$on("$stateChangeStart",function(s,o,r,l,a){if(t.previous=l,t.previousParams=a,i.getLogged()&&!e.currentUser)return void i.getCurrentUser().then(function(i){e.currentUser=i,"home"===o.name&&(t.go("main.welcome",{},{notify:!0}),s.preventDefault())},function(){return o.access&&o.access.allowAnonymous?void 0:t.go("home",{},{notify:!0})})["finally"](function(){angular.element("#loading").remove(),n(function(){e.appReady=!0})});if(e.appReady||(angular.element("#loading").remove(),n(function(){e.appReady=!0})),!o.access||!o.access.allowAnonymous){if(!e.currentUser)return i.getCurrentUser().then(function(i){return e.currentUser=i,o.access&&o.access.isAdmin&&!e.currentUser.is_admin?void t.go("home",{},{notify:!0}):void t.go(o,r,{notify:!0})},function(){return e.currentUser=null,t.go("home",{},{notify:!0})}),s.preventDefault();if(o.access&&o.access.isAdmin)return e.currentUser.is_admin?void 0:t.go("home",{},{notify:!0})}})}]),angular.module("gliist").directive("userSignup",[function(){return{restrict:"EA",scope:{user:"=",options:"=?"},controller:"SignupCtrl",replace:!0,templateUrl:"app/user/templates/user-signup-form.html"}}]),angular.module("gliist").directive("accountDetails",[function(){return{restrict:"EA",scope:{user:"="},controller:"AccountDetailsCtrl",replace:!0,templateUrl:"app/user/templates/account-details.html"}}]),angular.module("gliist").controller("SignupInviteCtrl",["$scope","userService","dialogService","$state","$stateParams",function(e,t,i,n,s){e.user={},e.cancel=function(){$mdDialog.cancel()},e.register=function(){e.fetchingData=!0,t.registerEmail(e.user).then(function(){e.hide(),n.go("main.welcome")},function(){i.error("There was a problem signing up, please try again")})["finally"](function(){e.fetchingData=!1})},e.init=function(){if(t.getLogged())return void n.go("main.welcome");e.options={inviteMode:!0},e.loading=!0;var o=s.company,r=s.token;t.getInviteInfo(o,r).then(function(t){return t?(e.user=t,e.user.username=t.email,e.user.company=o,void(e.user.token=r)):void n.go("main.welcome")},function(){i.error("There was a problem signing up, please try again")})["finally"](function(){e.loading=!1})}}]),angular.module("gliist").controller("SignupCtrl",["$scope","$mdDialog","userService","dialogService","$state",function(e,t,i,n,s){e.displayErrorMessage=function(t){return e.showValidation||t.$touched&&t.$error.required},e.hide=function(){e.user.username=null,e.user.password=null,e.user.confirmPassword=null,t.hide()},e.cancel=function(){t.cancel()},e.register=function(t){if(t&&t.$invalid)return void(e.showValidation=!0);if(e.user.password===e.user.confirmPassword){var o=e.options?e.options.inviteMode:null;e.fetchingData=!0,i.registerEmail(e.user,o).then(function(){e.hide(),s.go("main.welcome")},function(e){n.error(JSON.stringify(e)),n.error("There was a problem signing up, please try again")})["finally"](function(){e.fetchingData=!1})}}}]),angular.module("gliist").controller("ResetPasswordCtrl",["$scope","$mdDialog","userService","dialogService","$state","$stateParams",function(e,t,i,n,s,o){e.recoverSent=!1,e.user={},e.onResetClicked=function(t){return e.user.password!==e.user.confirmPassword?void(e.message="Password don't match "):(e.message="",t&&t.$invalid?void(e.showValidation=!0):(e.fetchingData=!0,void i.resetPassword({token:e.token,NewPassword:e.user.password,ConfirmPassword:e.user.confirmPassword}).then(function(){s.go("home"),n.success("Password Changed")},function(e){n.error(e?e.exceptionMessage:"Oops there was a problem please try again")})["finally"](function(){e.fetchingData=!1})))},e.init=function(){e.token=o.token,e.token||s.go("home")}}]),angular.module("gliist").controller("RecoverPasswordCtrl",["$scope","$mdDialog","userService","dialogService","$state",function(e,t,i,n){e.recoverSent=!1,e.user={},e.onRecoverClicked=function(t){return t&&t.$invalid?void(e.showValidation=!0):(e.fetchingData=!0,void i.sendPasswordRecover(e.user.email).then(function(){e.recoverSent=!0,e.message="An email has been sent to your inbox, please check it for further instructions"},function(){n.error("Oops there was a problem please try again")})["finally"](function(){e.fetchingData=!1}))}}]),angular.module("gliist").controller("ProfileCtrl",["$scope","$rootScope","userService","dialogService","uploaderService","$mdDialog",function(e,t,i,n){t.$watch("currentUser",function(t){e.currentUser=angular.copy(t)}),e.data={selectedIndex:0},e.displayErrorMessage=function(t){return e.showValidation||t.$touched&&t.$error.required},e.getSelected=function(t){return e.data.selectedIndex===t?"logo-bg":void 0},e.saveChanges=function(t){return t&&t.$invalid?void(e.showValidation=!0):void i.updateUserProfile(e.currentUser).then(function(){n.success("Changes Saved")},function(e){n.error(e)})},e.next=function(){e.data.selectedIndex=Math.min(e.data.selectedIndex+1,1)},e.previous=function(){e.data.selectedIndex=Math.max(e.data.selectedIndex-1,0)}}]),angular.module("gliist").controller("AccountDetailsCtrl",["$scope","$mdDialog","userService","dialogService","$state","$rootScope",function(e,t,i,n,s,o){e.isStaff=function(){return o.isStaff()},e.isPromoter=function(){return o.isPromoter()},e.linkNewAccount=function(i){var n=e.$new();t.show({controller:"InviteUserCtrl",scope:n,templateUrl:"app/user/templates/link-account-dialog.html",targetEvent:i})},e.editUser=function(i,n){var s=e.$new();s.linked_account=n,t.show({controller:"InviteUserCtrl",scope:s,templateUrl:"app/user/templates/link-account-dialog.html",targetEvent:i})},e.deleteAccount=function(s){var r=t.confirm().title("Are you sure you want to delete your account?").content("All data will be lost").ariaLabel("Lucky day").ok("Yes").cancel("No").targetEvent(s);t.show(r).then(function(){i.deleteUser({userName:e.user.UserName}).then(function(){},function(e){n.error(e)}),o.logout()},function(){})},e.deleteUser=function(s,o){var r=t.confirm().title("Are you sure you want to delete the user?").content("User data will be lost").ariaLabel("Lucky day").ok("Yes").cancel("No").targetEvent(s);t.show(r).then(function(){i.deleteUser({userName:o.UserName}).then(function(){e.refresh()},function(t){e.refresh(),n.error(t)})},function(){})},e.getLinkedUsers=function(){return e.company?_.reject(e.company.users,function(e){return e.permissions&&e.permissions.indexOf("admin")>-1}):[]},e.refresh=function(){e.refreshing=!0,i.getCompanyInfo().then(function(t){e.company=t},function(){n.error("Oops there was a problem loading account info, please try again")})["finally"](function(){e.refreshing=!1})},e.init=function(){e.initializing=!0,i.getCompanyInfo().then(function(t){e.company=t},function(){n.error("Oops there was a problem loading account info, please try again")})["finally"](function(){e.initializing=!1})}}]),angular.module("gliist").directive("guestListView",[function(){return{restrict:"EA",controller:"GuestListViewerCtrl",scope:{lists:"=?",options:"=?",selected:"=?"},replace:!0,templateUrl:"app/templates/list/guest-list-viewer.html"}}]),angular.module("gliist").directive("guestListMange",[function(){return{restrict:"EA",controller:"GuestListCtrl",scope:{list:"=?",options:"=?"},replace:!0,templateUrl:"app/templates/list/guest-list-management.html"}}]),angular.module("gliist").directive("guestListInstanceView",[function(){return{restrict:"EA",controller:"GuestListInstanceViewerCtrl",scope:{event:"=?",lists:"=?",options:"=?",selected:"=?",published:"=?"},replace:!0,templateUrl:"app/guest-lists/templates/guest-list-instance-viewer.html"}}]),angular.module("gliist").directive("guestListInstanceEditor",[function(){return{restrict:"EA",controller:"GuestListInstanceEditorCtrl",scope:{id:"="},replace:!0,templateUrl:"app/guest-lists/templates/guest-list-instance-editor.html"}}]),angular.module("gliist").directive("guestListEditor",[function(){return{restrict:"EA",scope:{list:"=",onSave:"=?"},controller:"GuestListEditorCtrl",replace:!0,templateUrl:"app/guest-lists/templates/guest-list-editor.tmpl.html"}}]),angular.module("gliist").controller("GuestListCtrl",["$scope","guestFactory","dialogService","$mdDialog","$http","uploaderService",function(){}]),angular.module("gliist").controller("GuestListViewerCtrl",["$scope","guestFactory","dialogService","$mdDialog","$http","uploaderService","$rootScope",function(e,t,i,n,s,o,r){e.selected=e.selected||[],e.blockEdit=function(e){return r.isPromoter()&&e.created_by?e.created_by.UserName!=r.currentUser.UserName:!1},e.isStaff=function(){return r.isStaff()},e.getTotalGuests=function(e){var t=0;return angular.forEach(e.guests,function(e){t+=e.plus+1}),t},e.glistSelected=function(t){var i=_.find(e.selected,function(e){return t.id===e.id});return i?!0:!1},e.toggleSelected=function(t){var i=e.selected.indexOf(t);i>-1?e.selected.splice(i,1):e.selected.push(t)},e.addMore=function(){e.list.guests.push({})},e.deleteGlist=function(s,o){var r=n.confirm().title("Are you sure you want to delete guest list?").ariaLabel("Lucky day").ok("Yes").cancel("No").targetEvent(s);n.show(r).then(function(){return e.local?void(e.guestLists=_.reject(e.guestLists,function(e){return angular.equals(o,e)})):void t.GuestList["delete"]({id:o.id}).$promise.then(function(){e.getGuestLists()},function(){i.error("There was a problem please try again")})},function(){e.alert="You decided to keep your debt."})},e.showGlistDialog=function(t,i){var s=e.$new();s.currentGlist=i,s.cancel=function(){n.cancel()},s.save=function(){n.toggle()},n.show({scope:s,templateUrl:"app/guest-lists/templates/glist-edit-dialog.tmpl.html",targetEvent:t})},e.getGuestLists=function(){return e.lists?(e.guestLists=e.lists,void(e.local=!0)):(e.fetchingData=!0,void t.GuestLists.get().$promise.then(function(t){e.guestLists=t},function(){i.error("There was a problem getting lists, please try again")})["finally"](function(){e.fetchingData=!1}))},e.init=function(){e.options||(e.options={})},e.init()}]),angular.module("gliist").controller("GuestListInstanceViewerCtrl",["$scope","eventsService","dialogService","$state","guestFactory",function(e,t,i,n,s){e.editInstance=function(e,t){n.go("main.edit_gl_event",{gli:t.id})},e.getglistTotal=function(e){var t=0;return angular.forEach(e.actual,function(e){t+=e.guest.plus+1}),t},e.published=[],e.isPublished=function(t){return e.published.indexOf(t.id)>=0},e.togglePublished=function(t){var i=e.published.indexOf(t.id);-1===i?e.published.push(t.id):e.published.splice(i,1)},e.save=function(e){s.GuestListInstance.update(e).$promise.then(function(){},function(){})["finally"](function(){})},e.onCapacityChanged=function(t){e.save(t)},e.getActualGuests=function(t){var i=0;return e.event?t?(angular.forEach(t.actual,function(e){"checked in"===e.status&&(i+=e.guest.plus+1-e.plus)}),i):(angular.forEach(e.event.guestLists,function(e){angular.forEach(e.actual,function(e){"checked in"===e.status&&(i+=e.guest.plus+1-e.plus)})}),i):0},e.getTotalGuests=function(){var t=0;return angular.forEach(e.lists,function(i){t+=e.getglistTotal(i)}),t},e.getTotalCapacity=function(){var t=0;return angular.forEach(e.lists,function(e){t+=e.capacity}),t},e.deleteInstance=function(n,s){e.fetchingData=!0,t.deleteGuestList(s,e.event.id).then(function(t){e.lists=t},function(){i.error("There was a problem removing guest list, please try again")})["finally"](function(){e.fetchingData=!1})}}]),angular.module("gliist").controller("GuestListInstanceEditorCtrl",["$scope","guestFactory","dialogService","$state","uploaderService","eventsService",function(e,t,i,n,s,o){e.getglistTotal=function(e){var t=0;return angular.forEach(e.actual,function(e){t+=e.plus+1}),t},e.getRowStyle=function(){return{"background-color":"white","border-bottom":"thin inset #ECECEC"}},e.gridOptions={rowTemplate:'<div  <div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" ng-style="grid.appScope.getRowStyle(row.entity)" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }"  ui-grid-cell></div></div>',columnDefs:[{field:"guest.firstName",name:"First Name",enableHiding:!1},{field:"guest.lastName",name:"Last Name",enableHiding:!1},{field:"guest.email",name:"Email",enableHiding:!1,enableSorting:!1},{field:"guest.phoneNumber",name:"Phone Number",enableHiding:!1,enableSorting:!1},{field:"guest.plus",name:"Plus",enableHiding:!1,enableSorting:!1}],enableCellEditOnFocus:!0,rowHeight:35},e.gridOptions.onRegisterApi=function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(){var t=e.gridApi.selection.getSelectedRows();return t&&0!==t.length?void(e.rowSelected=!0):e.rowSelected=!1})},e.guestListTypes=["GA","VIP","Super VIP","Guest","Artist","Production","Staff","Press","All Access"],e.selected=e.selected||[],e.deleteSelectedRows=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&0!==t.length){var i=_.map(t,function(e){return e.guest.id});e.isDirty=!0,e.fetchingData=!0,o.removeGuestsFromGLInstance(e.gli.id,i).then(function(t){e.gli=t})["finally"](function(){e.fetchingData=!1}),e.rowSelected=!1}},e.$watchCollection("gli",function(t,i){t&&(angular.equals(t,i)||(e.isDirty=!0),e.gridOptions.data=e.gli.actual)}),e.onFileSelect=function(t){t&&0!==t.length&&e.upload(t[0])},e.upload=function(t){e.fetchingData=!0,s.uploadGuestList(t).then(function(t){_.extend(e.gli,t.data)},function(){i.error("There was a problem saving your image please try again")})["finally"](function(){e.fetchingData=!1})},e.onLinkClicked=function(t){var i=e.$new();i.currentGlist=e.event,i.cancel=e.cancel,i.save=e.save,i.selected=[],i.options={enableSelection:!0},i.cancel=function(){$mdDialog.hide()},$mdDialog.show({scope:i,templateUrl:"app/guest-lists/templates/glist-import-dialog.html",targetEvent:t})},e.addMore=function(){e.gli||(e.gli={}),e.gli.actual||(e.gli.actual=[]),e.gli.actual.push({gl_id:e.gli.id,status:"no show",guest:{firstName:"",lastName:"",email:"",phoneNumber:"",plus:0}})},e.save=function(){e.fetchingData=!0,e.gli.listType||(e.gli.listType="GA"),t.GuestListInstance.update(e.gli).$promise.then(function(t){_.extend(e.gli,t),i.success("Guest list saved"),e.isDirty=!1,e.onSave&&e.onSave(t)},function(){i.error("There was a problem saving your guest list, please try again")})["finally"](function(){e.fetchingData=!1})},e.$watch("id",function(s){s&&(e.initializing=!0,t.GuestListInstance.get({id:e.id}).$promise.then(function(t){e.gli=t},function(){i.error("There was a problem getting your events, please try again"),n.go("main.current_events")})["finally"](function(){e.initializing=!1}))})}]),angular.module("gliist").controller("GuestListEditorCtrl",["$scope","guestFactory","dialogService","$mdDialog","$http","uploaderService","eventsService","$state",function(e,t,i,n,s,o,r,l){e.getRowStyle=function(){return{"background-color":"white","border-bottom":"thin inset #ECECEC"}},e.gridOptions={rowTemplate:'<div  <div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" ng-style="grid.appScope.getRowStyle(row.entity)" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }"  ui-grid-cell></div></div>',columnDefs:[{field:"firstName",name:"First Name",enableHiding:!1},{field:"lastName",name:"Last Name",enableHiding:!1},{field:"email",name:"Email",enableHiding:!1,enableSorting:!1},{field:"phoneNumber",name:"Phone Number",enableHiding:!1,enableSorting:!1},{field:"plus",name:"Plus",width:"90",enableHiding:!1,enableSorting:!1}],rowHeight:35,tabIndex:0,enableCellSelection:!0,enableCellEditOnFocus:!0,noTabInterference:!0},e.gridOptions.onRegisterApi=function(t){e.gridApi=t,t.selection.on.rowSelectionChanged(e,function(){var t=e.gridApi.selection.getSelectedRows();return t&&0!==t.length?void(e.rowSelected=!0):e.rowSelected=!1})},e.guestListTypes=["GA","VIP","Super VIP","Guest","Artist","Production","Comp","Press","All Access"],e.selected=e.selected||[],e.deleteSelectedRows=function(){var t=e.gridApi.selection.getSelectedRows();if(t&&0!==t.length){var i=_.map(t,function(e){return e.id});e.isDirty=!0,e.fetchingData=!0,r.removeGuestsFromGL(e.list.id,i).then(function(){e.list.guests=_.reject(e.list.guests,function(e){return _.find(t,function(t){return t.id===e.id})})})["finally"](function(){e.fetchingData=!1}),e.rowSelected=!1}},e.$watchCollection("list",function(t,i){t&&(angular.equals(t,i)||(e.isDirty=!0),e.gridOptions.data=e.list.guests)}),e.onFileSelect=function(n){return n&&0!==n.length?e.list?(e.fetchingData=!0,void t.GuestList.update(e.list).$promise.then(function(t){_.extend(e.list,t),e.isDirty=!1,e.upload(n[0],e.list.id)},function(){i.error("There was a problem saving your guest list, please try again"),e.fetchingData=!1})["finally"](function(){})):void e.upload(n[0]):void 0},e.upload=function(t,n){e.fetchingData=!0,o.uploadGuestList(t,n).then(function(t){e.list||(e.list={}),_.extend(e.list,t)},function(){i.error("There was a problem saving your guest list please try again")})["finally"](function(){e.fetchingData=!1})},e.onLinkClicked=function(t){var s=e.$new();s.currentGlist=e.event,s.cancel=e.cancel,s.save=e.save,s.selected=[],s.options={enableSelection:!0,readOnly:!0},s.cancel=function(){n.hide()},s.importGLists=function(t){e.list=e.list||{title:"New Guest List"},e.list.guests=e.list.guests||[],r.importGuestList(e.list.id,t,e.list).then(function(t){return t?void(e.list.guests=t.guests):i.error("There was a problem linking your guest list, please try again")},function(){i.error("There was a problem linking your guest list, please try again")})["finally"](function(){n.hide()})},n.show({scope:s,templateUrl:"app/guest-lists/templates/glist-import-dialog.html",targetEvent:t})},e.addMore=function(){e.list||(e.list={}),e.list.guests||(e.list.guests=[]),e.list.guests.push({firstName:"",lastName:"",email:"",phoneNumber:"",plus:0})},e.$watch("list.listType",function(t,i){e.list&&e.list.id&&t&&i&&t!==i&&(e.glTypeChanged=!0)}),e.save=function(n){e.fetchingData=!0,e.list.listType||(e.list.listType="GA"),e.glTypeChanged&&(e.list.id=null,e.list.title+=" "+e.list.listType),t.GuestList.update(e.list).$promise.then(function(t){_.extend(e.list,t),i.success("Guest list saved"),e.isDirty=!1,e.onSave&&n?e.onSave(t):l.go("main.edit_glist",{listId:t.id})},function(){i.error("There was a problem saving your guest list, please try again")})["finally"](function(){e.fetchingData=!1})},e.init=function(){e.options||(e.options={})},e.init()}]),angular.module("gliist").controller("EditGuestListCtrl",["$scope","$stateParams","guestFactory","dialogService","$state",function(e,t,i,n,s){e.init=function(){var o=t.listId;e.fetchingData=!0,i.GuestList.get({id:o}).$promise.then(function(t){e.list=t},function(){s.go("main.list_management"),n.error("There was a problem reading guest list, please try again")})["finally"](function(){e.fetchingData=!1})},e.init()}]),angular.module("gliist").controller("CheckGuestCtrl",["$scope","$stateParams","guestFactory","dialogService","eventsService","$state","$window",function(e,t,i,n,s,o,r){e.subtractGuestCount=function(){0!==e.guestCheckin.plus&&e.guestCheckin.plus--},e.addGuestCount=function(){e.guestCheckin.plus>=e.maxGuests||e.guestCheckin.plus++},e.back=function(){r.history.back()},e.checkIn=function(){e.checkingGuest=!0,s.postGuestCheckin(e.guestCheckin,e.guestListInstance).then(function(t){e.maxGuests=t.plus,e.guestCheckin=t,e.guestChecked=1},function(e){n.error(e?e.ExceptionMessage:"Oops there was a problem getting guest, please try again")})["finally"](function(){e.checkingGuest=!1})},e.isCheckinDisabled=function(){return e.guestChecked?!e.maxGuests||!e.guestCheckin.plus&&e.guestChecked:!1},e.isNotChecked=function(){return e.guestChecked?void 0:1},e.init=function(){var i=t.guestId,r=t.gliId;return i&&r?(e.fetchingData=!0,void s.getGuestCheckin(i,r).then(function(t){e.guestCheckin=t.checkin,e.maxGuests=e.guestCheckin.plus,"checked in"===e.guestCheckin.status&&(e.guestChecked=1),e.guestListInstance=t.gl_instance},function(){n.error("Oops there was a problem getting guest, please try again")})["finally"](function(){e.fetchingData=!1})):void o.go("main.welcome")}}]),angular.module("gliist").directive("eventPublish",[function(){return{restrict:"EA",scope:{eventId:"=",options:"=?"},controller:"EventPublishCtrl",replace:!0,templateUrl:"app/events/templates/event-publish.html"}}]),angular.module("gliist").directive("eventPreview",[function(){return{restrict:"EA",scope:{event:"="},controller:"EventPreviewController",replace:!0,templateUrl:"app/events/templates/event-preview.html"}}]),angular.module("gliist").directive("eventList",[function(){return{restrict:"EA",scope:{events:"=",options:"=?"},controller:"EventsListCtrl",replace:!0,templateUrl:"app/events/templates/event-list.tmpl.html"}}]),angular.module("gliist").directive("eventDetails",[function(){return{restrict:"EA",scope:{event:"="},controller:"EventDetailsController",replace:!0,templateUrl:"app/templates/events/event-details.tmpl.html"}}]),angular.module("gliist").controller("LinkGuestListCtrl",["$scope","$mdDialog","userService","dialogService","$state",function(e,t){e.newGuestLists={},e.selected=e.selected||[],e.toggleSelected=function(t){var i=e.selected.indexOf(t);i>-1?e.selected.splice(i,1):e.selected.push(t)},e.cancel=function(){t.cancel()},e.link=function(i){e.event.guestLists.push(i),t.hide()}}]),angular.module("gliist").controller("EventsStatsCtrl",["$scope","$mdDialog","eventsService","dialogService","$stateParams","$state","$timeout",function(e,t,i,n,s,o,r){e.cssStyle="height:400px; width:100%;",e.categories=[{name:"GA",color:"#35A9A9"},{name:"VIP",color:"#3FBEE1"},{name:"Guest",color:"#42E19E"},{name:"Artist",color:"#9369E9"},{name:"Production",color:"#EA69D0"},{name:"Comp",color:"#35A9A9"},{name:"Super VIP",color:"#42E19E"},{name:"All Access",color:"#9369E9"},{name:"Press",color:"#EA69D0"}],e.getCategoryStatus=function(t){var i=0;if(e.event)return angular.forEach(e.event.guestLists,function(e){angular.forEach(e.actual,function(n){"checked in"===n.status&&(n.guest.type===t.name?i+=n.guest.plus+1-n.plus:e.listType===t.name&&(i+=n.guest.plus+1-n.plus))})}),i},e.Math=window.Math,e.getCategoryTotal=function(t){var i=0;if(e.event)return angular.forEach(e.event.guestLists,function(e){angular.forEach(e.actual,function(n){"On the spot"===e.listType&&n.guest.type===t.name?i+=n.guest.plus+1:e.listType===t.name&&(i+=n.guest.plus+1)})}),i},e.updateChart=function(){var t=0;e.chartObject={type:"PieChart",options:{title:"Total Checked in Guests "+t,titleTextStyle:{fontSize:14},backgroundColor:"#ECECEC",legend:"none",colors:["#35A9A9","#3FBEE1","#42E19E","#9369E9","#EA69D0","#35A9A9","#42E19E","#9369E9","#EA69D0"],chartArea:{left:0,top:"10%",width:"100%",height:"75%"},pieSliceText:"label"},data:{cols:[{id:"t",label:"Topping",type:"string"},{id:"s",label:"Slices",type:"number"}],rows:[]}},angular.forEach(e.categories,function(i){var n=e.getCategoryStatus(i);t+=n,e.chartObject.data.rows.push({c:[{v:i.name},{v:n}]})}),e.chartObject.options.title="Total Checked in Guests "+t,r(function(){$("text:contains("+e.chartObject.options.title+")").attr({x:"20"})},1e3)},e.$watch("event",function(t){t&&e.updateChart(t)}),e.options={local:!0},e.gliOptions={readOnly:!0,stats:!0},e.currentEvents=[],e.init=function(){var t=s.eventId;e.initializing=!0,i.getEvents(t).then(function(t){e.event=t,e.currentEvents.push(t),e.chips={tags:[e.event.category],readonly:!0}},function(){n.error("There was a problem getting your events, please try again"),o.go("main.current_events")})["finally"](function(){e.initializing=!1})}}]),angular.module("gliist").controller("EventsCtrl",["$scope","$mdDialog","eventsService","dialogService",function(){}]),angular.module("gliist").controller("EventsListCtrl",["$scope","$mdDialog","eventsService","dialogService","$rootScope",function(e,t,i,n,s){e.isPromoter=function(){return s.isPromoter()},e.isStaff=function(){return s.isStaff()},e.getEventInvite=function(e){return{"background-image":"url("+e.invitePicture+")","background-position":"center center",height:"120px","background-size":"cover"}},e.deleteEvent=function(s,o){var r=t.confirm().title("Are you sure you want to delete event?").ariaLabel("Lucky day").ok("Yes").cancel("No").targetEvent(s);t.show(r).then(function(){i.deleteEvent(o.id).then(function(){e.refreshEvents()},function(){n.error("There was a problem please try again")})},function(){e.alert="You decided to keep your debt."})},e.refreshEvents=function(){if(!e.options||!e.options.local){e.fetchingData=!0;var t;t=e.options&&e.options.past?i.getPastEvents():i.getCurrentEvents(),t.then(function(t){e.events=t},function(){})["finally"](function(){e.fetchingData=!1})}},e.getPadding=function(){return e.options&&e.options.readyOnly?"padding-top-45":void 0},e.getItemClass=function(e){},e.init=function(){e.refreshEvents()},e.init()}]),angular.module("gliist").controller("EventSummaryCtrl",["$scope","$stateParams","dialogService","$state","eventsService","$mdDialog",function(e,t){e.init=function(){e.eventId=t.eventId}}]),angular.module("gliist").controller("EventPublishCtrl",["$scope","$stateParams","dialogService","$state","eventsService","$mdDialog",function(e,t,i,n,s,o){e.toPublish=[],e.publishEvent=function(t){var r=o.confirm().title("Are you sure you want to publish the event?").content("Invitations will be sent to selected guest lists").ariaLabel("Lucky day").ok("Yes").cancel("No").targetEvent(t);o.show(r).then(function(){s.publishEvent(e.toPublish).then(function(){n.go("main.email_stats",{eventId:e.event.id})},function(e){i.error(e)})},function(){i.error("Please try again")})},e.editEvent=function(){n.go("main.edit_event",{eventId:e.event.id})},e.getEventInvite=function(t){return{"background-image":"url("+e.event.invitePicture+")","background-position":"center center",height:t||"250px","background-repeat":"no-repeat","background-size":"contain"}},e.glOptions={readOnly:!0,publish:!0},e.event={id:0},e.init=function(){var t=e.eventId;e.initializing=!0,e.currentEvents=s.getEvents(t).then(function(t){e.event=t,e.chips={tags:[e.event.category],readonly:!0}},function(){i.error("There was a problem getting your events, please try again"),n.go("main.current_events")})["finally"](function(){e.initializing=!1})},e.init()}]),angular.module("gliist").controller("EventPreviewController",["$scope",function(e){e.getEventInvite=function(t){return e.event?{"background-image":"url("+e.event.invitePicture+")","background-position":"center center",height:t||"250px","background-repeat":"no-repeat","background-size":"contain"}:void 0}}]),angular.module("gliist").controller("EventDetailsController",["$scope","$mdDialog","eventsService","dialogService","uploaderService","$state","$timeout","$rootScope","$stateParams","$location",function(e,t,i,n,s,o,r,l,a,d){e.isStaff=function(){return l.isStaff()},e.isPromoter=function(){return l.isPromoter()},e.eventCategories=["Art","Fashion","Music","Charity","Technology","Gaming","Sports","Movies","Films","Others"],e.data={selectedIndex:d.search().view||0,bottom:"bottom"},e.$watchCollection("data.selectedIndex",function(e){d.search("view",e)}),e.glmOptions={hideManualImport:!0},e.getSelected=function(t){return e.data.selectedIndex==t?"logo-bg":void 0},e.getEventInvite=function(t){return{"background-image":"url("+e.event.invitePicture+")","background-position":"center center",height:t||"250px","background-repeat":"no-repeat","background-size":"contain"}},e.onInviteSelected=function(t){t&&0!==t.length&&e.upload(t[0])},e.upload=function(t){e.fetchingData=!0,s.uploadEventInvite(t,e.event.id).then(function(t){e.event.invitePicture=t,n.success("Invite saved")
},function(){n.error("There was a problem saving your image please try again")})["finally"](function(){e.fetchingData=!1})},e.onAddGLClicked=function(s){var o=e.$new();o.currentGlist=e.event,o.cancel=e.cancel,o.save=e.save,o.selected=angular.copy(e.event.guestLists),o.options={enableSelection:!0,readOnly:!0},o.cancel=function(){t.hide()},o.importGLists=function(){i.linkGuestList(o.selected,e.event.id).then(function(i){e.event.guestLists=i,n.success("Guest lists were linked"),t.hide()},function(){n.error("There was a problem linking, please try again")})},t.show({scope:o,templateUrl:"app/guest-lists/templates/glist-import-dialog.html",targetEvent:s})},e.onCreateNewGuestList=function(i){var n=e.$new();n.currentGlist={title:"New Guest List",guests:[]},n.cancel=function(){t.hide()},n.save=function(){e.event.guestLists.push(n.currentGlist)},t.show({scope:n,templateUrl:"app/guest-lists/templates/glist-edit-dialog.tmpl.html",targetEvent:i})},e.eventTitleOnBlur=function(){e.showTitleValidation=!0},e.displayDateErrorMessage=function(){},e.displayErrorMessage=function(t){return"title"===t&&e.showTitleValidation?void 0:e.showValidation||t.$touched&&t.$error.required},e.timeValid=function(){var t=Date.now(),i=new Date(t);return e.event.utcOffset&&(t=t-6e4*i.getTimezoneOffset()-1e3*e.event.utcOffset),e.event.time<t?(e.timeInvalid=!0,!1):(e.timeInvalid=!1,e.event.time&&e.event.endTime&&e.event.time>e.event.endTime?(e.endTimeInvalid=!0,!1):(e.timeInvalid=!1,e.endTimeInvalid=!1,!0))},e.dateOptions={startingDay:1,showWeeks:!1},e.hourStep=1,e.minuteStep=15,e.showMeridian=!0,e.timeOptions={hourStep:[1,2,3],minuteStep:[1,5,10,15,25,30]},e.next=function(t){return 0==e.data.selectedIndex||2==e.data.selectedIndex?t&&t.$invalid|!e.timeValid()?void(e.showValidation=!0):(e.savingEvent=!0,void i.createEvent(e.event).then(function(t){e.event.id=t.id,e.data.selectedIndex=Math.min(e.data.selectedIndex+1,3),e.event.invitePicture=t.invitePicture,n.success("Event "+t.title+" saved")},function(){n.error("There was a problem saving your event, please try again")})["finally"](function(){e.savingEvent=!1})):void(e.data.selectedIndex=Math.min(e.data.selectedIndex+1,3))},e.previous=function(){e.data.selectedIndex=Math.max(e.data.selectedIndex-1,0)},e.onFinishClicked=function(){e.savingEvent=!0,i.createEvent(e.event).then(function(t){e.event.id=t.id,n.success("Event "+t.title+" saved"),o.go("main.event_summary",{eventId:e.event.id})},function(){n.error("There was a problem saving your event, please try again")})["finally"](function(){e.savingEvent=!1})},e.createEvent=function(){e.savingEvent=!0,i.createEvent(e.event).then(function(t){e.event.id=t.id,n.success("Event "+t.title+"saved")},function(){n.error("There was a problem saving your event, please try again")})["finally"](function(){e.savingEvent=!1})},e.previewOptions={hideEdit:!0},e.location={},e.minDate=Date.now(),e.endMinDate=function(){return e.event.time||e.minDate},e.resetPlaceholder=function(){return $("input[placeholder='Enter a location']").length?void $("input[placeholder='Enter a location']").attr("placeholder",""):void r(e.resetPlaceholder,100)},e.$watch("location.details",function(t){t&&$.ajax({url:"https://maps.googleapis.com/maps/api/timezone/json?location="+t.geometry.location.lat()+","+t.geometry.location.lng()+"&timestamp="+Math.round((new Date).getTime()/1e3).toString()+"&sensor=false"}).done(function(t){e.event.utcOffset=t.dstOffset+t.rawOffset})}),e.gliOptions={showSummary:!0},e.init=function(){if(e.isPromoter()&&(e.data.selectedIndex=2),!e.event){var t=new Date,i=new Date(t);i.setHours(t.getHours()+12),t.setHours(t.getHours()+6),e.event={title:"",guestLists:[],time:t,endTime:i}}}}]),angular.module("gliist").controller("EventCheckinCtrl",["$scope","$stateParams","dialogService","$state","eventsService","$timeout",function(e,t,i,n,s,o){e.checkinGuest=function(e){n.go("main.check_guest",{guestId:e.guest.id,gliId:e.gl_id})},e.getEventInvite=function(t){return{"background-image":"url("+e.event.invitePicture+")","background-position":"center center",height:t||"250px","background-size":"cover"}},e.glOptions={readOnly:!0},e.getRowStyle=function(t){return e.guestPending(t)?{"border-bottom":"thin inset #ECECEC","background-color":"white","padding-top":"10px",height:"50px"}:{"background-color":"#CCCCCC",color:"white","padding-top":"10px",height:"50px"}},e.gridOptions={rowTemplate:'<div  <div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" ng-style="grid.appScope.getRowStyle(row.entity)" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }"  ui-grid-cell></div></div>',columnDefs:[{field:"guest.firstName",name:"First Name",enableHiding:!1},{field:"guest.lastName",name:"Last Name",enableHiding:!1},{field:"guest.email",name:"Email",enableHiding:!1,width:300},{field:"guest.type",name:"Type",enableSorting:!0,enableHiding:!1,width:80},{field:"guest.phoneNumber",name:"Phone Number",enableSorting:!1,enableHiding:!1},{field:"guest.plus",name:"Plus",enableSorting:!1,enableHiding:!1,width:60},{name:"Check in",field:"guest.id",enableSorting:!1,enableHiding:!1,width:80,cellTemplate:'<div class="ui-grid-cell-contents" style="padding: 0;float: right" title="Checkin"><md-button md-no-ink="\'true\'" class="md-primary" ng-click="grid.appScope.checkinGuest(row.entity)" style="border-radius: 0px!important;position:absolute;right:0;margin-top:-10px"><md-icon ng-show="row.entity.status == \'checked in\'" style="margin-right: 5px;margin-top: 5px" md-svg-src="assets/images/SVG/checkGreen.svg"></md-icon><md-icon class="logo-bg" ng-show="grid.appScope.guestPending(row.entity)" style="height: 53px;width: 50px;margin-top: -2px;margin-right: -6px;" md-svg-src="assets/images/SVG/edit01.svg"></md-icon></md-button></div>'}],rowHeight:35,data:[]},e.$watchCollection("guestFilter",function(t){t&&e.initGridData(t,e.event)}),e.guestPending=function(e){return"no show"===e.status||e.plus>0},e.initGridData=function(t,i){i&&(e.gridOptions.data=[],angular.forEach(i.guestLists,function(i){angular.forEach(i.actual,function(n){n.guest.type||(n.guest.type=i.listType);var s=!0;if(t.name&&-1===n.guest.firstName.toLowerCase().indexOf(t.name.toLowerCase())&&-1===n.guest.lastName.toLowerCase().indexOf(t.name.toLowerCase())&&(s=!1),s){var o=e.guestPending(n);"checked"!==t.status||o||e.gridOptions.data.push(n),"pending"===t.status&&o&&e.gridOptions.data.push(n)}})}))},e.pastEvent=function(){var t=Date.now(),i=new Date(t),n=new Date(e.event.endTime);return e.event.utcOffset&&(t=t-6e4*i.getTimezoneOffset()-1e3*e.event.utcOffset,i=new Date(t)),i>n?!0:!1},e.event={id:0},e.init=function(){var r=t.eventId;e.guestFilter={status:"pending"},e.initializing=!0,o(function(){$(window).resize()},1e3),s.getEvents(r).then(function(t){e.event=t,e.pastEvent()&&e.gridOptions.columnDefs.pop(),e.initGridData(e.guestFilter,t)},function(){i.error("There was a problem getting your events, please try again"),n.go("main.current_events")})["finally"](function(){e.initializing=!1})},e.init()}]),angular.module("gliist").controller("EmailStatsController",["$scope","$mdDialog","eventsService","dialogService","$state","$stateParams",function(e,t,i,n,s,o){e.init=function(){var t=o.eventId;e.initializing=!0,i.getEvents(t).then(function(t){e.event=t},function(){n.error("There was a problem getting your events, please try again"),s.go("main.current_events")})["finally"](function(){e.initializing=!1})}}]),angular.module("gliist").controller("EditGLEventCtrl",["$scope","$stateParams","dialogService","$state",function(e,t){e.init=function(){e.gliId=t.gli}}]),angular.module("gliist").controller("EditEventCtrl",["$scope","$stateParams","dialogService","$state","eventsService","$filter","$rootScope",function(e,t,i,n,s,o,r){e.isStaff=function(){return r.isStaff()},e.isPromoter=function(){return r.isPromoter()},e.init=function(){var o=t.eventId;e.initializing=!0,e.currentEvents=s.getEvents(o).then(function(t){e.event=t,e.event.date=moment(t.date).toDate(),e.event.time=new Date(t.time.replace("T"," ").slice(0,-6)),e.event.endTime=new Date(t.endTime.replace("T"," ").slice(0,-6))},function(){i.error("There was a problem getting your events, please try again"),n.go("main.current_events")})["finally"](function(){e.initializing=!1})},e.init()}]),angular.module("gliist").controller("AddGLEventCtrl",["$scope","$stateParams","dialogService","$state","eventsService",function(e,t,i,n,s){e.goBackToEvent=function(e){var o=t.eventId;s.linkGuestList([e],o).then(function(){i.success("Guest lists were linked"),n.go("main.edit_event",{eventId:o,view:2})},function(){i.error("There was a problem linking, please try again")})},e.init=function(){e.currentGlist={title:"New Guest List",guests:[]}},e.init()}]),angular.module("gliist").factory("userService",["$rootScope","$http","$q",function(e,t,i){var n,s,o,r,l=function(e){if(!e.access_token)throw new Exception("Trying to save empty access token");s=!0,n=e.userName,a(e.access_token),window.localStorage.userEmail=n,window.localStorage.access_token=e.access_token},a=function(e){o=e,t.defaults.headers.common.Authorization="Bearer "+e},d=function(){return o||a(window.localStorage.access_token),o};return{resetPassword:function(e){var n=i.defer(),s="api/Account/ResetPassword";return t({method:"POST",url:s,data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},sendPasswordRecover:function(e){var n=i.defer(),s="api/EmailController/SendRecoverPasswordEmail";return t({method:"POST",url:s,params:{userEmail:e}}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},getInviteInfo:function(e,n){var s=i.defer(),o="api/companies/GetInviteInfo";return r&&s.resolve(r),t({method:"GET",url:o,params:{companyName:e,token:n}}).success(function(e){s.resolve(e)}).error(function(e){s.reject(e)}),s.promise},getCompanyInfo:function(){var e=i.defer(),n="api/Account/CompanyInfo";return r&&e.resolve(r),t({method:"GET",url:n}).success(function(t){e.resolve(t)}).error(function(t){e.reject(t)}),e.promise},deleteUser:function(e){var n=i.defer(),s="api/Account/DeleteRegisterByInvite";return t({method:"DELETE",url:s,params:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},sendJoinRequest:function(e){var n=i.defer(),s="api/Account/InviteUser";return r&&n.resolve(r),t({method:"POST",url:s,data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},updateCompanyUser:function(e){var n=i.defer(),s="api/Account/UpdateCompanyUser";return t({method:"PUT",url:s,data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},getUserPhoto:function(e,t,i){var n;return t?(n=window.redirectUrl+"/api/account/ProfilePicture/?userId="+t.userId+"&suffix="+i,n="url("+n+")"):n="url('assets/images/blank_user_icon.png')",{"background-image":n,"background-position":"center center",height:e||"250px","background-size":"contain","background-repeat":"no-repeat"}},updateUserProfile:function(e){var n=i.defer(),s="api/Account/UserInfo";return t({method:"PUT",url:s,data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},getCurrentUser:function(){var e=i.defer(),n="api/Account/UserInfo",s=this;return r&&e.resolve(r),t({method:"GET",url:n,params:{},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){s.userData=t,e.resolve(s.userData)}).error(function(t){e.reject(t)}),e.promise},getLogged:function(){return s?!0:window.localStorage.userEmail&&d()?!0:s},login:function(e){var o=i.defer(),r="grant_type=password&username="+e.username+"&password="+e.password;return t({method:"POST",url:"/Token",data:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,t){200===t?(l(e),o.resolve(e)):(s=!1,n="",o.resolve(e)),o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},logout:function(){s=!1,n="",a(""),e.currentUser=null,delete window.localStorage.userEmail,delete window.localStorage.access_token},registerEmail:function(e,o){var r=i.defer(),l="/api/Account/Register";if(o)var l="/api/Account/CreateUserByAccount";var a=this;return t({method:"POST",url:l,data:e,headers:{"Content-Type":"application/json"}}).success(function(t,i){200===i?a.login(e,r).then(function(e){r.resolve(e)},function(e){r.reject(e)}):(s=!1,n="",r.reject(t.ModelState))}).error(function(e){s=!1,n="",r.reject(e.ModelState)}),r.promise}}}]),angular.module("gliist").factory("uploaderService",["$upload","$q",function(e,t){return{uploadGuestList:function(i,n){var s=t.defer();return i||s.reject("Please select a file"),e.upload({url:"api/CSVController/CsvToGuestList",fields:{glId:n},file:i}).success(function(e){s.resolve(e)}).error(function(e){s.reject(e)}),s.promise},upload:function(i){var n=t.defer();return i||n.reject("Please select an image"),e.upload({url:"api/account/ProfilePicture",fields:{},file:i}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},uploadEventInvite:function(i,n){var s=t.defer();return i||s.reject("Please select an image"),e.upload({url:"api/GuestEventController/InvitePicture",params:{eventId:n},file:i}).success(function(e){s.resolve(e)}).error(function(e){s.reject(e)}),s.promise},uploadBatch:function(t){if(t&&t.length)for(var i=0;i<t.length;i++){var n=t[i];e.upload({url:"api/account/ProfilePicture",fields:{},file:n}).progress(function(e){var t=parseInt(100*e.loaded/e.total);console.log("progress: "+t+"% "+e.config.file.name)}).success(function(e,t,i,n){console.log("file "+n.file.name+"uploaded. Response: "+e)})}}}}]),angular.module("gliist").factory("guestFactory",["$resource",function(e){return{Guest:e("/api/guest/:id",{id:"@id"},{update:{method:"PUT",params:{id:"@id"},url:"/api/guest/:id"}}),GuestLists:e("/api/guestlists",{},{get:{method:"GET",isArray:!0}}),GuestList:e("/api/guestlists/:id",{id:"@id"},{update:{method:"POST",params:{},url:"/api/guestlists"},"delete":{method:"DELETE",params:{},url:"/api/guestlists/:id"}}),GuestListInstance:e("/api/GuestListInstances/:id",{id:"@id"},{update:{method:"POST",params:{},url:"/api/GuestListInstances"},"delete":{method:"DELETE",params:{},url:"/api/GuestListInstances/:id"}})}}]),angular.module("gliist").factory("eventsService",["$rootScope","$http","$q",function(e,t,i){return{removeGuestsFromGL:function(e,n){var s=i.defer();return t({method:"POST",url:"api/GuestEventController/DeleteGuestsGuestList",data:{id:e,ids:n}}).success(function(e){s.resolve(e)}).error(function(){s.reject("Oops there was an error, please try again")}),s.promise},removeGuestsFromGLInstance:function(e,n){var s=i.defer();return t({method:"POST",url:"api/GuestEventController/DeleteGuestsGuestListInstance",data:{id:e,ids:n}}).success(function(e){s.resolve(e)}).error(function(){s.reject("Oops there was an error, please try again")}),s.promise},postGuestCheckin:function(e,n){var s=i.defer();return t({method:"POST",url:"api/GuestEventController/CheckinGuest",data:{guestId:e.guest.id,gliId:n.id,plus:e.plus}}).success(function(e){s.resolve(e)}).error(function(e){s.reject(e)}),s.promise},getGuestCheckin:function(e,n){var s=i.defer();return t({method:"GET",url:"api/GuestEventController/GetGuestCheckin",params:{gliId:n,guestId:e}}).success(function(e){s.resolve(e)}).error(function(){s.reject("Oops there was an error trying to get guest information, please try again")}),s.promise},createEvent:function(e){{var n=i.defer();angular.copy(e)}return e.userOffset=e.time.getTimezoneOffset()/60,t({method:"POST",url:"api/event",data:e}).success(function(e){n.resolve(e)}).error(function(){n.reject("Oops there was an error trying to get events, please try again")}),n.promise},addGuestToEvent:function(e,n){var s=i.defer();return t({method:"POST",url:"api/GuestEventController/AddGuest",data:{guest:e,eventId:n}}).success(function(e){s.resolve(e)}).error(function(){s.reject("Oops there was an error trying to get events, please try again")}),s.promise},publishEvent:function(e){var n=i.defer();return t({method:"POST",url:"api/GuestEventController/PublishEvent",data:{ids:e}}).success(function(e){n.resolve(e)}).error(function(){n.reject("Oops there was an error publishing event, please try again")}),n.promise},linkGuestList:function(e,n){var s=i.defer(),o=_.map(e,function(e){return e?e.id:void 0});return t({method:"POST",url:"api/GuestEventController/linkGuestList",data:{ids:o,eventId:n}}).success(function(e){s.resolve(e)}).error(function(){s.reject("Oops there was an error trying to get events, please try again")}),s.promise},importGuestList:function(e,n,s){var o=i.defer(),r=_.map(n,function(e){return e?e.id:void 0});return t({method:"POST",url:"api/GuestEventController/ImportGuestList",data:{ids:r,id:e,gl:s}}).success(function(e){o.resolve(e)}).error(function(){o.reject("Oops there was an error trying to get events, please try again")}),o.promise},deleteGuestList:function(e,n){var s=i.defer(),o=[e.id];return t({method:"POST",url:"api/GuestEventController/DeleteGuestList",data:{ids:o,eventId:n}}).success(function(e){s.resolve(e)}).error(function(){s.reject("Oops there was an error trying to get events, please try again")}),s.promise},getPastEvents:function(){var e=i.defer();return t({method:"GET",url:"api/event/PastEvents/"}).success(function(t){e.resolve(t)}).error(function(){e.reject("Oops there was an error trying to get events, please try again")}),e.promise},getCurrentEvents:function(){var e=i.defer();return t({method:"GET",url:"api/event/CurrentEvents/"}).success(function(t){e.resolve(t)}).error(function(){e.reject("Oops there was an error trying to get events, please try again")}),e.promise},getEvents:function(e){var n=i.defer();return t({method:"GET",url:"api/event/"+(e||"")}).success(function(e){n.resolve(e)}).error(function(){n.reject("Oops there was an error trying to get events, please try again")}),n.promise},deleteEvent:function(e){var n=i.defer();return t({method:"DELETE",url:"api/event",params:{id:e}}).success(function(e){n.resolve(e)}).error(function(){n.reject("Oops there was an error trying to get events, please try again")}),n.promise},getGuestInfo:function(e,n){var s=i.defer();return t({method:"GET",url:"api/guest/",params:{eventId:e,guestId:n}}).success(function(e){s.resolve(e)}).error(function(){s.reject("Oops there was an error trying to get events, please try again")}),s.promise}}}]),angular.module("gliist").factory("dialogService",["$mdToast",function(e){return{error:function(t){e.show(e.simple().content(t).position("right").hideDelay(1e4))},success:function(t){e.show(e.simple().content(t).position("right").hideDelay(3e3))}}}]),angular.module("gliist").directive("userDetails",[function(){return{restrict:"EA",scope:{user:"="},controller:"UserDetailsCtrl",replace:!0,templateUrl:"app/templates/user-profile/user-details.tmpl.html"}}]),angular.module("gliist").filter("ignoreTimeZone",function(){return function(e){if(e){var t=e.split(/[^0-9]/),i=new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5]);return i}}}),angular.module("gliist").controller("WelcomeController",["$scope","$mdSidenav","$state",function(e){e.options={limit:3,readyOnly:!0}}]),angular.module("gliist").controller("UserDetailsCtrl",["$scope","$rootScope","userService","dialogService","uploaderService","$mdDialog",function(e,t,i,n,s){e.data={selectedIndex:0},e.getUserPhoto=function(t){return i.getUserPhoto(t,e.user,e.suffix)},e.displayErrorMessage=function(t){return e.showValidation||t.$touched&&t.$error.required},e.onFileSelect=function(t){t&&0!==t.length&&e.upload(t[0])},e.upload=function(i){e.fetchingData=!0,s.upload(i).then(function(){e.suffix=(new Date).getTime(),t.$broadcast("userUpdated")},function(){n.error("There was a problem saving your image please try again")})["finally"](function(){e.fetchingData=!1})},e.saveChanges=function(t){return t&&t.$invalid?void(e.showValidation=!0):void i.updateUserProfile(e.user).then(function(){n.success("Changes saved"),e.editMode=!1},function(e){n.error(e)})}}]),angular.module("gliist").controller("StatsCtrl",["$scope",function(e){e.options={past:!0,readyOnly:!0}}]),angular.module("gliist").controller("MainCtrl",["$scope","$mdSidenav","$state",function(e,t){e.openLeftMenu=function(){t("left").toggle()}}]),angular.module("gliist").controller("InviteUserCtrl",["$scope","$mdDialog","userService","dialogService","$state",function(e,t,i,n){e.permissions=[{label:"Manager",desc:"Complete access to all aspects of the dashboard and app"},{label:"Staff",desc:"Restricted access"},{label:"Promoter",desc:"Limited Access"}],e.init=function(){e.linked_account_in_edit=_.extend({},e.linked_account),e.selected=[],e.linked_account_in_edit.permissions&&(e.linked_account_in_edit.permissions.indexOf("manager")>-1&&e.selected.push(e.permissions[0]),e.linked_account_in_edit.permissions.indexOf("staff")>-1&&e.selected.push(e.permissions[1]),e.linked_account_in_edit.permissions.indexOf("promoter")>-1&&e.selected.push(e.permissions[2]))},e.init(),e.toggleSelected=function(t){return void(e.selected=[t])},e.isSelected=function(t){return e.selected.indexOf(t)>-1},e.hide=function(){e.linked_account_in_edit={},t.hide()},e.cancel=function(){t.cancel()},e.update=function(){return e.linked_account_in_edit.UserName&&e.linked_account_in_edit.firstName&&e.linked_account_in_edit.lastName?(e.errorMessage=null,e.linked_account_in_edit.permissions=[],angular.forEach(e.selected,function(t){e.linked_account_in_edit.permissions.push(t.label)}),e.linked_account_in_edit.permissions=e.linked_account_in_edit.permissions.join(),e.fetchingData=!0,void i.updateCompanyUser(e.linked_account_in_edit).then(function(){e.linked_account=e.linked_account_in_edit,e.refresh(),t.hide()},function(){n.error("Oops there was a problem updating user, please try again")})["finally"](function(){e.fetchingData=!1})):void(e.errorMessage="Please Fill All Fields")},e.invite=function(){return e.linked_account_in_edit.UserName&&e.linked_account_in_edit.firstName&&e.linked_account_in_edit.lastName?(e.errorMessage=null,e.linked_account_in_edit.permissions=[],angular.forEach(e.selected,function(t){e.linked_account_in_edit.permissions.push(t.label)}),e.linked_account_in_edit.permissions=e.linked_account_in_edit.permissions.join(),e.fetchingData=!0,void i.sendJoinRequest(e.linked_account_in_edit).then(function(){t.hide()},function(e){n.error(e?e.ExceptionMessage:"Oops there was a problem sending invite please try again")})["finally"](function(){e.fetchingData=!1})):void(e.errorMessage="Please Fill All Fields")}}]),angular.module("gliist").controller("AppController",["$scope","$rootScope","userService","$state","dialogService","$mdDialog","$mdSidenav",function(e,t,i,n,s,o,r){function l(e){r(e).toggle()}t.$watch("currentUser",function(i){e.currentUser=i,e.getUserPhoto(),i&&(e.menuItems=t.isPromoter()?[{title:"Guest List Management",ui_sref:"main.list_management",icon:{name:"content_paste",style:"fill: white",size:24}},{title:"Upcoming Events",ui_sref:"main.current_events",icon:{name:"today",style:"fill: white",size:24}},{title:"User Profile",ui_sref:"main.user",icon:{name:"assignment_ind",style:"fill: white",size:24}}]:t.isStaff()?[{title:"Guest List Management",ui_sref:"main.list_management",icon:{name:"content_paste",style:"fill: white",size:24}},{title:"Upcoming Events",ui_sref:"main.current_events",icon:{name:"today",style:"fill: white",size:24}},{title:"Events Statistics",ui_sref:"main.stats",icon:{name:"insert_chart",style:"fill: white",size:24}},{title:"User Profile",ui_sref:"main.user",icon:{name:"assignment_ind",style:"fill: white",size:24}}]:[{title:"Guest List Management",ui_sref:"main.list_management",icon:{name:"content_paste",style:"fill: white",size:24}},{title:"Create Event",ui_sref:"main.create_event",icon:{name:"add_circle",style:"fill: white",size:24}},{title:"Upcoming Events",ui_sref:"main.current_events",icon:{name:"today",style:"fill: white",size:24}},{title:"Events Statistics",ui_sref:"main.stats",icon:{name:"insert_chart",style:"fill: white",size:24}},{title:"User Profile",ui_sref:"main.user",icon:{name:"assignment_ind",style:"fill: white",size:24}}])}),t.isPromoter=function(){return t.currentUser&&t.currentUser.permissions?t.currentUser.permissions.indexOf("promoter")>-1:void 0},t.isAdmin=function(){return t.currentUser&&t.currentUser.permissions?t.currentUser.permissions.indexOf("admin")>-1:void 0},t.isStaff=function(){return t.currentUser&&t.currentUser.permissions?t.currentUser.permissions.indexOf("staff")>-1:void 0},e.hidePhoto=!1,t.$on("userUpdated",function(){e.suffix=(new Date).getTime(),e.userProfilePic=i.getUserPhoto(null,e.currentUser,e.suffix)}),e.getUserPhoto=function(t){e.userProfilePic=i.getUserPhoto(t,e.currentUser,e.suffix)},e.userProfilePic_watch=function(){return e.userProfilePic},e.init=function(){e.errorMessage="",e.credentials={}},e.signUp=function(t){o.show({controller:"SignupCtrl",templateUrl:"app/templates/dialogs/signup-dialog.tmpl.html",targetEvent:t}).then(function(t){e.alert='You said the information was "'+t+'".'},function(){e.alert="You cancelled the dialog."})},t.logout=function(){i.logout(),n.go("home")},e.toggleSidebar=function(){l("left")},e.onKeyPress=function(t){e.credentials.username&&13===t.which&&e.login()},e.forgotPassword=function(){alert("not implement!")},e.login=function(){return e.credentials.username&&e.credentials.password?(e.fetchingData=!0,void i.login(e.credentials).then(function(){n.go("main.welcome")},function(){e.errorMessage="Invalid User or Password"})["finally"](function(){e.fetchingData=!1})):void(e.errorMessage="Invalid User or Password")},e.getBg=function(){return n.current["abstract"]||n.includes("home")||n.includes("signup")||n.includes("signup_invite")||n.includes("recover_password")||n.includes("reset_password")?"logo-bg":void 0},e.setSelected=function(t){e.selectedMenuItem=t},e.getItemClass=function(t){return t===e.selectedMenuItem?"item-selected":void 0},e.menuItems=[{title:"Guest List Management",ui_sref:"main.list_management",icon:{name:"content_paste",style:"fill: white",size:24}},{title:"Create Event",ui_sref:"main.create_event",icon:{name:"add_circle",style:"fill: white",size:24}},{title:"Upcoming Events",ui_sref:"main.current_events",icon:{name:"today",style:"fill: white",size:24}},{title:"Events Statistics",ui_sref:"main.stats",icon:{name:"insert_chart",style:"fill: white",size:24}},{title:"User Profile",ui_sref:"main.user",icon:{name:"assignment_ind",style:"fill: white",size:24}}]}]),angular.module("gliist").run(["$templateCache",function(e){e.put("app/templates/create-event.html",'<div><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Create Event</h3></div></div><event-details event="currentEvent"></event-details></div>'),e.put("app/templates/current-events.html",'<div><div layout="row" layout-wrap="" style="margin-bottom: 30px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Upcoming Events</h3></div></div><event-list events="currentEvents"></event-list></div>'),e.put("app/templates/home.html",'<div flex="" layout="row logo-bg" style="background-color: #33aaaa" layout-fill="" ng-init="init()"><div flex="" layout="column" layout-align="center center" class-="md-padding logo-bg" style="background-color: #33aaaa !important;"><div flex=""></div><div flex=""><img src="assets/images/gliist_logo.png" style="height:80px"></div><div flex=""><md-input-container flex=""><label style="margin-left: 38%">Email</label> <input class="rounded" type="text" ng-model="credentials.username"></md-input-container><md-input-container flex=""><label style="margin-left: 33%">Password</label> <input class="rounded" type="password" ng-model="credentials.password" ng-keypress="onKeyPress($event)"></md-input-container></div><div flex="" layout-align="center center">{{errorMessage}}</div><div flex=""><md-button class="md-primary md-raised" style="background-color:#829493!important;" ng-click="login()">login</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></div><div flex=""><md-button class="md-primary" style="color:white!important;" ui-sref="recover_password">Forgot Password</md-button></div><div flex=""></div><div flex=""></div></div></div><div style="color:white;background-color: #8E8E8E; position: absolute;bottom: 0;width: 100%;left:0;height: 25%"><div layout="column" layout-align="center center"><h3 style="margin-bottom: 0">New Users</h3><p style="margin-top:0">Get started with gjests and ditch the clipboard</p><md-button ui-sref="signup" class="md-primary md-raised logo-bg">Sign Up</md-button></div></div>'),e.put("app/templates/main.html",'<div layout-fill="" flex=""><div ui-view="" layout-fill=""></div></div>'),e.put("app/templates/past-events.html",'<div><h1>Past Events</h1><event-list events="currentEvents" options="options"></event-list></div>'),e.put("app/templates/welcome.html",'<div><div layout="row" layout-wrap="" style="margin-bottom: 30px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Welcome to gjests</h3></div></div><div class="page-subtitle" style="margin-top: -15px;"><h4>Check out whats new!</h4></div><div><md-list><md-subheader style="margin-right: 0px!important;" class="md-no-sticky"><span style="margin-top: -15px">gjests app iOS app is available</span> <a href="https://geo.itunes.apple.com/us/app/gjests/id1001494301?mt=8" target="_blank" style="display:inline-block;overflow:hidden;background:url(http://linkmaker.itunes.apple.com/images/badges/en-us/badge_appstore-lrg.svg) no-repeat;width:165px;height:40px;"></a></md-subheader><md-divider></md-divider><md-subheader style="margin-right: 0px!important;" class="md-no-sticky">Android app is now available <a href="https://play.google.com/store/apps/details?id=com.gjests.app" target="_blank"><img alt="Android app on Google Play" src="https://developer.android.com/images/brand/en_app_rgb_wo_45.png"></a></md-subheader><md-divider></md-divider><md-subheader style="margin-right: 0px!important;" class="md-no-sticky"><span style="margin-top: -15px">Event RSVP Feature in Development</span></md-subheader><md-divider></md-divider><md-subheader style="margin-right: 0px!important;" class="md-no-sticky"><span style="margin-top: -15px">Ticketing System in development</span></md-subheader><md-divider></md-divider><md-subheader style="margin-right: 0px!important;" class="md-no-sticky">Sync offline is under development</md-subheader></md-list></div><div class="page-subtitle" style=""><h4>Upcoming events</h4></div><div><event-list events="currentEvents" options="options"></event-list></div></div>'),e.put("app/events/controllers/test.html",'<html style="font-family: \'Arial\', serif;"><head><title>You are confirmed!</title></head><body style="background-color:#EDEDED;margin: 0"><div><div style="background-color:#A0A0A0;height: 100px;color:white;text-align: center"><img src=":company_logo" style="-webkit-user-select: none;max-height:70px"></div><div style="background-color:#000000;height: 100px;color:white;text-align: center"><img src=":company_logo" style="-webkit-user-select: none;max-height:70px"></div><div style="background-color:#3AAAA9; height: 180px;text-align: center;margin-top: -25px"><p>&lt;%body%&gt;</p><p style="font-size: 24px;font-weight: bold;color:black;text-transform: capitalize">:guest_name <span style="font-weight:normal;color:white">confirmed</span> under <span style="font-size: 24px;font-weight: bold;color:white">:guest_type!</span></p><p style="font-size: 18px;font-weight: bold;color:black;">Plus :guest_plus</p><p>&nbsp;</p></div><div style="background-color:#FFFFFF;height:650px;text-align: center;padding-top: 10px"><img src=":event_invite" style="-webkit-user-select: none;max-height:150px"><h4 style="color:#3AAAA9">Event:</h4><p style="font-size: 18px;font-weight: bold">:event_name</p><h4 style="color:#3AAAA9">Date:</h4><p style="font-size: 18px">:event_date</p><h4 style="color:#3AAAA9">Time:</h4><p style="font-size: 18px">:event_time</p><h4 style="color:#3AAAA9">Location</h4><p style="font-size: 18px">:event_location</p><h4 style="color:#3AAAA9">Fast CheckIn</h4><img src=":qr_code_url" style="height:150px;width:150px"></div><div style="background-color:#3AAAA9;text-align: center;height:100px;padding-top: 20px;font-size: 14px"><p>Please check your confirmation. If there is an error, please contact your point person directly</p><p>Powered by <a href="http://www.gjests.com/" target="_blank">gjests</a></p></div><div style="background-color:#000000;height: 100px;color:white;text-align: center;margin-top: -25px;"><img src=":company_logo" style="-webkit-user-select: none;max-height:70px"></div><div style="background-color:#A0A0A0;text-align: center;height: 50px;color:white;padding-top: 20px;font-size:12px;"><a>Unsubscribe from this list</a></div></div></body></html>'),e.put("app/events/templates/edit-event.html",'<div><div ng-show="initializing"><h4 style="color:#8E8E8E">Loading Event...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-if="!initializing"><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 class="capitalize" style="padding-left: 10px">Edit {{event.title}}</h3></div></div><event-details event="event"></event-details></div></div>'),e.put("app/events/templates/email-stats.html",'<div ng-init="init()"><div ng-show="initializing"><h4>Loading Event...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-show="!initializing"><div layout="row" layout-wrap="" style="margin-bottom: 30px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Event Published + Email Delivery Status</h3></div></div><event-preview event="event"></event-preview><div class="page-subtitle" style="margin-top: -15px;"><h4>Email Status</h4></div><div><h3>This feature is under development - stay tuned!</h3></div></div></div>'),e.put("app/events/templates/event-add-guestlist.html",'<div><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Create Guest List</h3></div></div><guest-list-editor list="currentGlist" on-save="goBackToEvent"></guest-list-editor></div>'),e.put("app/events/templates/event-checkin.html",'<div><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Check In Guests</h3></div></div><div ng-show="initializing"><h4>Loading Event...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div style="margin-top:30px;" ng-show="!initializing"><div><md-input-container style="padding-bottom: 0!important;"><label>Search Guest</label> <input ng-model="guestFilter.name"></md-input-container></div><md-radio-group ng-model="guestFilter.status"><md-radio-button value="pending" class="md-primary">Pending</md-radio-button><md-radio-button value="checked" class="md-primary">Checked</md-radio-button></md-radio-group><div style="margin-top: 20px;"><div ui-grid="gridOptions" style="height:400px;width: 100%" ui-grid-auto-resize=""></div></div></div></div>'),e.put("app/events/templates/event-dialog.tmpl.html",'<md-dialog aria-label="Edit" flex="" style="min-height: 80%"><md-content style="padding: 0;min-height:80%"><event-details event="currentEvent"></event-details></md-content><div class="md-actions" layout="row"><md-button ng-click="cancel()">Cancel</md-button><md-button ng-click="save()" class="md-primary">Save</md-button></div></md-dialog>'),e.put("app/events/templates/event-edit-guestlist.html",'<div ng-init="init()"><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Edit Guest List Instance</h3></div></div><guest-list-instance-editor id="gliId"></guest-list-instance-editor></div>'),e.put("app/events/templates/event-list.tmpl.html",'<div><h3 class="md-title" ng-show="events.length == 0">No events found</h3><md-list style="overflow-y: hidden"><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular><md-list-item ng-class="getItemClass($last)" ng-repeat="event in events | limitTo:(options.limit || events.length)" style="margin-bottom: 5px;"><div layout="row" flex="" style="background-color:#FFFFFF;height: 120px"><div flex="15" ng-style="getEventInvite(event)"></div><div flex="55" style="padding-left: 15px; padding-top: 15px;" layout="row"><md-grid-list md-cols-gt-sm="2" md-row-height-gt-sm="50px" md-gutter="1px" style="width: 100%;text-align: left"><md-grid-tile><div class="md-title capitalize" style="font-weight: bold;color:#8E8E8E;width:100%">{{event.title}}</div></md-grid-tile><md-grid-tile><div class="" style="font-size: 12px;color:#8E8E8E;width:100%">{{event.location}}</div></md-grid-tile><md-grid-tile><p style="margin-right: 10px">Starts:</p><p style="display: inline;font-size: 14px;color:#8E8E8E;line-height: 100;width:100%">{{event.time |date:\'MMM dd, yyyy\'}} {{event.time | ignoreTimeZone |date: \'h:mma\'}}</p></md-grid-tile><md-grid-tile><p style="margin-right: 10px">Ends:</p><p style="display: inline;font-size: 14px;color:#8E8E8E;line-height: 100%;width:100%">{{event.endTime |date:\'MMM dd, yyyy\'}} {{event.endTime |ignoreTimeZone |date: \'h:mma\'}}</p></md-grid-tile></md-grid-list></div><div layout="row" ng-cloak="" flex="30" layout-align="end center" style="" ng-hide="options.local"><div layout="column"><md-button flex="" class="wht-event-list-btn" ui-sref="main.event_checkin({eventId:{{event.id}}})"><ng-md-icon icon="assignment_turned_in" style="fill: #33aaaa" size="24"></ng-md-icon></md-button><div flex=""></div></div><div layout="column" style="height: 120px;"><md-button flex="" class="wht-event-list-btn" ng-disabled="isPromoter() ||isStaff()" ng-hide="options.readyOnly" ui-sref="main.event_summary({eventId:{{event.id}}})"><ng-md-icon icon="theaters" style="fill: #33aaaa" size="24"></ng-md-icon></md-button><md-button flex="" class="logo-event-list-btn" ui-sref="main.event_stats({eventId:{{event.id}}})" ng-class="getPadding()"><ng-md-icon icon="insert_chart" style="fill: white" size="24"></ng-md-icon></md-button></div><div style="width: 1px;background-color: white"></div><div layout="column" style="height: 120px;"><md-button flex="" class="wht-event-list-btn" ng-hide="options.readyOnly" ng-disabled="isStaff()" ui-sref="main.edit_event({eventId:{{event.id}}})"><ng-md-icon icon="mode_edit" style="fill: #33aaaa" size="24"></ng-md-icon></md-button><md-button flex="" class="logo-event-list-btn" ng-hide="options.readyOnly" ng-disabled="isPromoter() || isStaff()" ng-click="deleteEvent($event,event)"><ng-md-icon icon="delete" style="fill: white" size="24"></ng-md-icon></md-button></div></div></div></md-list-item></md-list></div>'),e.put("app/events/templates/event-preview.html",'<div><div style="background-color: white;margin:30px;height: 250px;color:#8E8E8E;overflow: hidden" layout="row"><div flex="33" style="min-width: 250px;"><div ng-style="getEventInvite(\'250px\')" style="width:250px"></div></div><div flex="66" style="margin-top: 50px;margin-left: 20px"><div layout="row" layout-sm="column"><div flex="40"><div style="font-weight: bold;margin:0">{{event.title}}</div><div style="margin-top: 10px">{{event.time |date:\'MMMM dd, yyyy\'}}</div><div style="margin-top: 10px">{{event.location}}</div></div><div flex="40"><div>{{event.category}}</div><div style="margin-top: 10px">{{event.time |ignoreTimeZone| date: \'h:mma\' }} - {{event.endTime| ignoreTimeZone | date: \'h:mma\'}}</div><div style="margin-top: 10px">Capacity: {{event.capacity}}</div></div></div><div layout="row" style="margin-top: 30px">{{event.description}}</div></div></div></div>'),e.put("app/events/templates/event-publish.html",'<div><div ng-show="initializing"><h4>Loading...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-show="!initializing"><event-preview event="event"></event-preview><div style="background-color: #E0E0E0;"><div flex="" style="background-color: #CCCCCC;color:white"><h4 style="padding-left: 10px">Linked Guest Lists</h4></div><guest-list-instance-view published="toPublish" style="padding:10px" lists="event.guestLists" options="glOptions"></guest-list-instance-view></div><div class="md-actions" layout="row" layout-align="center center" style="margin-top: 30px;margin-bottom: 20px"><md-button class="md-primary md-raised" style="background-color: #8E8E8E !important;" ng-hide="options.hideEdit" ng-click="editEvent()">Edit</md-button><md-button class="md-primary md-raised" ng-click="publishEvent($event)">Publish</md-button></div></div></div>'),e.put("app/events/templates/event-stats.html",'<div ng-init="init()"><div ng-if="initializing"><h4>Loading Event...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-if="!initializing"><div layout="row" layout-wrap="" style="margin-bottom: 30px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 class="capitalize" style="padding-left: 10px">{{event.title}} Statistics</h3></div></div><div layout="row"><div flex=""><event-list events="currentEvents" options="options"></event-list></div></div><div><h3 ng-if="event.guestLists.length == 0">Event has no guests</h3></div><div ng-if="event.guestLists.length > 0"><div layout="row"><div flex="50"><md-list style="background-color: white;padding-top: 0px;padding-bottom: 0px;color:white"><md-list-item layout="row" style="color:#969696;text-align: center;background-color: #ECECEC"><div flex="25" style="font-weight: bold">Categories</div><div flex="25" style="font-weight: bold">Checked in</div><div flex="25" style="font-weight: bold">Total</div><div flex="25" style="font-weight: bold">Percentage</div></md-list-item><md-list-item ng-repeat="category in categories" layout="row" style="background-color : {{category.color}};text-align: center"><div flex="">{{category.name}}</div><div flex="">{{getCategoryStatus(category)}}</div><div flex="">{{getCategoryTotal(category)}}</div><div flex="" ng-if="getCategoryTotal(category)">{{ Math.round(getCategoryStatus(category) / getCategoryTotal(category) * 100) }}%</div><div flex="" ng-if="!getCategoryTotal(category)">N/A</div><md-divider ng-if="!$last"></md-divider></md-list-item></md-list></div><div flex="50"><div google-chart="" chart="chartObject" style="{{cssStyle}}"></div></div></div><div style="margin-top: 20px;margin-bottom: 10px;"><md-divider></md-divider></div><div layout="row"><div flex=""><guest-list-instance-view event="event" lists="event.guestLists" options="gliOptions"></guest-list-instance-view></div></div></div></div></div>'),e.put("app/events/templates/event-summary.html",'<div ng-init="init()"><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Preview Event</h3></div></div><event-publish event-id="eventId"></event-publish></div>'),e.put("app/guest-lists/templates/create-list-management.html",'<div><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Create New Guest List</h3></div></div><guest-list-editor list="event.guestList"></guest-list-editor></div>'),e.put("app/guest-lists/templates/edit-list-management.html",'<div><div layout="row" layout-wrap="" style="margin-bottom: 20px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Edit Guest List {{list.title}}</h3></div></div><guest-list-editor list="list"></guest-list-editor></div>'),e.put("app/guest-lists/templates/glist-edit-dialog.tmpl.html",'<md-dialog aria-label="Edit" flex=""><md-subheader class="md-sticky-no-effect">Edit Guest List {{currentGlist.title}}</md-subheader><guest-list-editor list="currentGlist" on-save="save"></guest-list-editor><div class="md-actions" layout="row"><md-button ng-click="cancel()">Cancel</md-button></div></md-dialog>'),e.put("app/guest-lists/templates/glist-import-dialog.html",'<md-dialog flex="80" layout-padding=""><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Link Previous Guest List</h3></div></div><md-content style="overflow-x: hidden"><guest-list-view selected="selected" options="options"></guest-list-view></md-content><div class="md-actions" layout="row"><md-button ng-click="cancel()">Cancel</md-button><md-button ng-click="importGLists(selected)" class="md-primary">Import</md-button></div></md-dialog>'),e.put("app/guest-lists/templates/guest-checkin.html",'<div ng-init="init()"><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Check In Guest</h3></div></div><div ng-show="fetchingData"><h4>Loading...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-hide="fetchingData"><div flex="" layout="column" layout-align="center center" style="margin-top: 30px"><div flex=""><img src="assets/images/guest-check.png" style="height: 150px"></div><div flex=""><h3>{{guestCheckin.guest.firstName}} {{guestCheckin.guest.lastName}}</h3></div><div flex=""><h3>{{guestListInstance.listType}}</h3></div><div flex=""><h3>{{guestCheckin.guest.type}}</h3></div><div flex="">{{(guestCheckin.guest.plus - maxGuests) + guestChecked}} / {{guestCheckin.guest.plus + 1}} Checked</div><div flex="" layout="row" style="width: 200px" ng-show="!isCheckinDisabled()" ng-cloak=""><div flex="30"><md-button class="md-primary md-raised" style="width: 50px" ng-click="subtractGuestCount()">-</md-button></div><div flex="40" style="text-align: center"><h3 style="text-align: center" ng-if="isCheckinDisabled()">{{guestCheckin.plus}}</h3><h3 style="text-align: center;margin-top: 9px;" ng-if="!isCheckinDisabled()">{{guestCheckin.plus + + isNotChecked(guestCheckin)}}</h3></div><div flex="30"><md-button class="md-primary md-raised" style="width: 50px" ng-click="addGuestCount()">+</md-button></div></div><div flex="" ng-show="!isCheckinDisabled()"><md-button class="md-primary md-raised" ng-click="checkIn()" ng-disabled="checkingGuest">check in</md-button><div style="height: 50px"><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="checkingGuest"></md-progress-circular></div></div><div flex="" ng-show="isCheckinDisabled()"><h3>Guest Checked in</h3></div><div flex="" style="margin-top-top:50px;"><md-button class="md-primary md-raised" ng-click="back()">Back</md-button></div></div></div></div>'),e.put("app/guest-lists/templates/guest-list-editor.tmpl.html",'<div><div><div class="page-subtitle"><h4>Enter Guest List Title</h4></div><div layout="" layout-sm="column"><md-input-container flex="75"><label>Enter guest list title</label> <input type="text" ng-model="list.title"></md-input-container><md-select placeholder="Select Type" ng-model="list.listType" flex="25" style="padding-top: 20px;width: 100%;margin-top: 7px" ng-disabled="disableChangeGLType()"><md-select-label style="width:100%">{{list.listType || \'Select Type\'}}</md-select-label><md-option value="{{t}}" ng-repeat="t in guestListTypes">{{t}}</md-option></md-select></div></div><div><div class="page-subtitle" style="margin-top: -15px;"><h4>Import Guests</h4></div><md-list style="padding-left: 5px"><md-list-item layout="row" style="border-bottom: #C9C9C9 solid;"><div flex=""><p>Link previous guest list</p></div><div flex="" layout="row" layout-align="end center"><md-button class="md-primary md-raised" ng-click="onLinkClicked($event)">Link</md-button></div></md-list-item><md-list-item layout="row"><div flex=""><p>Upload new guest list (csv, xlsx)</p></div><div flex="" layout="row" layout-align="end center"><md-button class="md-primary md-raised" ng-file-select="onFileSelect($files)" accept=".csv,.xlsx,.xls">Upload</md-button></div></md-list-item></md-list></div><div><div class="page-subtitle" style="margin-top: -15px;"><h4>Guests</h4></div><div style="background-color: #E0E0E0"><md-list><md-list-item layout="row"><div flex=""><md-button class="md-primary md-raised" ng-click="addMore()">Add Guest</md-button><md-button class="md-primary md-raised" ng-disabled="!rowSelected" ng-click="deleteSelectedRows()">Delete</md-button></div><div flex="" layout="row" layout-align="end center"><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular><md-button class="md-primary md-raised" ng-disabled="!isDirty" ng-click="save(true)">Save</md-button></div></md-list-item></md-list></div><div><div ui-grid="gridOptions" ui-grid-edit="" ui-grid-cellnav="" ui-grid-selection="" ui-grid-auto-resize="" style="height:300px;width: 100%"></div></div></div></div>'),e.put("app/guest-lists/templates/guest-list-instance-editor.html",'<div><div><div layout="" layout-sm="column"><md-input-container flex="75"><label>Enter guest list title</label> <input type="text" ng-model="gli.title"></md-input-container><md-select ng-model="gli.listType" flex="25" style="padding-top: 27px;width: 100%" ng-disabled="\'true\'"><md-select-label style="width:100%">{{gli.listType || \'Select Type\'}}</md-select-label><md-option value="{{t}}" ng-repeat="t in guestListTypes">{{t}}</md-option></md-select></div><div class="page-subtitle" style="margin-top: -15px;"><h4>Guests</h4></div><div style="background-color: #E0E0E0"><md-list><md-list-item layout="row"><div flex=""><md-button class="md-primary md-raised" ng-click="addMore()">Add Guest</md-button><md-button class="md-primary md-raised" ng-disabled="!rowSelected" ng-click="deleteSelectedRows()">Delete</md-button></div><div flex="" layout="row" layout-align="end center"><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular><md-button class="md-primary md-raised" ng-disabled="!isDirty" ng-click="save()">Save</md-button></div></md-list-item></md-list></div><div style="margin-top: 30px"><div ui-grid="gridOptions" ui-grid-edit="" ui-grid-cellnav="" ui-grid-selection="" ui-grid-auto-resize="" style="height:300px;width: 100%"></div></div></div></div>'),e.put("app/guest-lists/templates/guest-list-instance-viewer.html",'<div><h3 class="md-title" ng-show="lists.length == 0">No guest lists found</h3><div layout="row" ng-show="lists.length > 0 && options.showSummary"><div flex="40"><h4>Total Guests: {{getTotalGuests()}}</h4></div><div flex="40"><h4>Total Capacity: {{getTotalCapacity()}}</h4></div></div><md-list style="background-color: white;padding-top: 0px;padding-bottom: 0px;"><md-list-item layout="row" ng-show="lists.length > 0" style="color:#8E8E8E;padding-top: 30px;background-color: #ECECEC"><div flex="25" style="font-weight: bold;">Title</div><div flex="15" style="font-weight: bold">Category</div><div flex="15" style="font-weight: bold" ng-if="options.stats">Checked in</div><div flex="15" style="font-weight: bold" ng-if="!options.stats">Total</div><div flex="15" style="font-weight: bold" ng-if="options.stats">Unconfirmed</div><div flex="15" style="font-weight: bold;margin-left: -10px!important" ng-if="options.stats">Total</div><div flex="10" style="font-weight: bold" ng-if="!options.stats">Capacity</div></md-list-item><md-list-item ng-repeat="instance in lists"><div layout="row" flex="" style="background-color: white"><div flex="25"><p>{{instance.title}}</p></div><div flex="15"><p>{{instance.listType}}</p></div><div flex="15" ng-if="!options.stats"><p>{{getglistTotal(instance)}}</p></div><div flex="15" ng-if="options.stats"><p>{{getActualGuests(instance)}}</p></div><div flex="15" ng-if="options.stats"><p>{{getglistTotal(instance) - getActualGuests(instance)}}</p></div><div flex="15" ng-if="options.stats"><p>{{getglistTotal(instance)}}</p></div><div flex="10" style="padding-left:10px" ng-if="!options.stats"><md-input-container style="padding-bottom: 0"><input name="capacity" ng-model="instance.capacity" ng-disabled="options.readOnly" type="number" min="0" step="1" ng-blur="onCapacityChanged(instance)"></md-input-container></div><div ng-if="options.publish" flex="10" style="padding-left: 10px"><md-checkbox ng-checked="isPublished(instance)" ng-click="togglePublished(instance)" aria-label="Import" ng-show="true" style="margin-bottom: 0px"></md-checkbox></div><div ng-if="options.publish" flex="10" style="padding-top: 7px"><ng-md-icon icon="send" style="fill: #33AAAA" size="24" ng-if="instance.published"></ng-md-icon></div><div layout="row" ng-cloak="" ng-hide="options.readOnly" style="position: absolute;right:0;top:0;height: 100%"><div><md-button class="logo-event-list-btn" ng-click="editInstance($event,instance)"><ng-md-icon icon="mode_edit" style="fill: white" size="24"></ng-md-icon></md-button></div><div style="width: 1px"></div><div><md-button class="logo-event-list-btn" ng-click="deleteInstance($event,instance)"><ng-md-icon icon="delete" style="fill: white" size="24"></ng-md-icon></md-button></div><md-checkbox ng-checked="glistSelected1(glist)" ng-click="toggleSelected(glist)" aria-label="Import" ng-show="options.enableSelection" style="margin-bottom: 0px"></md-checkbox></div></div><md-divider ng-if="!$last"></md-divider></md-list-item></md-list><div style="position: absolute; top:50%;left: 50%;"><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></div></div>'),e.put("app/guest-lists/templates/list-management.html",'<div><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Guest List Management</h3></div></div><div layout="" layout-align="end center"><md-button class="md-primary md-raised" ui-sref="main.create_list_management" ng-hide="isStaff()" ng-cloak="">Create</md-button></div><guest-list-view></guest-list-view></div>'),e.put("app/templates/events/event-details.tmpl.html",'<div ng-init="init()"><div layout="row"><div flex="5"><div style="background-color:white; border-color: white; height: 10px; margin-top: 50px;"></div><div style="margin-top: -55px"><h5 class="text-bg">Details</h5><md-button class="md-fab" style="background-color: white; height: 30px; width: 30px; margin:0" ng-disabled="isPromoter()" ng-class="getSelected(0)" ng-click="data.selectedIndex = 0"></md-button></div></div><div flex="28"><div style="background-color:white; border-color: white; height: 10px; margin-top: 50px;"></div></div><div flex="5"><div style="background-color:white; border-color: white; height: 10px; margin-top: 50px;"></div><div style="margin-top: -55px"><h5 class="text-bg">Invite</h5><md-button class="md-fab" style="background-color: white; height: 30px; width: 30px; margin:0" ng-disabled="!event.id || isPromoter()" ng-class="getSelected(1)" ng-click="data.selectedIndex = 1"></md-button></div></div><div flex="28"><div style="background-color:white; border-color: white; height: 10px; margin-top: 50px;"></div></div><div flex="5"><div style="background-color:white; border-color: white; height: 10px; margin-top: 50px;"></div><div style="margin-top: -55px"><h5 class="text-bg">Guests</h5><md-button class="md-fab" style="background-color: white; height: 30px; width: 30px; margin:0;" ng-disabled="!event.id" ng-class="getSelected(2)" ng-click="data.selectedIndex = 2"></md-button></div></div><div flex="28"><div style="background-color:white; border-color: white; height: 10px;margin-top: 50px;"></div></div><div flex="5"><div style="height: 10px;margin-top: 50px;"></div><div style="margin-top: -55px"><h5 class="text-bg" style="text-align: left">Preview</h5><md-button class="md-fab" style="background-color: white; height: 30px; width: 30px; margin:0;" ng-disabled="!event.id || isPromoter()" ng-class="getSelected(3)" ng-click="data.selectedIndex = 3"></md-button></div></div></div><ng-switch on="data.selectedIndex" class="tabpanel-container"><div role="tabpanel" id="tab1-content" aria-labelledby="tab1" ng-switch-when="0" md-swipe-left="next()" md-swipe-right="previous()"><div><form name="eventForm"><div layout="" layout-sm="column"><md-input-container flex="75"><label>Event Title</label> <input required="" name="title" ng-model="event.title"><div ng-show="showTitleValidation" ng-messages="eventForm.title.$error" ng-if="displayErrorMessage(eventForm.title)"><div ng-message="required">Title is required</div></div></md-input-container><md-select placeholder="Select Type" ng-model="event.category" flex="25" style="padding-top: 27px;width: 100%"><md-select-label style="width:100%">{{event.category || \'Event Category\'}}</md-select-label><md-option value="{{t}}" ng-repeat="t in eventCategories">{{t}}</md-option></md-select></div><div layout="" layout-sm="column"><div flex=""><div style="margin-bottom:-35px"><label style="font-size:14;color:#8E8E8E;">Starts</label></div><datetimepicker min-date="minDate" show-weeks="showWeeks" hour-step="hourStep" minute-step="minuteStep" ng-model="event.time" show-meridian="showMeridian" date-format="dd-MMM-yyyy" date-options="dateOptions" date-disabled="disabled(date, mode)" readonly-time="false"></datetimepicker><div ng-if="timeInvalid" ng-message="required">Event can\'t start in the past</div></div><div flex=""><div style="margin-bottom:-35px"><label style="font-size:14;color:#8E8E8E">Ends</label></div><datetimepicker min-date="endMinDate()" show-weeks="showWeeks" hour-step="hourStep" minute-step="minuteStep" ng-model="event.endTime" show-meridian="showMeridian" date-format="dd-MMM-yyyy" date-options="dateOptions" date-disabled="disabled(date, mode)" readonly-time="false"></datetimepicker><div ng-if="endTimeInvalid" ng-message="required">End time has to be after start time</div></div></div><div layout="" layout-sm="column"><md-input-container flex="75" ng-init="resetPlaceholder()"><label>Event Location</label> <input type="text" name="location" ng-autocomplete="" ng-model="event.location" details="location.details"><md-icon class="input-icon" md-svg-src="assets/images/SVG/location.svg"></md-icon></md-input-container><md-input-container flex="25"><label>Total Capacity</label> <input name="capacity" ng-model="event.capacity" type="number" min="0" step="1"><md-icon class="input-icon" md-svg-src="assets/images/SVG/capacity.svg"></md-icon></md-input-container></div><md-input-container flex=""><label>Event Details</label> <textarea name="details" ng-model="event.description" columns="1"></textarea></md-input-container></form></div><div layout="row" layout-align="end center"><span class="md-caption" ng-if="showValidation">Please fix all errors</span><md-button class="md-primary md-raised" ng-click="next(eventForm)">Next</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="savingEvent"></md-progress-circular></div></div><div role="tabpanel" id="tab2-content" aria-labelledby="tab2" ng-switch-when="1" md-swipe-left="next()" md-swipe-right="previous()"><div><md-list style="padding-left: 5px"><md-list-item layout="row" style="border-bottom: #C9C9C9 solid"><div flex="70"><p>Upload your invite (jpg,gif, file formats supported)</p></div><div flex="30" layout="row" layout-align="end center"><md-button class="md-primary md-raised" ng-file-select="onInviteSelected($files)" accept=".jpg,.png,.gif">UPLOAD</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></div></md-list-item></md-list><div layout="row"><div flex="" ng-style="getEventInvite(\'300px\')"></div></div></div><div layout="row" layout-align="end center"><md-button class="md-primary md-raised" ng-click="next()">Next</md-button></div></div><div role="tabpanel" id="tab3-content" aria-labelledby="tab3" ng-switch-when="2" md-swipe-left="next()" md-swipe-right="previous()"><div><md-list style="padding-left: 5px"><md-list-item layout="row" style="border-bottom: #C9C9C9 solid"><div flex=""><p>Add existing guest list</p></div><div flex="" layout="row" layout-align="end center"><md-button class="md-primary md-raised" ng-click="onAddGLClicked($event)">Add</md-button></div></md-list-item><md-list-item layout="row"><div flex=""><p>Add a new guest list</p></div><div flex="" layout="row" layout-align="end center"><md-button class="md-primary md-raised" ui-sref="main.create_gl_event({eventId:{{event.id}}})">Create</md-button></div></md-list-item></md-list><div><div class="page-subtitle" style="margin-top: -15px;"><h4>Guests</h4></div><guest-list-instance-view event="event" lists="event.guestLists" options="gliOptions"></guest-list-instance-view></div></div><div layout="row" layout-align="end center" style="margin-top: 10px;"><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="savingEvent"></md-progress-circular><md-button class="md-primary md-raised" ng-click="next(eventForm)" ng-hide="isPromoter()" ng-cloak="">Next</md-button></div></div><div role="tabpanel" id="tab4-content" aria-labelledby="tab4" ng-switch-when="3" md-swipe-left="next()" md-swipe-right="previous()"><event-publish event-id="event.id" options="previewOptions"></event-publish></div></ng-switch></div>'),e.put("app/templates/events/link-guest-list-dialog.tmpl.html",'<md-dialog flex="" aria-label="Edit"><guest-list-editor list="newGuestLists" on-save="link"></guest-list-editor><div class="md-actions" layout="row"><md-button ng-click="cancel()">Cancel</md-button></div></md-dialog>'),e.put("app/templates/list/guest-list-management.html",'<div><md-list style="background-color: white"><md-item><md-item-content><div class="md-tile-left"><img ng-src="{{event.photo}}" class="face" style="height: 60px"></div><div class="md-tile-content"><h3>Browse and edit previous guests lists</h3></div><md-button class="md-primary md-raised" ui-sref="main.edit_list_management">Edit</md-button></md-item-content><md-divider></md-divider></md-item><md-item><md-item-content><div class="md-tile-left"><img ng-src="{{event.photo}}" class="face" style="height: 60px"></div><div class="md-tile-content"><h3>Upload new guest list (csv)</h3></div><md-button class="md-primary md-raised" ng-file-select="onFileSelect($files)" accept=".csv">Upload</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></md-item-content><md-divider ng-if="!options.hideManualImport"></md-divider></md-item><md-item ng-hide="options.hideManualImport"><md-item-content><div class="md-tile-left"><img ng-src="{{event.photo}}" class="face" style="height: 60px"></div><div class="md-tile-content"><h3>Manually enter your guest list</h3></div><md-button class="md-primary md-raised" ui-sref="main.create_list_management">Enter</md-button></md-item-content></md-item></md-list></div>'),e.put("app/templates/list/guest-list-viewer.html",'<div ng-init="getGuestLists()"><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular><h3 class="md-title" ng-show="guestLists.length == 0">No guest lists found</h3><div><md-list style="background-color: white;padding-top: 0px;padding-bottom: 0px;"><md-list-item ng-show="guestLists.length > 0" style="background-color: #ECECEC"><div flex="25"><h4>Guest List</h4></div><div flex="15"><h4>Total</h4></div><div flex="15"><h4>Category</h4></div><div flex="15"><h4>Date</h4></div><div flex="15"><h4>Created By</h4></div></md-list-item><md-list-item ng-repeat="glist in guestLists"><div layout="row" flex="" style="background-color: white"><div flex="25"><p>{{glist.title}}</p></div><div flex="15"><p>{{glist.total}}</p></div><div flex="15"><p>{{glist.listType}}</p></div><div flex="15"><p>{{glist.created_on |date:\'MMM dd, yy\'}}</p></div><div flex="15" style="text-transform:capitalize"><p>{{glist.created_by.firstName}} {{glist.created_by.lastName}}</p></div></div><div layout="row" ng-cloak="" style="position: absolute;right:0;top:0;height: 100%" ng-hide="isStaff()"><div><md-button class="logo-event-list-btn" ui-sref="main.edit_glist({listId:{{glist.id}}})" style="height: 48px;" ng-disabled="blockEdit(glist)" ng-hide="options.readOnly"><ng-md-icon icon="mode_edit" style="fill: white" size="24"></ng-md-icon></md-button></div><div style="width: 1px"></div><div><md-button class="logo-event-list-btn" style="padding-left:5px;padding-right:5px;height: 48px;" ng-click="deleteGlist($event,glist)" ng-disabled="blockEdit(glist)" ng-hide="options.readOnly" flex=""><ng-md-icon icon="delete" style="fill: white" size="24"></ng-md-icon></md-button></div><md-checkbox ng-checked="glistSelected(glist)" ng-click="toggleSelected(glist)" aria-label="Import" ng-show="options.enableSelection" style="margin-bottom: 0px"></md-checkbox></div><md-divider ng-if="!$last"></md-divider></md-list-item></md-list></div></div>'),e.put("app/templates/stats/stats.html",'<div><div layout="row" layout-wrap="" style="margin-bottom: 30px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Event Statistics</h3></div></div><event-list events="currentEvents" options="options"></event-list></div>'),e.put("app/templates/user-profile/user-details.tmpl.html",'<div layout="column"><md-whiteframe style="background-color: white" class="md-whiteframe-z1" flex=""><div ng-show="!editMode" layout="" layout-align="center center"><div flex="30" ng-style="getUserPhoto(\'150px\')"></div><div flex="40" layout="column" layout-align="start start" style="padding-left: 20px"><h3 class="md-title">{{user.firstName}} {{user.lastName}}</h3><div>{{user.email}}</div><div>{{user.phoneNumber}}</div><div>{{user.city}}</div><div>{{user.company}}</div></div><div flex="30" layout="row" layout-align="end end"><md-button class="md-primary md-raised" ng-click="editMode = !editMode">Edit</md-button></div></div><div ng-show="editMode"><div layout="row" layout-align="end start" layout-padding=""><md-input-container flex="">Upload your profile picture(jpg,gif, file formats supported)</md-input-container><md-input-container flex="20"><md-button class="md-primary md-raised" ng-file-select="onFileSelect($files)" accept=".jpg,.png,.gif">BROWSE</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></md-input-container><md-input-container flex="20"></md-input-container></div><form name="userForm"><div layout="" layout-sm="column"><md-input-container flex=""><label>First Name</label> <input ng-model="user.firstName" name="firstName" required=""></md-input-container><div ng-messages="userForm.firstName.$error" ng-if="displayErrorMessage(userForm.firstName)"><div ng-if="userForm.firstName.$error.required" ng-message="required">First name is required</div></div><md-input-container flex=""><label>Last Name</label> <input ng-model="user.lastName" name="lastName" required=""></md-input-container><div ng-messages="userForm.lastName.$error" ng-if="displayErrorMessage(userForm.lastName)"><div ng-if="userForm.lastName.$error.required" ng-message="required">Last name is required</div></div></div><div layout="" layout-sm="column"><md-input-container flex=""><label>Email</label> <input ng-model="user.email" type="email" disabled=""></md-input-container><md-input-container flex=""><label>Phone Number</label> <input ng-model="user.phoneNumber" type="tel"></md-input-container></div><div layout="" layout-sm="column"><md-input-container flex=""><label>City</label> <input ng-model="user.city"></md-input-container><md-input-container flex=""><label>Company</label> <input ng-model="user.company" ng-disabled="true"></md-input-container></div><div layout="" layout-sm="column"><md-input-container flex=""><label>Brief Bio</label> <textarea ng-model="user.bio" columns="1"></textarea></md-input-container></div><div layout="" layout-sm="column" ng-show="false"><md-input-container flex=""><label>Password</label> <input></md-input-container><md-input-container flex=""><label>Re-enter Password</label> <input></md-input-container></div></form></div><div class="md-actions" layout="row" layout-align="end center" ng-show="editMode"><md-button class="md-primary md-raised" ng-click="editMode=!editMode">Cancel</md-button><md-button class="md-primary md-raised" ng-click="saveChanges(userForm)">Save</md-button></div></md-whiteframe><p ng-show="!editMode">{{user.bio}}</p></div>'),e.put("app/user/templates/account-details.html",'<div ng-init="init()"><div class="page-subtitle" style="margin-top: 15px;"><h4>Manage Accounts</h4></div><div ng-show="initializing"><h4>Loading...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-hide="initializing" ng-cloak=""><md-list style="padding-left: 5px"><md-list-item layout="row"><div flex="75"><p>Create new Account (Enter details for the users you would like to invite)</p></div><div flex="25" layout="row" layout-align="end center"><md-button class="md-primary md-raised" ng-click="linkNewAccount($event)">Invite</md-button></div></md-list-item><md-list-item layout="row"><div flex="75"><p>Delete Account</p></div><div flex="25" layout="row" layout-align="end center"><md-button class="md-primary md-raised" ng-click="deleteAccount($event)">Delete</md-button></div></md-list-item></md-list><div><div class="page-subtitle" style="margin-top: 15px;"><h4>Edit previously added Accounts</h4></div><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-if="refreshing"></md-progress-circular><md-list ng-if="!refreshing"><md-list-item ng-repeat="user in getLinkedUsers()"><div flex="" layout="row"><div flex="40"><p>{{user.firstName}} {{user.lastName}}</p></div><div flex="15"><p>{{user.permission}}</p></div><div flex="20"><p>{{user.UserName}}</p></div><div flex="10" style="padding: 0"><p>{{user.phoneNumber}}</p></div></div><md-button class="md-primary md-raised" ng-click="deleteUser($event,user)" flex="10" ng-hide="options.readOnly" ng-cloak=""><ng-md-icon icon="delete" style="fill: white" size="24"></ng-md-icon></md-button><md-button class="md-primary md-raised" ng-click="editUser($event,user)" flex="10" ng-hide="options.readOnly" ng-cloak=""><ng-md-icon icon="mode_edit" style="fill: white" size="24"></ng-md-icon></md-button><md-divider ng-if="!$last"></md-divider></md-list-item></md-list></div></div></div>'),e.put("app/user/templates/link-account-dialog.html",'<md-dialog><md-dialog-content><div><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">Invite Information</h3></div></div><div><form name="userForm"><div layout="" layout-sm="column"><md-input-container flex=""><label>First Name</label> <input ng-model="linked_account_in_edit.firstName"></md-input-container><md-input-container flex=""><label>Last Name</label> <input ng-model="linked_account_in_edit.lastName"></md-input-container></div><div layout="" layout-sm="column"><md-input-container flex=""><label>Email</label> <input ng-model="linked_account_in_edit.UserName" ng-disabled="linked_account_in_edit.Id"></md-input-container><md-input-container flex=""><label>Phone Number</label> <input ng-model="linked_account_in_edit.phoneNumber" type="tel"></md-input-container></div></form><div>Permissions (Control what this contributos can do on the dashboard and app)<md-list><md-item ng-repeat="p in permissions" flex=""><div flex="" layout="row"><div flexlayout="column" class="md-tile-content"><div>{{p.label}}</div><div>{{p.desc}}</div></div><div flex="" layout="row" layout-align="end center"><md-checkbox ng-checked="isSelected(p)" ng-click="toggleSelected(p)" aria-label="Import"></md-checkbox></div></div><md-divider ng-if="!$last"></md-divider></md-item></md-list></div></div></div><div class="row" style="color:red"><div class="col">{{errorMessage}}</div></div><div class="md-actions" layout="row"><md-button ng-click="cancel()">Cancel</md-button><md-button ng-click="invite()" class="md-primary" ng-if="!linked_account_in_edit.Id">Invite</md-button><md-button ng-click="update()" class="md-primary" ng-if="linked_account_in_edit.Id">Update</md-button><div ng-if="fetchingData"><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></div></div></md-dialog-content></md-dialog>'),e.put("app/user/templates/profile.html",'<div><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" style="background-color: #8E8E8E;color:white;margin:-8px"><h3 style="padding-left: 10px">User Profile</h3></div></div><div layout="row" layout-align="center center" style="margin-bottom: 10px" class="no-selection"><div flex=""><h5 class="text-bg">Profile</h5><md-button class="md-fab" style="background-color: white; height: 30px; width: 30px; margin: 0" ng-class="getSelected(0)" ng-click="data.selectedIndex = 0"></md-button><div style="background-color:white; border-color: white; height: 10px; margin-top: -20px;"></div></div><div flex=""><h5 class="text-bg">Account</h5><md-button class="md-fab" style="background-color: white; height: 30px; width: 30px; margin: 0" ng-disabled="!isAdmin()" ng-class="getSelected(1)" ng-click="data.selectedIndex = 1"></md-button><div style="background-color:white; border-color: white; height: 10px; margin-top: -20px;"></div></div></div><div style="height: 30px;"></div><ng-switch on="data.selectedIndex" class="tabpanel-container"><div role="tabpanel" id="tab1-content" aria-labelledby="tab1" ng-switch-when="0" md-swipe-left="next()" md-swipe-right="previous()"><div><user-details user="currentUser"></user-details></div></div><div role="tabpanel" id="tab2-content" aria-labelledby="tab2" ng-switch-when="1" md-swipe-left="next()" md-swipe-right="previous()"><div class="md-padding"><account-details user="currentUser"></account-details></div></div></ng-switch></div>'),e.put("app/user/templates/recover-password.html",'<md-content flex="" layout-fill="" layout="column" layout-align="start center" class="md-padding logo-bg"><div><img src="assets/images/gliist_logo.png" style="height:80px"></div><h3 style="color:white">Recover Password</h3><form ng-if="!recoverSent"><div layout="" layout-sm="column"><md-input-container flex="" ng-if="!options.inviteMode"><label style="padding-left: 30px">email address</label> <input name="email" class="rounded" type="email" ng-model="user.email" required=""><div ng-messages="userForm.inviteCode.$error" ng-if="displayErrorMessage(userForm.inviteCode)" style="padding-left: 30px"><div ng-if="userForm.inviteCode.$error.required" ng-message="required">Email is required</div></div></md-input-container></div></form><div ng-if="recoverSent" style="font-size: 16px;color:white;">{{message}}</div><div class="md-actions" layout="row" layout-align="center center"><md-button ng-click="onRecoverClicked(userForm)" class="md-primary md-raised" style="background-color:grey !important;" ng-if="!recoverSent">Recover</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></div></md-content>'),e.put("app/user/templates/reset-password.html",'<md-content flex="" layout-fill="" layout="column" layout-align="start center" class="md-padding logo-bg" ng-init="init()"><div><img src="assets/images/gliist_logo.png" style="height:80px"></div><h3 style="color:white">Reset Password</h3><p style="color:white;font-size:16px;">Enter a new password</p><form ng-if="!recoverSent"><div layout="" layout-sm="column"><md-input-container flex=""><label>new password</label> <input name="password" class="" type="password" ng-model="user.password" required=""><div ng-messages="userForm.inviteCode.$error" ng-if="displayErrorMessage(userForm.inviteCode)" style="padding-left: 30px"><div ng-if="userForm.inviteCode.$error.required" ng-message="required">Email is required</div></div></md-input-container><md-input-container flex=""><label>confirm password</label> <input name="confirm" class="" type="password" ng-model="user.confirmPassword" required=""><div ng-messages="userForm.inviteCode.$error" ng-if="displayErrorMessage(userForm.inviteCode)" style="padding-left: 30px"><div ng-if="userForm.inviteCode.$error.required" ng-message="required">Email is required</div></div></md-input-container></div></form><div style="font-size: 16px;color:red;">{{message}}</div><div class="md-actions" layout="row" layout-align="center center"><md-button ng-click="onResetClicked(form)" class="md-primary md-raised" style="background-color:grey !important;" ng-if="!recoverSent">Reset</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></div></md-content>'),e.put("app/user/templates/signup-invite.html",'<md-content flex="" layout-fill="" layout="column" layout-align="start center" class="md-padding logo-bg" ng-init="init()" style="height: 50%;overflow-y: scroll"><div><img src="assets/images/gliist_logo.png" style="height:80px"></div><div ng-show="loading"><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></div><user-signup ng-if="!loading" user="user" options="options"></user-signup></md-content><div style="color:white;background-color: #8E8E8E; position: absolute;bottom: 0;width: 100%;left:0;height: 20%"><div layout="column" layout-align="center center"><h3 style="margin-bottom: 0">Existing Users</h3><p style="margin-top:0">Login and get going with your lists</p><md-button ui-sref="home" class="md-primary md-raised logo-bg">Login</md-button></div></div>'),e.put("app/user/templates/signup.html",'<md-content flex="" layout-fill="" layout="column" layout-align="start center" class="md-padding logo-bg"><div><img src="assets/images/gliist_logo.png" style="height:80px"></div><user-signup user="createUser"></user-signup></md-content><div style="color:white;background-color: #8E8E8E; position: absolute;bottom: 0;width: 100%;left:0;height: 20%" hide-sm="" hide-md=""><div layout="column" layout-align="center center"><h3 style="margin-bottom: 0">Existing Users</h3><p style="margin-top:0">Login and get going with your lists</p><md-button ui-sref="home" class="md-primary md-raised logo-bg">Login</md-button></div></div>'),e.put("app/user/templates/user-signup-form.html",'<div class="logo-bg"><form name="userForm"><div layout=""><md-input-container flex=""><label>First Name</label> <input name="firstName" ng-model="user.firstName" required=""><div ng-messages="userForm.firstName.$error" ng-if="displayErrorMessage(userForm.firstName)"><div ng-if="userForm.firstName.$error.required" ng-message="required">First name is required</div></div></md-input-container><md-input-container flex=""><label>Last Name</label> <input name="lastName" ng-model="user.lastName" required=""><div ng-messages="userForm.lastName.$error" ng-if="displayErrorMessage(userForm.lastName)"><div ng-if="userForm.lastName.$error.required" ng-message="required">Last name is required</div></div></md-input-container><md-input-container flex=""><label>Phone Number</label> <input name="phoneNumber" ng-model="user.phoneNumber"></md-input-container></div><div layout="" layout-sm="column"><md-input-container flex=""><label>Email</label> <input name="email" ng-model="user.username" ng-disabled="options.inviteMode" required=""><div ng-messages="userForm.email.$error" ng-if="displayErrorMessage(userForm.email)"><div ng-if="userForm.email.$error.required" ng-message="required">Email is required</div></div></md-input-container><md-input-container flex=""><label>Organization</label> <input name="comapny" ng-model="user.company" ng-disabled="options.inviteMode" required=""><div ng-messages="userForm.comapny.$error" ng-if="displayErrorMessage(userForm.comapny)"><div ng-if="userForm.comapny.$error.required" ng-message="required">Company is required</div></div></md-input-container><md-input-container flex=""><label>Industry</label> <input name="industry" ng-model="user.industry"></md-input-container></div><div layout="" layout-sm="column"><md-input-container flex=""><label style="margin-left: 38%">Password</label> <input class="rounded" type="password" ng-model="user.password" ng-minlength="6"></md-input-container><md-input-container flex=""><label style="margin-left: 28%">Confirm Password</label> <input class="rounded" type="password" ng-model="user.confirmPassword" ng-minlength="6"></md-input-container></div><div layout="" layout-sm="column"><md-input-container flex="" ng-if="!options.inviteMode"><label style="margin-left: 38%">Invite Code</label> <input name="inviteCode" class="rounded" type="text" ng-model="user.inviteCode" required=""><div ng-messages="userForm.inviteCode.$error" ng-if="displayErrorMessage(userForm.inviteCode)" style="padding-left: 30px"><div ng-if="userForm.inviteCode.$error.required" ng-message="required">Invite is required</div></div></md-input-container></div></form><div class="md-actions" layout="row" layout-align="center center"><md-button ng-click="register(userForm)" class="md-primary md-raised" style="background-color:grey !important;">Get Started</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></div></div>')
}]);