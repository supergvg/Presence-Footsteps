<div ng-init="init()">

    <div ng-if="initializing">
        <h4>Loading Event...</h4>
        <span>
        <md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular>
            </span>
    </div>
    <div ng-if="!initializing">
        <div layout="row" layout-wrap style="margin-bottom: 30px">
            <div flex class="section-header">
                <h3 class="capitalize" style="padding-left: 10px"> {{event.title}} Statistics</h3>
            </div>
        </div>
        <div layout="row">
            <div flex>
                <event-list events="currentEvents" options="options"></event-list>
            </div>
        </div>
        <div>
            <h3 ng-if="event.guestLists.length == 0">Event has no guests</h3>
        </div>
        <div ng-if="event.guestLists.length > 0 ">
            <div layout="row">
                <div flex="50">
                    <md-list style="background-color: white;padding-top: 0px;padding-bottom: 0px;color:white">
                        <md-list-item layout="row" style="color:#969696;text-align: center;background-color: #ECECEC">
                            <div flex="25" style="font-weight: bold">
                                Categories
                            </div>
                            <div flex="25" style="font-weight: bold">
                                Checked in
                            </div>
                            <div flex="25" style="font-weight: bold">
                                Total
                            </div>
                            <div flex="25" style="font-weight: bold">
                                Percentage
                            </div>
                        </md-list-item>
                        <md-list-item ng-repeat="category in categories" layout="row"
                                      style="background-color : {{category.color}};text-align: center">
                            <div flex>
                                {{category.name}}
                            </div>
                            <div flex>
                                {{getCategoryStatus(category)}}
                            </div>
                            <div flex>
                                {{getCategoryTotal(category)}}
                            </div>
                            <div flex ng-if="getCategoryTotal(category)">
                                {{ Math.round(getCategoryStatus(category) / getCategoryTotal(category) * 100) }}%
                            </div>
                            <div flex ng-if="!getCategoryTotal(category)">
                                N/A
                            </div>
                            <md-divider ng-if="!$last"></md-divider>
                        </md-list-item>
                    </md-list>
                </div>
                <div flex="50">
                    <div google-chart chart="chartObject" style="{{cssStyle}}"></div>
                </div>
            </div>
            <div style="margin-top: 20px;margin-bottom: 10px;">
                <md-divider></md-divider>
            </div>
            <div layout="row">
                <div flex>
                    <guest-list-instance-view event="event" lists="event.guestLists"
                                              options="gliOptions"></guest-list-instance-view>
                </div>
            </div>
        </div>

    </div>
</div>
