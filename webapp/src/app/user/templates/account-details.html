<div ng-init="init()">
  <div class="section-subtitle">
    <h4>Manage Accounts</h4>
  </div>

  <div ng-show="initializing">
    <h4>Loading...</h4>
        <span>
        <md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular>
            </span>
  </div>

  <div ng-hide="initializing" ng-cloak>
    <md-list style="padding-left: 5px">
      <md-list-item layout="row">
        <div flex="75">
          <p>Create new Account (Enter details for the users you would like to invite)</p>
        </div>
        <div flex="25" layout="row" layout-align="end center">
          <md-button class="md-primary md-raised" ng-click="linkNewAccount($event)">
            Invite
          </md-button>
        </div>
      </md-list-item>
      <md-list-item layout="row">
        <div flex="75">
          <p>Delete Account</p>
        </div>
        <div flex="25" layout="row" layout-align="end center">
          <md-button class="md-primary md-raised" ng-click="deleteAccount($event)">
            Delete
          </md-button>
        </div>
      </md-list-item>

    </md-list>

    <div>
      <div class="section-subtitle">
        <h4>Edit previously added Accounts</h4>
      </div>

      <md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-if="refreshing"></md-progress-circular>
      <md-list ng-if="!refreshing">
        <md-list-item ng-repeat="user in getLinkedUsers()">
          <div flex layout="row">
            <div flex="40">
              <p>{{user.firstName}} {{user.lastName}}</p>
            </div>
            <div flex="15">
              <p>{{user.permission}}</p>
            </div>
            <div flex="20">
              <p>{{user.UserName}}</p>
            </div>
            <div flex="10" style="padding: 0">
              <p>{{user.phoneNumber}}</p>
            </div>
          </div>


          <md-button class="md-primary md-raised" ng-click="deleteUser($event,user)" flex="10"
                     ng-hide="options.readOnly" ng-cloak>
            <ng-md-icon icon="delete" style="fill: white" size="24"></ng-md-icon>
          </md-button>
          <md-button class="md-primary md-raised" ng-click="editUser($event,user)" flex="10"
                     ng-hide="options.readOnly" ng-cloak>
            <ng-md-icon icon="mode_edit" style="fill: white" size="24"></ng-md-icon>
          </md-button>

          <md-divider ng-if="!$last"></md-divider>

        </md-list-item>
      </md-list>

    </div>

  </div>
</div>
