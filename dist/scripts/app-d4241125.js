"use strict";angular.module("gliist",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ngMessages","ui.router","ngMaterial","ngMdIcons","angularFileUpload","googlechart","ngAutocomplete","ui.bootstrap","ui.bootstrap.datetimepicker","ui.grid","ui.grid.edit","ui.grid.cellNav","ui.grid.selection","ui.grid.autoResize","ui.select","angular-google-analytics"]).config(["$stateProvider","$urlRouterProvider","$httpProvider","$mdThemingProvider","$mdIconProvider","$locationProvider","AnalyticsProvider","EnvironmentConfig",function(e,t,i,n,a,s,o,r){o.useAnalytics(!1).setAccount("UA-63764118-2").trackPages(!0).setPageEvent("$stateChangeSuccess");var l={50:"#80eeff",100:"#66ebff",200:"#4de7ff",300:"#33e4ff",400:"#1ae0ff",500:"#00ddff",600:"#00c7e6",700:"#00b1cc",800:"#009bb3",900:"#008599",A100:"#99f1ff",A200:"#b3f5ff",A400:"#ccf8ff",A700:"#006e80"};n.definePalette("customPrimary",l),n.theme("default").primaryPalette("customPrimary").warnPalette("red").backgroundPalette("grey"),i.interceptors.push(function(){return{request:function(e){return e.api&&angular.isDefined(r[e.api])?e.url=r[e.api]+e.url:(e.url.indexOf("api")>-1||e.url.indexOf("Token")>-1)&&(e.url=r.gjests_api+e.url),e}}}),a.iconSet("social","img/icons/sets/social-icons.svg",24).defaultIconSet("img/icons/sets/core-icons.svg",24),e.state("home",{url:"/",templateUrl:"app/templates/home.html",permissions:["allowAnonymous","denyLogged"]}).state("signup",{url:"/signup",templateUrl:"app/user/templates/signup.html",controller:"SignupCtrl",permissions:["allowAnonymous","denyLogged"]}).state("signup_invite",{url:"/signup/invite/:company/:token",templateUrl:"app/user/templates/signup.html",controller:"SignupCtrl",permissions:["allowAnonymous","denyLogged"]}).state("recover_password",{url:"/recover_password",templateUrl:"app/user/templates/recover-password.html",controller:"RecoverPasswordCtrl",permissions:["allowAnonymous","denyLogged"]}).state("reset_password",{url:"/reset_password/:token",templateUrl:"app/user/templates/reset-password.html",controller:"ResetPasswordCtrl",permissions:["allowAnonymous","denyLogged"]}).state("main",{url:"/main",templateUrl:"app/templates/main.html",controller:"MainCtrl"}).state("main.user",{url:"/user?view",templateUrl:"app/user/templates/profile.html",controller:"ProfileCtrl",permissions:["refreshSubscription"]}).state("main.create_event",{url:"/create?view",templateUrl:"app/templates/create-event.html",reloadOnSearch:!1,controller:"EventsCtrl",permissions:["refreshSubscription"]}).state("main.create_gl_event",{url:"/event/edit/guestlist/:eventId/:instanceType",templateUrl:"app/events/templates/event-add-guestlist.html",controller:"AddEditGLEventCtrl"}).state("main.edit_gl_event",{url:"/event/edit/guestlistinstance/:gli/:eventId",templateUrl:"app/events/templates/event-edit-guestlist.html",controller:"AddEditGLEventCtrl"}).state("main.edit_event",{url:"/event/edit/:eventId?view",templateUrl:"app/events/templates/edit-event.html",controller:"EditEventCtrl",permissions:["refreshSubscription"]}).state("main.event_summary",{url:"/event/summary/:eventId",templateUrl:"app/events/templates/event-summary.html",controller:"EventSummaryCtrl"}).state("main.event_checkin",{url:"/event/checkin/:eventId",templateUrl:"app/events/templates/event-checkin.html",controller:"EventCheckinCtrl"}).state("main.check_guest",{url:"/event/guest/checkin/:gliId/:guestId",templateUrl:"app/guest-lists/templates/guest-checkin.html",controller:"CheckGuestCtrl"}).state("main.event_stats",{url:"/event/stats/:eventId",templateUrl:"app/events/templates/event-stats.html",controller:"EventsStatsCtrl"}).state("main.current_events",{url:"/current_events",templateUrl:"app/templates/current-events.html",controller:"EventsCtrl"}).state("main.past_events",{url:"/past_events",templateUrl:"app/templates/past-events.html",controller:"EventsCtrl"}).state("main.list_management",{url:"/list_management",templateUrl:"app/templates/list-management.html",controller:"GuestListCtrl"}).state("main.edit_glist",{url:"/edit_list_management/:listId",templateUrl:"app/guest-lists/templates/edit-list-management.html",controller:"EditGuestListCtrl"}).state("main.create_list_management",{url:"/create_list_management",templateUrl:"app/guest-lists/templates/create-list-management.html",controller:"GuestListCtrl"}).state("main.stats",{url:"/stats",templateUrl:"app/templates/stats.html",controller:"StatsCtrl"}).state("main.email_stats",{url:"/email_stats/:eventId?view",templateUrl:"app/events/templates/email-stats.html",controller:"EmailStatsController"}).state("main.welcome",{url:"/welcome",templateUrl:"app/templates/welcome.html",controller:"WelcomeController"}).state("landing_public",{url:"/rsvp/:companyName/:eventName",templateUrl:function(e){return"app/landing/templates/landing"+("popsugar"===e.companyName.toLowerCase()?"-custom":"")+".html"},controller:"LandingCtrl",permissions:["allowAnonymous"]}).state("landing_personal",{url:"/rsvp/:token",templateUrl:"app/landing/templates/landing.html",controller:"LandingCtrl",permissions:["allowAnonymous"]}).state("landing_personal_custom",{url:"/rsvp-custom/:token",templateUrl:"app/landing/templates/landing-custom.html",controller:"LandingCtrl",permissions:["allowAnonymous"]}).state("landing_ticketing_public",{url:"/tickets/:companyName/:eventName",templateUrl:"app/landing/templates/landing-ticketing.html",controller:"LandingTicketCtrl",permissions:["allowAnonymous"]}).state("landing_ticketing_personal",{url:"/tickets/:token",templateUrl:"app/landing/templates/landing-ticketing.html",controller:"LandingTicketCtrl",permissions:["allowAnonymous"]}).state("choose_plan",{url:"/choose-plan",templateUrl:"app/templates/choose-plan.html"}),t.otherwise("/main/welcome")}]).run(["$rootScope","$state","userService","subscriptionsService","$document","Analytics","dialogService","permissionsService",function(e,t,i,n,a,s,o,r){a.on("keydown",function(e){var t=!1;if(8===e.keyCode){var i=e.srcElement||e.target;t="INPUT"===i.tagName.toUpperCase()&&("TEXT"===i.type.toUpperCase()||"PASSWORD"===i.type.toUpperCase()||"FILE"===i.type.toUpperCase()||"EMAIL"===i.type.toUpperCase()||"SEARCH"===i.type.toUpperCase()||"NUMBER"===i.type.toUpperCase()||"DATE"===i.type.toUpperCase())||"TEXTAREA"===i.tagName.toUpperCase()?i.readOnly||i.disabled:!0}t&&e.preventDefault()});var l=function(t){e.appReady=t,e.appReady?angular.element("#loading").hide():angular.element("#loading").show()},d=function(){i.logout(),t.go("home"),l(!0)},c=function(t,i,a){e.waitingPlan=!0,n.getUserSubscription().then(function(n){e.waitingPlan=!1,e.currentUser.subscription="undefined",n.data&&n.dataTotalCount>0&&(e.currentUser.subscription=n.data),e.stateLoadedSubscription={name:i.name,params:a},u(t,i,a)},function(){d()})},u=function(i,n,a){e.currentUser.subscription&&n.permissions&&n.permissions.indexOf("refreshSubscription")>-1&&(n.name!==e.stateLoadedSubscription.name||!angular.equals(a,e.stateLoadedSubscription.params))&&(e.currentUser.subscription=null),e.currentUser.subscription?"undefined"===e.currentUser.subscription?r.isRole("admin")?("choose_plan"!==n.name||i.defaultPrevented)&&(i.preventDefault(),t.go("choose_plan")):(o.error("Your company doesn't have plan selected. Please contact to your administrator."),i.preventDefault(),d()):r.roleDenyAccess(n.name)?(i.preventDefault(),t.go("main.welcome")):i.defaultPrevented&&t.go(n.name,a):c(i,n,a)};e.$on("$stateChangeStart",function(n,a,s){if(a.permissions&&a.permissions.indexOf("denyLogged")>-1&&i.getLogged()&&(n.preventDefault(),t.go("main.welcome")),!(a.permissions&&a.permissions.indexOf("allowAnonymous")>-1)){if(e.waitingUserInfo||e.waitingPlan)return void n.preventDefault();e.currentUser?u(n,a,s):(n.preventDefault(),i.getLogged()?(l(!1),e.waitingUserInfo=!0,i.getCurrentUser().then(function(t){e.currentUser=t,r.roleExisis()?u(n,a,s):d(),e.waitingUserInfo=!1},function(){d()})):d())}}),e.$on("$stateChangeSuccess",function(t,i){(i.permissions&&i.permissions.indexOf("allowAnonymous")>-1||e.currentUser&&e.currentUser.subscription)&&!e.appReady&&l(!0)})}]),angular.module("gliist").directive("subscriptions",[function(){return{restrict:"EA",scope:{options:"=?"},controller:"SubscriptionsCtrl",replace:!0,templateUrl:"app/user/templates/subscriptions.html"}}]),angular.module("gliist").directive("billing",[function(){return{restrict:"EA",scope:{},controller:"BillingCtrl",replace:!0,templateUrl:"app/user/templates/billing.html"}}]),angular.module("gliist").directive("accountDetails",[function(){return{restrict:"EA",scope:{user:"="},controller:"AccountDetailsCtrl",replace:!0,templateUrl:"app/user/templates/account-details.html"}}]),angular.module("gliist").controller("UserDetailsCtrl",["$scope","$rootScope","userService","dialogService","uploaderService",function(e,t,i,n,a){e.getUserPhoto=function(t){return i.getUserPhoto(t,e.user,e.suffix)},e.displayErrorMessage=function(t){return e.showValidation||t&&t.$touched&&t.$error.required},e.onFileSelect=function(t){t&&0!==t.length&&e.upload(t[0])},e.upload=function(i){e.fetchingData=!0,a.upload(i).then(function(){e.suffix=(new Date).getTime(),t.$broadcast("userUpdated")},function(){n.error("There was a problem saving your image please try again")})["finally"](function(){e.fetchingData=!1})},e.updatePassword=function(t){return t&&t.$invalid?void(e.showValidation=!0):void i.changePassword({OldPassword:e.user.password,NewPassword:e.user.new_password,ConfirmPassword:e.user.re_password}).then(function(){n.success("User password updated"),e.editMode=!1},function(e){var t=e.Message||"Oops there was an error, please try again";n.error(t)})},e.saveChanges=function(t){return t&&t.$invalid?void(e.showValidation=!0):void i.updateUserProfile(e.user).then(function(){n.success("Changes saved"),e.editMode=!1},function(e){n.error(e)})}}]),angular.module("gliist").controller("SubscriptionsCtrl",["$scope","subscriptionsService","dialogService","$rootScope","$state",function(e,t,i,n,a){e.plans=[],e.pricePolicyKeys=[],e.options=e.options||{},e.planLabels=[],e.allowToSelect=function(t){return e.plans[t].pricePolicies.length>0},e.showButton=function(t){var i="",a="";return e.isSubscribed()&&(i=n.currentUser.subscription.status,a=n.currentUser.subscription.pricePolicy.prices[0].type),e.allowToSelect(t)&&(!e.plans[t].isCurrentlyUsed||e.plans[t].isCurrentlyUsed&&e.plans[t].pricePolicies.length>1&&"Year"!==a)&&("Active"===i||"Active"!==i&&"DOWNGRADE"!==e.planLabels[t])},e.getEndDate=function(){return e.isSubscribed()?n.currentUser.subscription.endDate:!1},e.isSubscribed=function(){return n.currentUser&&n.currentUser.subscription&&"undefined"!==n.currentUser.subscription},e.beforeSelectPlan=function(t,a){if("UPGRADE"===e.planLabels[t])i.confirm(a,"You are about to upgrade.<br>We will prorate your payment separately","UPGRADE","CANCEL").then(function(){e.selectPlan(t)});else if("DOWNGRADE"===e.planLabels[t]){var s="Are you sure you want to downgrade?<br>Your new plan will be in effect the next billing cycle";e.isSubscribed()&&"Monthly"===n.currentUser.subscription.subscription.name&&"Guest List Only"===e.plans[t].name&&(s="Are you sure you want to downgrade?<br>Your premium features will not be accessible after"),i.confirm(a,s,"YES","NO").then(function(){e.selectPlan(t)})}else e.selectPlan(t)},e.selectPlan=function(s){var o=e.plans[s],r=e.pricePolicyKeys[s],l=o.pricePolicies[r];(l.prices[0].amount>0||o.usedPromoCode)&&"Pay as you go"!==o.name?t.paymentPopup(o,r,e.getSubscriptions):(e.loading=!0,t.setUserSubscription({subscriptionId:o.id,pricePolicyId:l.id}).then(function(t){n.currentUser.subscription=t.data,"choose_plan"===a.current.name?"Pay as you go"===n.currentUser.subscription.subscription.name?i.confirm(null,"Payment is not required now until you create an event.","Ok").then(function(){a.go("main.welcome")}):a.go("main.welcome"):e.getSubscriptions()},function(e){i.confirm(null,e.data.message,"OK","")})["finally"](function(){e.loading=!1}))},e.getSubscriptions=function(){e.loading=!0,t.getSubscriptions().then(function(t){e.plans=t.data;var i="DOWNGRADE";e.isSubscribed()||(i="SELECT"),e.planLabels=[],e.pricePolicyKeys=[],angular.forEach(e.plans,function(t,a){e.pricePolicyKeys[a]=0,t.isCurrentlyUsed?(e.isSubscribed()&&angular.forEach(t.pricePolicies,function(t,i){t.id!==n.currentUser.subscription.pricePolicy.id&&(e.pricePolicyKeys[a]=i)}),1===t.pricePolicies.length&&e.planLabels.push("ACTIVE"),i="UPGRADE"):e.planLabels.push(i)})})["finally"](function(){e.loading=!1})},e.getSubscriptions()}]),angular.module("gliist").controller("SignupCtrl",["$scope","userService","dialogService","$state","$stateParams",function(e,t,i,n,a){e.user={},e.options={inviteMode:!1,freeRegister:!0},e.displayErrorMessage=function(t){return e.showValidation||t&&t.$touched},e.register=function(a){return a&&a.$invalid?void(e.showValidation=!0):void(e.user.password===e.user.confirmPassword&&(e.sendingData=!0,t.registerEmail(e.user,e.options.inviteMode).then(function(){e.user.username=null,e.user.password=null,e.user.confirmPassword=null,n.go("main.welcome")},function(e){var t=e&&e.Message||"There was a problem signing up, please try again";i.error(t)})["finally"](function(){e.sendingData=!1})))},e.init=function(){var s=a.company,o=a.token;angular.isDefined(s)&&angular.isDefined(o)&&(e.options.inviteMode=!0,e.loading=!0,t.getInviteInfo(s,o).then(function(t){return t?(e.user=t,e.user.username=t.email,e.user.company=s,void(e.user.token=o)):void n.go("home")},function(){i.error("There was a problem signing up, please try again")})["finally"](function(){e.loading=!1}))}}]),angular.module("gliist").controller("ResetPasswordCtrl",["$scope","userService","dialogService","$state","$stateParams",function(e,t,i,n,a){e.resetSent=!1,e.user={},e.onResetClicked=function(n){var a=[];if(e.user.password!==e.user.confirmPassword&&a.push("Password don't match"),n&&n.$invalid&&n){var s={required:{password:"Please Enter Password",confirm:"Please Confirm Password"}};angular.forEach(n.$error,function(e,t){s[t]&&angular.forEach(e,function(e){s[t][e.$name]&&a.push(s[t][e.$name])})})}return a.length>0?void i.error(a.join(", ")):(e.fetchingData=!0,void t.resetPassword({token:e.token,NewPassword:e.user.password,ConfirmPassword:e.user.confirmPassword}).then(function(){e.resetSent=!0,i.success("Password Changed")},function(e){i.error(e?e.ExceptionMessage:"Oops there was a problem please try again")})["finally"](function(){e.fetchingData=!1}))},e.init=function(){e.token=a.token,e.token||n.go("home")}}]),angular.module("gliist").controller("RecoverPasswordCtrl",["$scope","userService","dialogService",function(e,t,i){e.recoverSent=!1,e.user={},e.onRecoverClicked=function(){e.user.email&&(e.fetchingData=!0,t.sendPasswordRecover(e.user.email).then(function(){e.recoverSent=!0,i.success("An email has been sent to your inbox, please check it for further instructions")},function(){i.error("Oops there was a problem please try again")})["finally"](function(){e.fetchingData=!1}))}}]),angular.module("gliist").controller("ProfileCtrl",["$scope","$rootScope","userService","dialogService","$location","$stateParams",function(e,t,i,n,a,s){e.selectedIndex=parseInt(s.view)||0,t.$watch("currentUser",function(t){e.currentUser=angular.copy(t)}),e.getSelected=function(t){return e.selectedIndex===t?"active":""},e.toIndex=function(e){a.search("view",e)},e.next=function(t){"t"===t.pointer.type&&(e.selectedIndex=Math.min(e.selectedIndex+1,1))},e.previous=function(t){"t"===t.pointer.type&&(e.selectedIndex=Math.max(e.selectedIndex-1,0))},e.link=function(){i.updateCompanySocialLinks(e.currentUser).then(function(){n.success("Social links saved")},function(e){n.error(e.Message)})}}]),angular.module("gliist").controller("InviteUserCtrl",["$scope","$mdDialog","userService","dialogService","permissionsService",function(e,t,i,n,a){e.rolesOrder=["manager","staff","promoter"],e.roles=a.roles,e.init=function(){e.linkedAccountInEdit=e.linked_account||{},e.selected=e.linkedAccountInEdit.permissions?e.linkedAccountInEdit.permissions:""},e.init(),e.toggleSelected=function(t){e.selected=t},e.isSelected=function(t){return t===e.selected},e.cancel=function(){t.cancel()},e.save=function(a){var s=[];if(a&&a.$invalid){var o={required:{firstName:"First Name is required",lastName:"Last Name is required",userName:"Email is required"},email:{userName:"Email is incorrect"}};angular.forEach(a.$error,function(e,t){angular.forEach(e,function(e){s.push(o[t][e.$name])})})}return""===e.selected&&s.push("Select role"),s.length>0?void n.error(s.join(", ")):(e.linkedAccountInEdit.permissions=e.selected,e.fetchingData=!0,void(e.linkedAccountInEdit.Id?i.updateCompanyUser(e.linkedAccountInEdit).then(function(){e.linked_account=e.linkedAccountInEdit,t.hide()},function(e){var t=e.ExceptionMessage||e.Message||"Oops there was a problem sending invite please try again";n.error(t)})["finally"](function(){e.fetchingData=!1}):i.sendJoinRequest(e.linkedAccountInEdit).then(function(){t.hide()},function(e){var t=e.ExceptionMessage||e.Message||"Oops there was a problem sending invite please try again";n.error(t)})["finally"](function(){e.fetchingData=!1})))}}]),angular.module("gliist").controller("BillingCtrl",["$scope","$mdDialog","paymentsService","dialogService","EnvironmentConfig","$window",function(e,t,i,n,a,s){var o={cardDataSaved:{number:"XXXX"},cardData:{number:"",cvc:"",expiryMonth:"",expiryYear:"",zipCode:"",isDefault:!1}};e.cards=[angular.extend({},o),angular.extend({},o)],e.invoices=[],e.cardsDataLoaded=!1,e.options={billing:!0},e.loadingInvoices=!0,e.loadingCards=!0,i.getCharges().then(function(t){t.data&&t.data.length>0&&(e.invoices=t.data)})["finally"](function(){e.loadingInvoices=!1}),e.initCard=function(t,i){e.cards[i].cardData=angular.extend({},t),e.cards[i].cardData.number="",e.cards[i].cardData.cvc="",e.cards[i].cardDataSaved=angular.extend({},t)},i.getCards().then(function(t){t.data&&(angular.forEach(t.data,function(t,i){e.initCard(t,i)}),e.cardsDataLoaded=!0)})["finally"](function(){e.loadingCards=!1}),e.editPaymentInfo=function(){var a=e.$new();a.close=function(){t.hide()},a.update=function(t,a){var s=[];if(t&&t.$invalid){var o={required:{number:"Please Enter Card Number",cvc:"Please Enter Card CVC Code",exp_month:"Please Enter Card Expiration Month",exp_year:"Please Enter Card Expiration Year"},pattern:{number:"Please Enter Correct Card Number",cvc:"Please Enter Correct Card CVC Code",exp_month:"Please Enter Correct Card Expiration Month",exp_year:"Please Enter Correct Card Expiration Year"},max:{exp_month:"Please Enter Correct Card Expiration Month"},min:{exp_year:"Please Enter Correct Card Expiration Year"}};angular.forEach(t.$error,function(t,i){o[i]&&angular.forEach(t,function(t){o[i][t.$name]&&(!e.cards[a].cardData.cardId||e.cards[a].cardData.cardId&&-1===["number","cvc"].indexOf(t.$name))&&s.push(o[i][t.$name])})})}return s.length>0?void n.error(s.join(", ")):void(e.cards[a].cardData.cardId?(e.savingCard=!0,i.updateCard(e.cards[a].cardData).then(function(t){e.initCard(t.data,a)})["finally"](function(){e.savingCard=!1})):(e.savingCard=!0,i.addCard(e.cards[a].cardData).then(function(t){e.initCard(t.data,a)})["finally"](function(){e.savingCard=!1})))},a["delete"]=function(t){e.cards[t].cardData.cardId&&(e.savingCard=!0,i.deleteCard(e.cards[t].cardData.cardId).then(function(i){e.initCard(i.data,t)})["finally"](function(){e.savingCard=!1}))},t.show({scope:a,templateUrl:"app/user/templates/payment-info.html"})},e.getExportPdfUrl=function(e){return a.payments_api+"charges/export?id="+e+"&authToken="+s.localStorage.access_token}}]),angular.module("gliist").controller("AccountDetailsCtrl",["$scope","$mdDialog","userService","dialogService","$rootScope","subscriptionsService","$state",function(e,t,i,n,a,s,o){e.linkNewAccount=function(i){if(!s.verifyFeature("ManagerRole")&&!s.verifyFeature("PromoterRole")&&!s.verifyFeature("StaffRole"))return void n.confirm(i,"You are not allowed to invite contributors. Would you like to upgrade to unlimited?","Upgrade","Close").then(function(){o.go("main.user",{view:2})});var a=e.$new();t.show({controller:"InviteUserCtrl",scope:a,templateUrl:"app/user/templates/link-account-dialog.html",targetEvent:i})},e.editUser=function(i,n){var a=e.$new();a.linked_account=n,t.show({controller:"InviteUserCtrl",scope:a,templateUrl:"app/user/templates/link-account-dialog.html",targetEvent:i})},e.deleteAccount=function(s){var o=t.confirm().title("Are you sure you want to delete your account?").content("All data will be lost").ariaLabel("Lucky day").ok("Yes").cancel("No").targetEvent(s);t.show(o).then(function(){i.deleteCompany({companyId:e.user.company_id,userId:e.user.userId}).then(function(){a.logout()},function(e){var t=e.MessageDetail||"Oops there was a problem loading account info, please try again";n.error(t)})},function(){})},e.deleteUser=function(a,s){var o=t.confirm().title("Are you sure you want to delete the user?").content("User data will be lost").ariaLabel("Lucky day").ok("Yes").cancel("No").targetEvent(a);t.show(o).then(function(){i.deleteUser({userId:s.Id}).then(function(){e.refresh()},function(t){e.refresh();var i=t.MessageDetail||"Oops there was a problem deleting user, please try again";n.error(i)})},function(){})},e.getLinkedUsers=function(){return e.company?e.company.users.filter(function(e){return e.permissions&&-1===e.permissions.indexOf("admin")}):[]},e.refresh=function(){e.refreshing=!0,i.getCompanyInfo().then(function(t){e.company=t},function(){n.error("Oops there was a problem loading account info, please try again")})["finally"](function(){e.refreshing=!1})},e.init=function(){e.initializing=!0,i.getCompanyInfo().then(function(t){e.company=t},function(){n.error("Oops there was a problem loading account info, please try again")})["finally"](function(){e.initializing=!1})}}]),angular.module("gliist").controller("LandingCtrl",["$scope","$state","$stateParams","dialogService","eventsService","$location","$mdDialog",function(e,t,i,n,a,s,o){var r=i.companyName,l=i.eventName,d=i.token;e["public"]=angular.isUndefined(d),e.event={},e.message="",e.loading=!0,e.nameIsMissing=!1,e.eventReceived=function(i){return"popsugar"!==i.company.name.toLowerCase()||e["public"]||"landing_personal_custom"===t.current.name?(e["public"]||""!==i.guest.firstName||(e.nameIsMissing=!0),e.loading=!1,e.event=i,e.rsvp.plus=0,void(e.event.event.isRsvpExpired?o.show({template:'<md-dialog><md-dialog-content style="padding: 50px;font-size:20px;"><b>Oops! RSVP for this event has expired.</b></md-dialog-content></md-dialog>'}):a.incRSVPVisitors(e.event.event.id))):void t.go("landing_personal_custom",{token:d})},e["public"]?a.getPublicEventDetails("rsvp",r,l).then(e.eventReceived,function(e){n.error(e.message)}):a.getPersonalEventDetails("rsvp",d).then(e.eventReceived,function(e){n.error(e.message)}),e.getCustomLocation=function(){if(e.event.event){var t=e.event.event.location.match(/venue-name">([^,]+)/),i=e.event.event.location.match(/street-address">([^<]+)/);return(t?t[1]:"")+(i?" | "+i[1]:"")}return""},e.getCompanyLogo=function(){if(e.event&&e.event.company){if(!e.event.company.users)return e.event.company.logo;var t;return angular.forEach(e.event.company.users,function(e){e.profilePictureUrl&&(t=e.profilePictureUrl)}),t}},e.getPageURL=function(){return s.absUrl()},e.rsvp={},e.onSubmitClicked=function(t){if(t&&t.$invalid){var i={required:{name:"Name is required",email:"Email is required"},pattern:{name:"Last Name is required"},email:{email:"Not valid email"},max:{plus:"Number of additional guests cannot exceed "+e.event.event.additionalGuests+" people"}},s=[];return angular.forEach(t.$error,function(e,t){angular.forEach(e,function(e){s.push(i[t][e.$name])})}),n.error(s.join(", ")),void(e.showValidation=!0)}e.waiting||(e.waiting=!0,e.success=!1,e["public"]?a.confirmRSVPPublicEvent({eventId:e.event.event.id,email:e.rsvp.email,name:e.rsvp.name,additionalGuests:e.rsvp.plus}).then(function(){e.message="Thank you! You have been added to the event guest list!",e.success=!0},function(t){e.message=t.message||t.Message,e.success=!0})["finally"](function(){e.waiting=!1}):a.confirmRSVPPersonalEvent({eventId:e.event.event.id,guestId:e.event.guest.id,additionalGuests:e.rsvp.plus,guestName:e.rsvp.name}).then(function(){e.message="Thank you! You have been added to the event guest list!",e.success=!0},function(t){e.message=t.message||t.Message||t,e.success=!0})["finally"](function(){e.waiting=!1}))}}]).controller("LandingTicketCtrl",["$scope","$stateParams","dialogService","eventsService",function(e,t,i,n){var a=t.companyName,s=t.eventName,o=t.token;e["public"]=angular.isUndefined(o),e.event={},e["public"]?n.getPublicEventDetails("tickets",a,s).then(function(t){e.event=t},function(e){i.error(e.message)}):n.getPersonalEventDetails("tickets",o).then(function(t){e.event=t},function(e){i.error(e.message)}),e.displayErrorMessage=function(t){return e.showValidation||t.$touched&&t.$error.required}}]),angular.module("gliist").directive("guestListView",[function(){return{restrict:"EA",controller:"GuestListViewerCtrl",scope:{options:"=?",selected:"=?"},replace:!0,templateUrl:"app/guest-lists/templates/guest-list-viewer.html"}}]),angular.module("gliist").directive("guestListMange",[function(){return{restrict:"EA",controller:"GuestListCtrl",scope:{list:"=?",options:"=?"},replace:!0,templateUrl:"app/guest-lists/templates/guest-list-management.html"}}]),angular.module("gliist").directive("guestListInstanceView",[function(){return{restrict:"EA",controller:"GuestListInstanceViewerCtrl",scope:{event:"=?",lists:"=?",options:"=?",selected:"=?",published:"=?"},replace:!0,templateUrl:"app/guest-lists/templates/guest-list-instance-viewer.html"}}]),angular.module("gliist").directive("guestListInstanceEditor",[function(){return{restrict:"EA",controller:"GuestListInstanceEditorCtrl",scope:{id:"=",onSave:"=?",onBeforeSave:"=?"},replace:!0,templateUrl:"app/guest-lists/templates/guest-list-instance-editor.html"}}]),angular.module("gliist").directive("guestListEditor",[function(){return{restrict:"EA",scope:{list:"=",onSave:"=?",onBeforeSave:"=?"},controller:"GuestListEditorCtrl",replace:!0,templateUrl:"app/guest-lists/templates/guest-list-editor.tmpl.html"}}]),angular.module("gliist").controller("GuestListCtrl",["$scope",function(e){e.options={sorting:{active:!0},display:{tip:""}}}]),angular.module("gliist").controller("GuestListViewerCtrl",["$scope","guestFactory","dialogService","$mdDialog","$rootScope","$filter","permissionsService",function(e,t,i,n,a,s,o){e.selected=e.selected||[],e.options=e.options||{};var r={filter:{active:!0,placeholder:"Search Guest List or Creator",fields:["title","created_by"]}};angular.forEach(r,function(t,i){e.options[i]=angular.merge(t,e.options[i])}),e.options.gridOptions={columnDefs:[{field:"title",name:"Guest List",minWidth:200,allowCellFocus:!1},{field:"total",name:"Total",maxWidth:100,allowCellFocus:!1},{field:"listType",name:"Category",maxWidth:150,allowCellFocus:!1},{field:"created_on",name:"Date",maxWidth:150,allowCellFocus:!1},{field:"UpdatedOn",name:"Update",maxWidth:150,allowCellFocus:!1},{field:"created_by",name:"Created By",enableSorting:!1,maxWidth:150,allowCellFocus:!1}]},o.isRole("staff")||e.options.gridOptions.columnDefs.push({name:"",field:"id",enableSorting:!1,width:140,cellClass:"actions-col",allowCellFocus:!1,cellTemplate:'<div class="actions">     <md-button class="icon-btn" ui-sref="main.edit_glist({listId:row.entity.id})" ng-hide="grid.appScope.options.display.readOnly" aria-label="Edit guest list">         <md-tooltip md-direction="top">edit guest list</md-tooltip>         <ng-md-icon icon="mode_edit"></ng-md-icon>     </md-button>     <md-button class="icon-btn" ng-click="grid.appScope.options.methods.deleteGuest($event, row.entity.glist)" ng-hide="!grid.appScope.options.methods.isRemoval(row.entity.glist)" aria-label="Delete guest list">         <md-tooltip md-direction="top">delete guest list</md-tooltip>         <ng-md-icon icon="delete"></ng-md-icon>     </md-button>     <md-checkbox ng-checked="grid.appScope.options.methods.guestSelected(row.entity.glist)" ng-click="grid.appScope.options.methods.toggleSelected(row.entity.glist)" aria-label="Import" ng-show="grid.appScope.options.display.enableSelection"></md-checkbox></div>'}),e.options.methods={isRemoval:function(t){return e.options.display.readOnly?!1:o.isRole("promoter")&&t.created_by?t.created_by.UserName===a.currentUser.UserName:!0},guestSelected:function(t){return e.selected.indexOf(t)>-1},toggleSelected:function(t){var i=e.selected.indexOf(t);i>-1?e.selected.splice(i,1):e.selected.push(t)},deleteGuest:function(a,s){var o=n.confirm().title("Are you sure you want to delete guest list?").ariaLabel("Lucky day").ok("Yes").cancel("No").targetEvent(a);n.show(o).then(function(){t.GuestList["delete"]({id:s.id}).$promise.then(function(){e.getGuestLists()},function(){i.error("There was a problem please try again")})},function(){e.alert="You decided to keep your debt."})}},e.getGuestLists=function(){e.fetchingData=!0,t.GuestLists.get().$promise.then(function(t){e.guestLists=t,e.options.gridData.splice(0,e.options.gridData.length),angular.forEach(e.guestLists,function(t){e.options.gridData.push({id:t.id,title:t.title,total:t.total,listType:t.listType,created_on:s("date")(t.created_on,"MMM dd, yy"),UpdatedOn:s("date")(t.UpdatedOn,"MMM dd, yy"),created_by:t.created_by?t.created_by.firstName+" "+t.created_by.lastName:"",glist:t})})},function(){i.error("There was a problem getting lists, please try again")})["finally"](function(){e.fetchingData=!1})}}]),angular.module("gliist").controller("GuestListInstanceViewerCtrl",["$scope","eventsService","dialogService","$state","guestFactory","permissionsService",function(e,t,i,n,a,s){e.published=[],e.flexWidth=["30","20","none","10","none","10","none","10","10","5"],!e.options.stats&&!e.options.publish||e.options.readOnly||(e.flexWidth[0]="20",e.flexWidth[1]="15"),e.options.details||(e.flexWidth[6]="10"),e.options.readOnly&&(e.flexWidth[9]=""),e.isPromoter=function(){return s.isRole("promoter")},e.isPublished=function(t){return e.published.indexOf(t.id)>=0},e.isShowColumn=function(t){var i=!1;return angular.forEach(e.lists,function(e){return e[t]?void(i=!0):void 0}),i},e.editInstance=function(t,i){n.go("main.edit_gl_event",{gli:i.id,eventId:e.event.id})},e.deleteInstance=function(n,a){e.fetchingData=!0,t.deleteGuestList(a,e.event.id).then(function(t){e.lists=t},function(){i.error("There was a problem removing guest list, please try again")})["finally"](function(){e.fetchingData=!1})},e.togglePublished=function(t){var i=e.published.indexOf(t.id);-1===i?e.published.push(t.id):e.published.splice(i,1)},e.save=function(e){a.GuestListInstance.update(e)},e.onCapacityChanged=function(t){e.save(t)},e.getActualGuests=function(e){var t=0;return e&&angular.forEach(e.actual,function(e){"checked in"===e.status&&(t+=e.guest.plus+1-e.plus)}),t},e.getTotalGuests=function(e){var t=0;return e&&(t=e.guestsCount),t},e.getUnconfirmedGuests=function(t){var i=0;return 2===t.instanceType?(i=t.guestsCount,angular.forEach(t.actual,function(e){i-=e.plus+1})):i=e.getTotalGuests(t)-e.getActualGuests(t),i},e.getGrandTotalCapacity=function(){var t=0;return angular.forEach(e.lists,function(e){t+=e.capacity}),t},e.getGrandTotalGuests=function(){var t=0;return angular.forEach(e.lists,function(i){t+=e.getTotalGuests(i)}),t}}]),angular.module("gliist").controller("GuestListInstanceEditorCtrl",["$scope","guestFactory","dialogService","$state","eventsService","userService","$interval","$timeout","$mdDialog","uploaderService","guestListParserService","$stateParams","permissionsService",function(e,t,i,n,a,s,o,r,l,d,c,u,m){e.guestListTypes=["GA","VIP","Super VIP","Guest","Artist","Production","Comp","Press","All Access","Reduced"],e.defaultFields={firstName:"",lastName:"",email:"",notes:"",plus:0},e.options={filter:{active:!0,placeholder:"Search Guest",fields:["guest.firstName","guest.lastName"]},sorting:{active:!0},display:{totalMobileViewportItems:2,totalViewportItems:7,enableGridSelection:!0,enableEditCells:!0},gridOptions:{columnDefs:[{field:"guest.firstName",name:"First Name"},{field:"guest.lastName",name:"Last Name"},{field:"guest.email",name:"Email",enableSorting:!1},{field:"guest.notes",name:"Note",enableSorting:!1},{field:"guest.plus",name:"Plus",enableSorting:!1}]}},e.form={};
var p=parseInt(u.instanceType);e.options.methods={gridCellTab:function(t,i){9===t.keyCode&&i.uid===i.grid.columns[i.grid.columns.length-1].uid&&(e.addMore(),r(function(){e.gridApi.cellNav.scrollToFocus(e.gli.actual[e.gli.actual.length-1],e.options.gridOptions.columnDefs[0])},100))},onRegisterApi:function(t){e.gridApi=t;var i=function(){e.rowSelected=t.selection.getSelectedRows(),0===e.rowSelected.length&&(e.rowSelected=!1)};t.selection.on.rowSelectionChanged(e,i),t.selection.on.rowSelectionChangedBatch(e,i),t.edit.on.beginCellEdit(e,function(){e.cancelAutoSave()}),t.edit.on.afterCellEdit(e,function(t,i,n,a){n!==a?e.onDataChange():e.startAutoSave()}),t.edit.on.cancelCellEdit(e,function(){e.startAutoSave()})}},e.rowSelected=!1,e.isDirty=!1,e.$watchCollection("gli",function(t){t&&(e.options.gridData=e.gli.actual)}),e.$watch("id",function(a){a&&(e.loading=!0,t.GuestListInstance.get({id:e.id}).$promise.then(function(t){e.gli=t,p=t.instanceType,2===e.gli.instanceType&&e.options.gridOptions.columnDefs.splice(4),s.getUsersByRole("promoter").then(function(t){e.promoters=[{Id:0,firstName:"None",lastName:""}],e.promoters=e.promoters.concat(t),e.loading=!1},function(){i.error("Oops there was a problem loading promoter users, please try again")})},function(){i.error("There was a problem getting your events, please try again"),n.go("main.current_events")})["finally"](function(){e.loading=!1}))}),e.isPromoter=function(){return m.isRole("promoter")},e.startAutoSave=function(){e.isDirty!==!1&&(e.autoSave=r(function(){e.guestsError()||e.fetchingData||e.save(!0)},7e3))},e.cancelAutoSave=function(){e.autoSave&&(r.cancel(e.autoSave),delete e.autoSave)},e.addMore=function(){e.gli||(e.gli={}),e.gli.actual||(e.gli.actual=[]),e.gli.actual.push({gl_id:e.gli.id,status:"no show",guest:angular.extend({},e.defaultFields)})},e.deleteSelectedRows=function(){if(e.rowSelected){e.fetchingData=!0,e.cancelAutoSave();var t=[];angular.forEach(e.rowSelected,function(i){if(i.guest.id)t.push(i.guest.id);else{var n=e.gli.actual.indexOf(i);n>-1&&e.gli.actual.splice(n,1)}}),t.length>0?a.removeGuestsFromGLInstance(e.gli.id,t).then(function(t){e.gli=t})["finally"](function(){e.fetchingData=!1}):e.fetchingData=!1,e.rowSelected=!1}},e.save=function(n){e.cancelAutoSave();var a=[];if(!e.form.createGuestListForm.$valid){var s={required:{title:"Please Enter Guest List Title",listType:"Please Select Guest Type"}};angular.forEach(e.form.createGuestListForm.$error.required,function(e){a.push(s.required[e.$name])})}if(e.guestsError()&&a.push(2===p||4===p?"Email must be not empty.":"First Name must be not empty."),a.length>0)return void(n||i.error(a.join(", ")));if(!e.onBeforeSave||e.onBeforeSave(e.gli,!n)){e.fetchingData=!0,e.gli.listType||(e.gli.listType="GA");var o={};angular.copy(e.gli,o),t.GuestListInstance.update(o).$promise.then(function(t){if(n){e.gli.id=t.id;var a=[],s=[];angular.forEach(e.gli.actual,function(e){e.guest.id&&a.push(e.guest.id)}),angular.forEach(t.actual,function(e){-1===a.indexOf(e.guest.id)&&s.push(e)}),angular.forEach(e.gli.actual,function(t,i){t.guest.id||angular.forEach(s,function(n,a){return t.guest.firstName===n.guest.firstName&&t.guest.lastName===n.guest.lastName&&t.guest.email===n.guest.email?(e.gli.actual[i].id=n.id,e.gli.actual[i].guest.id=n.guest.id,void delete s[a]):void 0})})}else e.gli=t;var o="Guest list saved";n&&(o="Guest list autosaved"),i.success(o),e.isDirty=!1,e.onSave&&!n&&e.onSave(t)},function(e){var t=e.data.Message||"There was a problem saving your guest list, please try again";i.error(t)})["finally"](function(){e.fetchingData=!1})}},e.guestsError=function(){var t=!1;if(!e.gli)return t;var i=e.gli.actual.length,n="firstName";(2===p||4===p)&&(n="email");for(var a=0;i>a;a++)if(""===e.gli.actual[a].guest[n])return!0;return t},e.onLinkClicked=function(t){var n=e.$new();n.cancel=function(){l.hide()},n.selected=[],n.options={display:{enableSelection:!0,readOnly:!0,verticalScroll:!1}},n.importGLists=function(){e.gli=e.gli||{title:"New Guest List"},e.gli.guests=e.gli.guests||[],a.importGuestsToGLInstance(e.gli.id,n.selected,e.gli).then(function(t){return t?(e.gli.actual=t.actual,void e.onDataChange()):i.error("There was a problem linking your guest list, please try again")},function(){i.error("There was a problem linking your guest list, please try again")})["finally"](function(){l.hide()})},l.show({scope:n,templateUrl:"app/guest-lists/templates/glist-import-dialog.html",targetEvent:t})},e.onAddGuestsClicked=function(){if(e.textGuestList){var t=c.parse(e.textGuestList);if(null===t)return i.error("No guests found in the list");if("string"==typeof t)return i.error(t);e.gli||(e.gli={}),e.gli.actual||(e.gli.actual=[]);for(var n=t.length,a=0;n>a;a++)e.gli.actual.push({gl_id:e.gli.id,status:"no show",guest:t[a]});e.isDirty=!0,i.success("Guests were added successfully"),e.onDataChange(),e.textGuestList=""}},e.onFileSelect=function(n){if(n&&0!==n.length){if(e.gli){var a=angular.copy(e.gli,{});return e.cancelAutoSave(),e.fetchingData=!0,void t.GuestListInstance.update(a).$promise.then(function(t){e.gli=t,e.upload(n[0],e.gli.id)},function(){e.fetchingData=!1,i.error("There was a problem saving your guest list, please try again")})}e.upload(n[0])}},e.onDataChange=function(){e.isDirty=!0,e.startAutoSave()},e.upload=function(t,n){e.fetchingData=!0,d.uploadGuestListInstance(t,n).then(function(t){e.gli=t},function(){i.error("There was a problem saving your guest list please try again")})["finally"](function(){e.fetchingData=!1})}}]),angular.module("gliist").controller("GuestListEditorCtrl",["$scope","guestFactory","dialogService","$mdDialog","uploaderService","eventsService","$state","$stateParams","userService","$interval","$timeout","guestListParserService","permissionsService",function(e,t,i,n,a,s,o,r,l,d,c,u,m){e.guestListTypes=["GA","VIP","Super VIP","Guest","Artist","Production","Comp","Press","All Access","Reduced"],e.defaultFields={firstName:"",lastName:"",email:"",notes:"",plus:0},e.options={filter:{active:!0,placeholder:"Search Guest",fields:["firstName","lastName"]},sorting:{active:!0},display:{totalMobileViewportItems:2,totalViewportItems:7,enableGridSelection:!0,enableEditCells:!0},gridOptions:{columnDefs:[{field:"firstName",name:"First Name"},{field:"lastName",name:"Last Name"},{field:"email",name:"Email",enableSorting:!1},{field:"notes",name:"Note",enableSorting:!1}]}},e.form={};var p=parseInt(r.instanceType);p||e.guestListTypes.splice(8,0,"RSVP"),2!==p&&e.options.gridOptions.columnDefs.push({field:"plus",name:"Plus",width:"90",enableSorting:!1}),1!==p&&p>0&&(e.guestListTypes=["RSVP"],e.list=e.list||{listType:"RSVP"}),e.options.methods={gridCellTab:function(t,i){9===t.keyCode&&i.uid===i.grid.columns[i.grid.columns.length-1].uid&&(e.addMore(),c(function(){e.gridApi.cellNav.scrollToFocus(e.list.guests[e.list.guests.length-1],e.options.gridOptions.columnDefs[0])},100))},onRegisterApi:function(t){e.gridApi=t;var i=function(){e.rowSelected=t.selection.getSelectedRows(),0===e.rowSelected.length&&(e.rowSelected=!1)};t.selection.on.rowSelectionChanged(e,i),t.selection.on.rowSelectionChangedBatch(e,i),t.edit.on.beginCellEdit(e,function(){e.cancelAutoSave()}),t.edit.on.afterCellEdit(e,function(t,i,n,a){n!==a?e.onDataChange():e.startAutoSave()}),t.edit.on.cancelCellEdit(e,function(){e.startAutoSave()})}},e.rowSelected=!1,e.isDirty=!1,e.$watch("list.listType",function(t,i){e.list&&e.list.id&&t&&i&&t!==i&&(e.glTypeChanged=!0)}),e.$watchCollection("list.guests",function(t){t&&(e.options.gridData=e.list.guests)}),e.isPromoter=function(){return m.isRole("promoter")},e.startAutoSave=function(){e.isDirty!==!1&&(e.autoSave=c(function(){e.guestsError()||e.fetchingData||e.save(!0)},7e3))},e.cancelAutoSave=function(){e.autoSave&&(c.cancel(e.autoSave),delete e.autoSave)},e.addMore=function(){e.list||(e.list={}),e.list.guests||(e.list.guests=[]),e.list.guests.push(angular.extend({},e.defaultFields))},e.deleteSelectedRows=function(){if(e.rowSelected){e.fetchingData=!0,e.cancelAutoSave();var t=[];angular.forEach(e.rowSelected,function(i){if(i.id&&e.list.id)t.push(i.id);else{var n=e.list.guests.indexOf(i);n>-1&&e.list.guests.splice(n,1)}}),t.length>0?s.removeGuestsFromGL(e.list.id,t).then(function(t){e.list=t})["finally"](function(){e.fetchingData=!1}):e.fetchingData=!1,e.rowSelected=!1}},e.save=function(n){e.cancelAutoSave();var a=[];if(!e.form.createGuestListForm.$valid){var s={required:{title:"Please Enter Guest List Title",listType:"Please Select Guest Type"}};angular.forEach(e.form.createGuestListForm.$error.required,function(e){a.push(s.required[e.$name])})}if(e.guestsError()&&a.push(2===p||4===p||"RSVP"===e.list.listType?"Email must be not empty.":"First Name must be not empty."),a.length>0)return void(n||i.error(a.join(", ")));if(!e.onBeforeSave||e.onBeforeSave(e.list,!n)){e.fetchingData=!0,e.list.listType||(e.list.listType="GA");var r={};angular.copy(e.list,r),t.GuestList.update(r).$promise.then(function(t){if(n){e.list.id=t.id;var a=[],s=[];angular.forEach(e.list.guests,function(e){e.id&&a.push(e.id)}),angular.forEach(t.guests,function(e){-1===a.indexOf(e.id)&&s.push(e)}),angular.forEach(e.list.guests,function(t,i){t.id||angular.forEach(s,function(n,a){return t.firstName===n.firstName&&t.lastName===n.lastName&&t.email===n.email?(e.list.guests[i].id=n.id,void delete s[a]):void 0})})}else e.list=t;var r="Guest list saved";n&&(r="Guest list autosaved"),i.success(r),e.isDirty=!1,n||(e.onSave?e.onSave(t):o.go("main.edit_glist",{listId:t.id}))},function(){i.error("There was a problem saving your guest list, please try again")})["finally"](function(){e.fetchingData=!1})}},e.guestsError=function(){var t=!1;if(!e.list||!e.list.guests)return t;var i=e.list.guests.length,n="firstName";(2===p||4===p||"RSVP"===e.list.listType)&&(n="email");for(var a=0;i>a;a++)if(""===e.list.guests[a][n])return!0;return t},e.onFileSelect=function(n){return n&&0!==n.length?e.list?(e.cancelAutoSave(),e.fetchingData=!0,void t.GuestList.update(e.list).$promise.then(function(t){e.list=t,e.upload(n[0],e.list.id)},function(){i.error("There was a problem saving your guest list, please try again")})["finally"](function(){e.fetchingData=!1})):void e.upload(n[0]):void 0},e.upload=function(t,n){e.fetchingData=!0,a.uploadGuestList(t,n).then(function(t){e.list=t},function(){i.error("There was a problem saving your guest list please try again")})["finally"](function(){e.fetchingData=!1})},e.onLinkClicked=function(t){var a=e.$new();a.cancel=function(){n.hide()},a.selected=[],a.options={display:{enableSelection:!0,readOnly:!0,verticalScroll:!1}},a.importGLists=function(){e.list=e.list||{title:"New Guest List"},e.list.guests=e.list.guests||[],s.importGuestList(e.list.id,a.selected,e.list).then(function(t){return t?(e.list.guests=t.guests,void e.onDataChange()):i.error("There was a problem linking your guest list, please try again")},function(){i.error("There was a problem linking your guest list, please try again")})["finally"](function(){n.hide()})},n.show({scope:a,templateUrl:"app/guest-lists/templates/glist-import-dialog.html",targetEvent:t})},e.onAddGuestsClicked=function(){if(e.textGuestList){var t=u.parse(e.textGuestList);if(null===t)return i.error("No guests found in the list");if("string"==typeof t)return i.error(t);e.list||(e.list={}),e.list.guests||(e.list.guests=[]);for(var n=t.length,a=0;n>a;a++)e.list.guests.push(t[a]);i.success("Guests were added successfully"),e.onDataChange(),e.textGuestList=""}},e.onDataChange=function(){e.isDirty=!0,e.startAutoSave()},e.init=function(){e.loading=!0,l.getUsersByRole("promoter").then(function(t){e.promoters=[{Id:0,firstName:"None",lastName:""}],e.promoters=e.promoters.concat(t),e.loading=!1},function(){i.error("Oops there was a problem loading promoter users, please try again")})},e.init()}]),angular.module("gliist").controller("EditGuestListCtrl",["$scope","$stateParams","guestFactory","dialogService","$state",function(e,t,i,n,a){var s=t.listId;e.fetchingData=!0,i.GuestList.get({id:s}).$promise.then(function(t){e.list=t},function(){a.go("main.list_management"),n.error("There was a problem reading guest list, please try again")})["finally"](function(){e.fetchingData=!1})}]),angular.module("gliist").controller("CheckGuestCtrl",["$scope","$stateParams","guestFactory","dialogService","eventsService","$state","$window",function(e,t,i,n,a,s,o){e.maxGuests=0,e.notCheckInGuests=0,e.checkInGuests=0,e.guestChecked=!1;var r=function(t){e.guestCheckin=t,e.initVars()},l=function(e){var t=e.Message||"Oops there was a problem getting guest, please try again";n.error(t)};e.subtractGuestCount=function(){e.guestCheckin.plus=e.guestCheckin.plus<=1?1:e.guestCheckin.plus-1},e.addGuestCount=function(){e.guestCheckin.plus=e.guestCheckin.plus>=e.notCheckInGuests?e.notCheckInGuests:e.guestCheckin.plus+1},e.back=function(){o.history.back()},e.checkIn=function(){e.checkingGuest=!0,e.guestChecked||e.guestCheckin.plus--,a.postGuestCheckin(e.guestCheckin,e.guestListInstance).then(r,l)["finally"](function(){e.checkingGuest=!1})},e.undoCheckIn=function(){e.checkingGuest=!0,a.postGuestUndoCheckin(e.guestCheckin,e.guestListInstance).then(r,l)["finally"](function(){e.checkingGuest=!1})},e.updateNotes=function(){e.checkingGuest=!0,a.updateGuestNotes(e.guestCheckin.guest.id,e.guestCheckin.guest.notes).then(function(){},l)["finally"](function(){e.checkingGuest=!1})},e.initVars=function(){e.maxGuests=e.guestCheckin.guest.plus+1,e.guestChecked="checked in"===e.guestCheckin.status,e.notCheckInGuests=e.guestCheckin.plus+!e.guestChecked,e.checkInGuests=e.maxGuests-e.notCheckInGuests,e.guestChecked||e.guestCheckin.plus++},e.init=function(){var i=t.guestId,o=t.gliId;return i&&o?(e.fetchingData=!0,void a.getGuestCheckin(i,o).then(function(t){e.guestCheckin=t.checkin,e.initVars(),e.guestListInstance=t.gl_instance},function(){n.error("Oops there was a problem getting guest, please try again")})["finally"](function(){e.fetchingData=!1})):void s.go("main.welcome")}}]),angular.module("gliist").directive("eventPublish",[function(){return{restrict:"EA",scope:{eventId:"=",options:"=?"},controller:"EventPublishCtrl",replace:!0,templateUrl:"app/events/templates/event-publish.html"}}]),angular.module("gliist").directive("eventPreview",[function(){return{restrict:"EA",scope:{event:"="},controller:"EventPreviewController",replace:!0,templateUrl:"app/events/templates/event-preview.html"}}]),angular.module("gliist").directive("eventList",[function(){return{restrict:"EA",scope:{events:"=",options:"=?"},controller:"EventsListCtrl",replace:!0,templateUrl:"app/events/templates/event-list.tmpl.html"}}]),angular.module("gliist").directive("eventDetails",[function(){return{restrict:"EA",scope:{event:"="},controller:"EventDetailsController",replace:!0,templateUrl:"app/events/templates/event-details.tmpl.html"}}]),angular.module("gliist").controller("EventsStatsCtrl",["$scope","eventsService","dialogService","$stateParams","$state","$window","$mdMedia","EnvironmentConfig",function(e,t,i,n,a,s,o,r){e.categories=[{name:"GA",color:"#d4e4f9"},{name:"VIP",color:"#cef0f2"},{name:"Super VIP",color:"#cfefdc"},{name:"Guest",color:"#f7f9c3"},{name:"Artist",color:"#ffd8b4"},{name:"Production",color:"#ead5e1"},{name:"Comp",color:"#f3d4f9"},{name:"All Access",color:"#c9badb"},{name:"Press",color:"#e0e0e0"},{name:"RSVP",color:"#ffd8b4"},{name:"Reduced",color:"#f9e6e2"},{name:"Walk up",color:"#bbe4f9"},{name:"On the spot",color:"#f0f6fb"}],e.rsvp=[{name:"Invited",color:"#cef0f2",total:0},{name:"RSVP'd",color:"#f7f9c3",total:0},{name:"RSVP checked in",color:"#ffd8b4",total:0}],e.rsvpTotalVisitors=0,e.Math=s.Math,e.gliOptions={readOnly:!0,stats:!0},e.stats={},e.totalCheckedIn=0,e.eventType=1,e.table1Visible=o("gt-sm"),e.table2Visible=o("gt-sm"),e.$watch(function(){return!o("gt-sm")},function(t){e.isMobile=t}),e.calculateStats=function(){if(e.event){var i="";angular.forEach(e.event.guestLists,function(t){i=t.listType.toLowerCase(),e.stats[i]||(e.stats[i]={totalCheckedIn:0,total:0}),("rsvp"!==i||4===t.instanceType)&&(angular.forEach(t.actual,function(t){"checked in"===t.status&&(e.stats[i].totalCheckedIn+=t.guest.plus+1-t.plus)}),e.stats[i].total+=t.guestsCount,e.totalCheckedIn+=e.stats[i].totalCheckedIn),e.isRSVP()&&(2===t.instanceType&&t.published&&(e.rsvp[0].total+=t.guestsCount,angular.forEach(t.actual,function(t){e.rsvp[1].total+=t.plus+1}),e.rsvp[2].total=e.stats[i].totalCheckedIn),4===t.instanceType&&(e.rsvp[1].total+=t.guestsCount,e.rsvp[2].total=e.stats[i].totalCheckedIn))}),t.getRSVPVisitors(e.event.id).then(function(t){e.rsvpTotalVisitors=t}),e.updateChart()}},e.isRSVP=function(){return 2===e.eventType},e.getExportExcelUrl=function(){return r.gjests_api+"api/reports/exportrsvp/"+e.event.id+"?authToken="+s.localStorage.access_token},e.getCategoryStats=function(t){return e.stats[t.toLowerCase()]||{totalCheckedIn:0,total:0}},e.updateChart=function(){if(e.chartObject={type:"PieChart",options:{titlePosition:"none",legend:"none",colors:e.categories.map(function(e){return e.color}),chartArea:{left:0,top:"5%",width:"100%",height:"90%"},pieSliceText:"label"},data:{cols:[{id:"t",label:"Topping",type:"string"},{id:"s",label:"Slices",type:"number"}],rows:[]}},angular.forEach(e.categories,function(t){e.chartObject.data.rows.push({c:[{v:t.name},{v:e.getCategoryStats(t.name).totalCheckedIn}]})}),e.isRSVP()){var t=angular.copy(e.rsvp);t.sort(function(e,t){return e.total>t.total?1:e.total<t.total?-1:void 0});var i=[""],n=[""];t.forEach(function(e,t,a){i.push(e.name),i.push({role:"tooltip"}),n.push(t>0?a[t].total-a[t-1].total:e.total),n.push(e.name+": "+e.total)}),e.chartObjectRSVP={type:"ColumnChart",options:{legend:"none",colors:t.map(function(e){return e.color}),chartArea:{left:"5%",top:"5%",width:"100%",height:"90%"},bar:{groupWidth:"20%"},isStacked:!0,vAxis:{gridlines:{count:3},viewWindow:{max:t[e.rsvp.length-1].total}}},data:[i,n]}}},e.init=function(){var s=n.eventId;e.initializing=!0,t.getEvents(s).then(function(t){e.event=t,e.eventType=e.event.type,e.calculateStats()},function(){i.error("There was a problem getting your events, please try again"),a.go("main.current_events")})["finally"](function(){e.initializing=!1})}}]),angular.module("gliist").controller("EventsCtrl",[function(){}]),angular.module("gliist").controller("EventsListCtrl",["$scope","$mdDialog","eventsService","dialogService","$state",function(e,t,i,n,a){e.options=e.options||{};var s={filter:{active:!1}};angular.forEach(s,function(t,i){e.options[i]=angular.merge(t,e.options[i])}),e.orderField=e.options.stats?"-time":"",e.filter={value:""},e.getEventInvite=function(e){return{"background-image":'url("'+e.invitePicture+'")',"background-position":"center center","min-width":"200px",height:"185px","background-size":"cover"}},e.showUpgradePopup=function(e){n.confirm(e,"Do you want to activate this event?","Yes","","close-x border").then(function(){a.go("main.user",{view:2})})},e.deleteEvent=function(a,s){var o=t.confirm().title("Are you sure you want to delete event?").ariaLabel("Lucky day").ok("Yes").cancel("No").targetEvent(a);t.show(o).then(function(){i.deleteEvent(s.id).then(function(){e.refreshEvents()},function(){n.error("There was a problem please try again")})},function(){e.alert="You decided to keep your debt."})},e.refreshEvents=function(){if(!e.options||!e.options.local){e.fetchingData=!0;var t;t=e.options&&e.options.past?i.getPastEvents():i.getCurrentEvents(),t.then(function(t){e.events=t},function(){})["finally"](function(){e.fetchingData=!1})}},e.init=function(){e.refreshEvents()},e.init()}]),angular.module("gliist").controller("EventSummaryCtrl",["$scope","$stateParams",function(e,t){e.init=function(){e.eventId=t.eventId}}]),angular.module("gliist").controller("EventPublishCtrl",["$scope","dialogService","$state","eventsService","permissionsService",function(e,t,i,n,a){e.toPublish=[],e.publishEvent=function(s){t.confirm(s,"Are you sure you want to send<br><b>confirmation emails/RSVP invitations</b><br>to the selected guest lists?","Yes","No").then(function(){n.publishEvent(e.toPublish,e.event.id).then(function(){a.isRole("promoter")?t.success("Guest list has been published"):i.go("main.email_stats",{eventId:e.event.id})},function(e){t.error(e)})})},e.checkGuestLists=function(i){var a=[];angular.forEach(e.event.guestLists,function(t){e.toPublish.indexOf(t.id)>=0&&2===t.instanceType&&a.push(t.id)}),a.length>0?n.checkGuestsEmailBeforePublishing({ids:a,eventId:e.event.id}).then(function(n){n.Warnings&&n.Warnings.length>0?t.error("Some guests email address are missing, please provide that"):e.publishEvent(i)},function(e){e.Message&&t.error(e.Message)}):e.publishEvent(i)},e.editEvent=function(){i.go("main.edit_event",{eventId:e.event.id})},e.getEventInvite=function(t){return{"background-image":'url("'+e.event.invitePicture+'")',"background-position":"center center",height:t||"250px","background-repeat":"no-repeat","background-size":"contain"}},e.glOptions={readOnly:!0,publish:!0},e.event={id:0},e.init=function(){var a=e.eventId;e.initializing=!0,e.currentEvents=n.getEvents(a).then(function(t){e.event=t,e.chips={tags:[e.event.category],readonly:!0}},function(){t.error("There was a problem getting your events, please try again"),i.go("main.current_events")})["finally"](function(){e.initializing=!1})},e.init()}]),angular.module("gliist").controller("EventPreviewController",["$scope",function(e){e.getEventInvite=function(t){return e.event?{"background-image":'url("'+e.event.invitePicture+'")',"background-position":"center center",height:t||"250px","background-repeat":"no-repeat","background-size":"contain"}:void 0}}]),angular.module("gliist").controller("EventDetailsController",["$scope","$mdDialog","eventsService","dialogService","uploaderService","$location","$filter","subscriptionsService","permissionsService",function(e,t,i,n,a,s,o,r,l){e.eventCategories=["Art","Fashion","Music","Charity","Technology","Gaming","Sports","Food and wine","Films","Celebration","School","Others"],e.selectedIndex=parseInt(s.search().view)||0,e.dateOptions={startingDay:1,showWeeks:!1},e.minuteStep=15,e.utcOffset=0,e.dt={startEventDateTime:new Date(Date.now()),endEventDateTime:new Date(Date.now()+864e5),endEventRsvpDateTime:new Date(Date.now()+864e5)},e.eventStarted=!1,e.eventFinished=!1,e.minDate=Date.now(),e.endMinDate=function(){return e.dt.startEventDateTime.getTime()},e.endMaxDate=function(){return e.dt.endEventDateTime.getTime()},e.maxTicketDate=function(){return e.dt.startEventDateTime.getTime()-108e5},e.previewOptions={hideEdit:!0},e.location={value:"",formatted:""},e.tickets=[],e.gliOptions={showSummary:!0,details:!0},e.$watch("selectedIndex",function(e){s.search("view",e)}),e.$watch("location.details",function(t){t&&t.geometry&&($.ajax({url:"https://maps.googleapis.com/maps/api/timezone/json?location="+t.geometry.location.lat()+","+t.geometry.location.lng()+"&timestamp="+Math.round(Date.now()/1e3).toString()+"&sensor=false"}).done(function(t){e.utcOffset=t.dstOffset+t.rawOffset}),e.location.formatted=t.adr_address.indexOf(t.name)+1?t.adr_address:'<span class="venue-name">'+t.name+", </span>"+t.adr_address)}),e.$watch("dt.endEventDateTime",function(t){t.getTime()<e.dt.endEventRsvpDateTime.getTime()&&e.dt.endEventRsvpDateTime.setTime(t.getTime())}),e.isPromoter=function(){return l.isRole("promoter")},e.subscriptionRestrictions=function(e,t,i,n){return!r.verifyFeature(e,t,i,n)},e.getSelected=function(t){return e.selectedIndex===t},e.getEventInvite=function(t){return{"background-image":'url("'+e.event.invitePicture+'")',"background-position":"center center",height:t||"250px","background-repeat":"no-repeat","background-size":"contain"}},e.onInviteSelected=function(t){t&&0!==t.length&&e.upload(t[0])},e.upload=function(t){e.fetchingData=!0,a.uploadEventInvite(t,e.event.id).then(function(t){e.event.invitePicture=t,n.success("Invite saved")},function(){n.error("There was a problem saving your image please try again")})["finally"](function(){e.fetchingData=!1})},e.onAddGLClicked=function(a,s){var o=e.$new();o.cancel=function(){t.hide()},o.selected=[],o.options={display:{enableSelection:!0,readOnly:!0,verticalScroll:!1}},o.importGLists=function(a){e.subscriptionRestrictions("Guests",e.getTotalGuests(o.selected)+e.getTotalGuests(e.event.guestLists),a,"You are only allowed {value} guests, Would you like to upgrade to unlimited?")||i.linkGuestList(o.selected,e.event.id,s).then(function(i){e.event.guestLists=i,n.success("Guest lists were linked"),t.hide()},function(){n.error("There was a problem linking, please try again")})},t.show({scope:o,templateUrl:"app/guest-lists/templates/glist-import-dialog.html",targetEvent:a})},e.timeValid=function(){e.startEventTimeInvalid=!1,e.endEventTimeInvalid=!1,e.maxStartEventTimeInvalid=!1,e.startRangeDays=r.getFeatureValue("EventStartRangeDays")||45,e.dt.endEventRsvpDateTime.getTime()>e.dt.endEventDateTime.getTime()&&e.dt.endEventRsvpDateTime.setTime(e.dt.endEventDateTime.getTime());var t=new Date(Date.now()),i=new Date(t.getTime()+60*t.getTimezoneOffset()*1e3+1e3*e.utcOffset),n=i.valueOf()+24*e.startRangeDays*60*60*1e3;return e.dt.startEventDateTime.getTime()<i.valueOf()&&(e.startEventTimeInvalid=!0),e.dt.startEventDateTime.getTime()>n&&(e.maxStartEventTimeInvalid=!0),e.dt.startEventDateTime.getTime()>e.dt.endEventDateTime.getTime()&&(e.endEventTimeInvalid=!0),e.startEventTimeInvalid||e.endEventTimeInvalid||e.maxStartEventTimeInvalid?!1:!0},e.next=function(t,a){if(!t||!t.pointer||"m"!==t.pointer.type){if(-1!==[0,1,3].indexOf(e.selectedIndex)){if(e.subscriptionRestrictions("Guests",e.getTotalGuests(e.event.guestLists),t,"You are only allowed {value} guests, Would you like to upgrade to unlimited?"))return;if(e.subscriptionRestrictions("EventDurationDays",(e.dt.endEventDateTime.getTime()-e.dt.startEventDateTime.getTime())/1e3/60/60/24,{},"You can only create event that lasts up to {value} days."))return;var s=[];if(a&&a.$invalid){var o={required:{title:"Please Enter Event Title",category:"Please Select Event Category",capacity:"Please Enter Event Capacity"},pattern:{title:"Event Title can only contain alphabets, digits and spaces"},number:{capacity:"Please enter numbers only"}};angular.forEach(a.$error,function(e,t){o[t]&&angular.forEach(e,function(e){o[t][e.$name]&&s.push(o[t][e.$name])})})}return e.timeValid()||(e.eventFinished&&s.push("Cant Update Event. Event has been finished"),e.startEventTimeInvalid&&!e.eventStarted&&s.push("Cant Create Event in the Past"),e.endEventTimeInvalid&&s.push("End time has to be after start time"),e.maxStartEventTimeInvalid&&s.push("You can only create event up to "+e.startRangeDays+" days in advance")),e.location.details||s.push("Please enter the city of the event or event location"),3!==e.event.type||e.isHasOneTicket()||s.push("Please specify at least one ticket tier"),s.length>0?void n.error(s.join(", ")):(e.savingEvent=!0,e.event.location=e.location.formatted,e.event.time=e.convertDateTime(e.dt.startEventDateTime),e.event.endTime=e.convertDateTime(e.dt.endEventDateTime),e.event.rsvpEndDate=e.convertDateTime(e.dt.endEventRsvpDateTime),void i.createEvent(e.event).then(function(t){e.event.id=t.id,e.selectedIndex=Math.min(e.selectedIndex+1,4),e.event.invitePicture=t.invitePicture,e.event.rsvpUrl=t.rsvpUrl,e.event.ticketingUrl=t.ticketingUrl,e.event.facebookPageUrl=t.facebookPageUrl,e.event.instagrammPageUrl=t.instagrammPageUrl,e.event.twitterPageUrl=t.twitterPageUrl,n.success("Event "+t.title+" saved")},function(){n.error("There was a problem saving your event, please try again")})["finally"](function(){e.savingEvent=!1}))}e.selectedIndex=Math.min(e.selectedIndex+1,4)}},e.previous=function(t){(t&&"t"===t.pointer.type||angular.isUndefined(t))&&(e.selectedIndex=Math.max(e.selectedIndex-1,0))},e.convertDateTime=function(t){var i=new Date(t.getTime()-60*t.getTimezoneOffset()*1e3),n=i.toISOString().replace(/\..+$/,""),a=new Date(1e3*Math.abs(e.utcOffset));return n+(e.utcOffset<0?"-":"+")+("0"+a.getUTCHours()).slice(-2)+":"+("0"+a.getUTCMinutes()).slice(-2)},e.clearLocation=function(){delete e.location.details},e.getTotalGuests=function(e){var t=0;return angular.forEach(e,function(e){angular.isDefined(e.guestsCount)?t+=e.guestsCount:angular.isDefined(e.total)&&(t+=e.total)}),t},e.init=function(){if(l.isRole("promoter")&&3!==e.selectedIndex&&4!==e.selectedIndex&&(e.selectedIndex=3),e.event){e.location.details={},e.location.formatted=e.event.location,e.location.value=e.location.formatted.replace(/<[^>]+>/gm,"");var t=e.event.time.split(/[^0-9]/);return e.utcOffset=e.event.time.substr(19,1)+(60*t[6]*60+60*t[7]),e.dt.startEventDateTime=o("ignoreTimeZone")(e.event.time),e.dt.endEventDateTime=o("ignoreTimeZone")(e.event.endTime),e.dt.endEventRsvpDateTime=o("ignoreTimeZone")(e.event.rsvpEndDate),e.dt.startEventDateTime<Date.now()&&(e.eventStarted=!0),e.dt.endEventDateTime<Date.now()&&(e.eventFinished=!0),void(3===e.event.type&&e.getTickets(e.event.id))}e.event={title:"",guestLists:[],time:"",endTime:"",type:1,rsvpType:3,additionalGuests:0,isRsvpCapacityLimited:!1,rsvpEndDate:""}}}]),angular.module("gliist").controller("EventCheckinCtrl",["$scope","$stateParams","dialogService","$state","eventsService","$filter","$window","EnvironmentConfig",function(e,t,i,n,a,s,o,r){e.event={id:0},e.options={filter:{active:!0,placeholder:"Search Guest",fields:["firstName","lastName"]},sorting:{active:!0},display:{totalViewportItems:7},gridOptions:{columnDefs:[{field:"firstName",name:"First Name",allowCellFocus:!1},{field:"lastName",name:"Last Name",allowCellFocus:!1},{field:"title",name:"List Title",allowCellFocus:!1},{field:"type",name:"Type",width:80,allowCellFocus:!1},{field:"email",name:"Email",allowCellFocus:!1},{field:"plus",name:"Plus",width:80,allowCellFocus:!1},{name:"Check in",field:"id",enableSorting:!1,width:90,allowCellFocus:!1,cellTemplate:'<div class="actions" title="Checkin"><md-button class="icon-btn" md-no-ink="\'true\'" ng-click="grid.appScope.options.methods.checkinGuest(row.entity)" aria-label="CheckIn"><md-icon ng-show="row.entity.status == \'checked in\'" md-svg-src="assets/images/SVG/checkWhite.svg"></md-icon><md-icon ng-show="grid.appScope.options.methods.guestPending(row.entity)" md-svg-src="assets/images/SVG/checklist.svg"></md-icon></md-button></div>'}]},gridData:[]},e.options.methods={onRegisterApi:function(t){e.gridApi=t,t.grid.registerRowsProcessor(e.customFilter,150)},guestPending:function(e){return"no show"===e.status},checkinGuest:function(e){n.go("main.check_guest",{guestId:e.id,gliId:e.gliId})}},e.getExportExcelUrl=function(){return r.gjests_api+"api/Event/GuestsListsExcelFile/"+e.event.id+"?authToken="+o.localStorage.access_token},e.filter={status:"pending"},e.customFilter=function(t){return t.forEach(function(t){t.visible=!1,"checked"!==e.filter.status||e.options.methods.guestPending(t.entity)||(t.visible=!0),"pending"===e.filter.status&&e.options.methods.guestPending(t.entity)&&(t.visible=!0)}),t},e.$watchCollection("filter",function(t){t&&e.gridApi&&e.gridApi.grid.refresh()}),e.pastEvent=function(){var t=s("ignoreTimeZone")(e.event.endTime).getTime()+864e5;return Date.now()>t?!0:!1},e.init=function(){var s=t.eventId;e.initializing=!0,a.getEvents(s).then(function(t){e.event=t,e.pastEvent()&&e.options.gridOptions.columnDefs.pop(),angular.forEach(e.event.guestLists,function(t){angular.forEach(t.actual,function(i){i.guest.type||(i.guest.type=t.listType),i.guest.title||(i.guest.title=t.title),e.options.gridData.push({firstName:i.guest.firstName,lastName:i.guest.lastName,title:i.guest.title,type:i.guest.type,email:i.guest.email,plus:"checked in"===i.status?i.guest.plus-i.plus:i.guest.plus,id:i.guest.id,status:i.status,gliId:i.gl_id})})})},function(){i.error("There was a problem getting your events, please try again"),n.go("main.current_events")})["finally"](function(){e.initializing=!1})},e.init()}]),angular.module("gliist").controller("EmailStatsController",["$scope","eventsService","dialogService","$state","$stateParams","$location",function(e,t,i,n,a,s){e.selectedIndex=parseInt(s.search().view)||0,e.selected=[],e.options=e.options||{},e.options={filter:{active:!0,placeholder:"Search Guest",fields:["name","status","email"]},sorting:{active:!0},display:{totalMobileViewportItems:2,totalViewportItems:6},gridOptions:{columnDefs:[{field:"status",name:"Status",cellTemplate:'<div class="ui-grid-cell-contents status-{{row.entity.deliveryStatus}}" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'},{field:"name",name:"Name"},{field:"email",name:"Email",cellTemplate:'<div class="ui-grid-cell-contents" ng-class="row.entity.isEdited ? \'edited\' : \'\'" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'},{field:"id",name:"Select",enableSorting:!1,allowCellFocus:!1,maxWidth:80,cellClass:"actions-col",cellTemplate:'<div class="actions"><md-checkbox ng-checked="grid.appScope.options.methods.isGuestSelected(row.entity)" ng-click="grid.appScope.options.methods.toggleGuestSelected(row.entity)" aria-label="Select"></md-checkbox></div>'}]},gridData:[]},e.options.methods={isGuestSelected:function(t){return e.selected.indexOf(t)>-1
},toggleGuestSelected:function(t){var i=e.selected.indexOf(t);i>-1?e.selected.splice(i,1):e.selected.push(t)}},e.getSelected=function(t){return e.selectedIndex===t?"active":""},e.$watch("selectedIndex",function(e){s.search("view",e)}),e.resend=function(){if(e.selected.length>0){e.sendingData=!0;var n={EventId:e.event.id,EmailRequests:[]};angular.forEach(e.selected,function(e){n.EmailRequests.push({GuestId:e.id,MessageType:e.messageType})}),t.resendGuestEmails(n).then(function(){angular.forEach(e.selected,function(t){var i=e.options.gridData.indexOf(t);i>-1&&(e.options.gridData[i].status=e.getTextStatus(0),e.options.gridData[i].deliveryStatus=0)}),e.selected=[]},function(){i.error("There was a problem resending guest emails, please try again")})["finally"](function(){e.sendingData=!1})}},e.getTextStatus=function(e){return 0===e?"Sending":1===e?"Delivered":2===e?"Not Delivered":3===e?"Not Delivered":""},e.init=function(){var s=a.eventId;e.initializing=!0,t.getEvents(s).then(function(t){e.event=t},function(){i.error("There was a problem getting your events, please try again"),n.go("main.current_events")})["finally"](function(){e.initializing=!1}),e.fetchingData=!0,t.getEmailDeliveryReport(s).then(function(t){e.deliveryReport=t.DeliveryReports,angular.forEach(e.deliveryReport,function(t){e.options.gridData.push({id:t.GuestId,name:t.FirstName+" "+t.LastName,email:t.Email,status:e.getTextStatus(t.DeliveryStatus),messageType:t.MessageType,deliveryStatus:t.DeliveryStatus,isEdited:t.Edited})})},function(){i.error("There was a problem getting delivery report, please try again")})["finally"](function(){e.fetchingData=!1})}}]),angular.module("gliist").controller("EditEventCtrl",["$scope","$stateParams","dialogService","$state","eventsService",function(e,t,i,n,a){var s=t.eventId;e.initializing=!0,e.currentEvents=a.getEvents(s).then(function(t){e.event=t},function(){i.error("There was a problem getting your events, please try again"),n.go("main.current_events")})["finally"](function(){e.initializing=!1})}]),angular.module("gliist").controller("AddEditGLEventCtrl",["$scope","$stateParams","dialogService","$state","eventsService","subscriptionsService",function(e,t,i,n,a,s){e.gliId=t.gli,e.currentGlist={title:"New Guest List",guests:[]};var o=t.eventId,r=t.instanceType,l=0;o&&a.getEvents(o).then(function(t){l=e.getTotalGuests(t.guestLists)},function(){i.error("There was a problem getting your event, please try again")}),e.getTotalGuests=function(t){var i=0;return angular.forEach(t,function(t){(!e.gliId||e.gliId&&Number(t.id)!==Number(e.gliId))&&angular.isDefined(t.guestsCount)&&(i+=t.guestsCount)}),i},e.checkSubscription=function(t,i){var n=e.gliId?t.actual.length:t.guests.length;return s.verifyFeature("Guests",l+n,i,"You are only allowed {value} guests, Would you like to upgrade to unlimited?")?!0:!1},e.goBackToEvent=function(){n.go("main.edit_event",{eventId:o,view:3})},e.goBackToEvent=function(t){e.gliId?n.go("main.edit_event",{eventId:o,view:3}):a.linkGuestList([t],o,r).then(function(){i.success("Guest lists were linked"),n.go("main.edit_event",{eventId:o,view:3})},function(){i.error("There was a problem linking, please try again")})}}]),angular.module("gliist").factory("userService",["$rootScope","$http","$q","$window","EnvironmentConfig",function(e,t,i,n,a){var s,o,r,l,d=function(e){r=e,t.defaults.headers.common.Authorization="Bearer "+e},c=function(e){if(!e.access_token)throw"Trying to save empty access token";o=!0,s=e.userName,d(e.access_token),n.localStorage.setItem("access_token",e.access_token)};return{resetPassword:function(e){var n=i.defer(),a="api/Account/ResetPassword";return t({method:"POST",url:a,data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},changePassword:function(e){var n=i.defer(),a="api/Account/ChangePassword";return t({method:"POST",url:a,data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},sendPasswordRecover:function(e){var n=i.defer(),a="api/EmailController/SendRecoverPasswordEmail";return t({method:"POST",url:a,params:{userEmail:e}}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},getInviteInfo:function(e,n){var a=i.defer(),s="api/companies/GetInviteInfo";return l&&a.resolve(l),t({method:"GET",url:s,params:{companyName:e,token:n}}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},getCompanyInfo:function(){var e=i.defer(),n="api/Account/CompanyInfo";return l&&e.resolve(l),t({method:"GET",url:n}).success(function(t){e.resolve(t)}).error(function(t){e.reject(t)}),e.promise},deleteUser:function(e){var n=i.defer(),a="api/Account/DeleteRegisterByInvite";return t({method:"DELETE",url:a,params:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},deleteCompany:function(e){var n=i.defer(),a="api/Account/BlockCompany";return t({method:"POST",url:a,data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},sendJoinRequest:function(e){var n=i.defer(),a="api/Account/InviteUser";return l&&n.resolve(l),t({method:"POST",url:a,data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},updateCompanyUser:function(e){var n=i.defer(),a="api/Account/UpdateCompanyUser";return t({method:"PUT",url:a,data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},getUserPhoto:function(e,t,i){var n;return t?(n=a.gjests_api+"api/account/ProfilePicture/?userId="+t.userId+"&suffix="+i,n='url("'+n+'")'):n='url("assets/images/blank_user_icon.png")',{"background-image":n,"background-position":"center center",height:e||"250px","background-size":"contain","background-repeat":"no-repeat"}},updateUserProfile:function(e){var n=i.defer(),a="api/Account/UserInfo";return t({method:"PUT",url:a,data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},getCurrentUser:function(){var e=i.defer(),n="api/Account/UserInfo",a=this;return l&&e.resolve(l),t({method:"GET",url:n,params:{},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(t){a.userData=t,e.resolve(a.userData)}).error(function(t){e.reject(t)}),e.promise},getLogged:function(){return o||r?!0:n.localStorage.getItem("access_token")&&!r?(d(n.localStorage.getItem("access_token")),!0):!1},login:function(e){var n=i.defer(),a="grant_type=password&username="+encodeURIComponent(e.username)+"&password="+encodeURIComponent(e.password);return t({method:"POST",url:"Token",data:a,headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e,t){200===t?(c(e),n.resolve(e)):(o=!1,s="",n.resolve(e)),n.resolve(e)}).error(function(e,t){e.status=t,n.reject(e)}),n.promise},logout:function(){o=!1,s="",d(""),e.currentUser=null,n.localStorage.removeItem("access_token")},registerEmail:function(e,n){var a=i.defer(),r="api/Account/Register";n&&(r="api/Account/CreateUserByAccount");var l=this;return t({method:"POST",url:r,data:e,headers:{"Content-Type":"application/json"}}).success(function(t,i){200===i?l.login(e,a).then(function(e){a.resolve(e)},function(e){a.reject(e)}):(o=!1,s="",a.reject(t.ModelState))}).error(function(e){o=!1,s="",a.reject(e)}),a.promise},updateCompanySocialLinks:function(e){var n=i.defer();return t({method:"POST",url:"api/Companies/UpdateSocialLinks",data:{id:parseInt(e.company_id),facebookPageUrl:e.facebookPageUrl,instagrammPageUrl:e.instagrammPageUrl,twitterPageUrl:e.twitterPageUrl}}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},getUsersByRole:function(e){var n=i.defer(),a="api/users/getUsers";return t({method:"GET",url:a,params:{role:e},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},markCurrentUserAsLoggedInAtLeastOnce:function(){var e=i.defer();return t({method:"POST",url:"api/Account/MarkCurrentUserAsLoggedInAtLeastOnce"}).success(function(t){e.resolve(t)}).error(function(t){e.reject(t)}),e.promise}}}]),angular.module("gliist").factory("uploaderService",["$upload","$q",function(e,t){return{uploadGuestList:function(i,n){var a=t.defer();return i||a.reject("Please select a file"),e.upload({url:"api/CSVController/CsvToGuestList",fields:{glId:n},file:i}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},uploadGuestListInstance:function(i,n){var a=t.defer();return i||a.reject("Please select a file"),e.upload({url:"api/GuestListInstances/"+n+"/Import/File",file:i}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},upload:function(i){var n=t.defer();return i||n.reject("Please select an image"),e.upload({url:"api/account/ProfilePicture",fields:{},file:i}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},uploadEventInvite:function(i,n){var a=t.defer();return i||a.reject("Please select an image"),e.upload({url:"api/GuestEventController/InvitePicture",params:{eventId:n},file:i}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise}}}]),angular.module("gliist").service("subscriptionsService",["$http","$q","dialogService","$rootScope","$state","$mdDialog","paymentsService",function(e,t,i,n,a,s,o){var r=function(e,t){var n=t.data&&t.data.message||"Endpoint "+t.config.url+" "+t.statusText.toLowerCase();i.error(n),e.reject(t)},l=function(e,t){t.data.success?e.resolve({data:t.data.data,dataTotalCount:t.data.dataTotalCount}):(i.error(t.data.message),e.reject())},d={},c={},u=function(e){angular.forEach(e.usedPolicies,function(e){d[e.feature]=e.value}),angular.forEach(e.subscription.policies,function(e){c[e.feature]={type:e.type,value:e.value}})},m=this;this.getFeatureValue=function(e){return c[e]?c[e].value:!1},this.getUserSubscription=function(){var i=t.defer();return e.get("user/subscription",{api:"subscriptions_api"}).then(function(e){e.data.data&&"Unpaid"===e.data.data.status&&(e.data.data=null),e.data.data&&u(e.data.data),l(i,e)},function(e){r(i,e)}),i.promise},this.setUserSubscription=function(i){var a=t.defer();return i.card&&(i.card.name=n.currentUser.firstName+" "+n.currentUser.lastName),e.post("user/subscription",i,{api:"subscriptions_api"}).then(function(e){e.data.data&&"Unpaid"===e.data.data.status?r(a,l):(e.data.data&&u(e.data.data),l(a,e))},function(e){r(a,e)}),a.promise},this.getSubscriptions=function(){var i=t.defer(),a="subscriptions";return n.currentUser&&(a="user/subscriptions"),e.get(a,{api:"subscriptions_api"}).then(function(e){l(i,e)},function(e){r(i,e)}),i.promise},this.applyPromo=function(i,n){var a=t.defer();return e.post("user/promo",{code:i,subscriptionId:n},{api:"subscriptions_api"}).then(function(e){l(a,e)},function(e){r(a,e)}),a.promise},this.undoPromo=function(i,n){var a=t.defer();return e["delete"]("user/promo",{api:"subscriptions_api",data:{code:i,subscriptionId:n},headers:{"Content-Type":"application/json"}}).then(function(e){l(a,e)},function(e){r(a,e)}),a.promise},this.verifyFeature=function(e,t,s,o){if(n.currentUser){var r=!0,l=!1;if(c[e])switch(c[e].type){case"Restrict":r=!1;break;case"LimitedPerInstanceQuota":t>c[e].value&&(r=!1),o&&(o=o.replace(/{value}/,c[e].value));break;case"LimitedQuota":(!d[e]||d[e]&&t>d[e])&&(r=!1),d[e]&&o&&(o=o.replace(/{value}/,d[e]));break;case"Parameter":t>c[e].value&&(r=!1),o&&(o=o.replace(/{value}/,c[e].value)),"EventDurationDays"===e&&6===c[e].value&&(l=!0)}return s&&!r&&(l?i.confirm(s,o,"Ok"):i.confirm(s,o||"This is a paid feature. Would you like to upgrade your plan to unlock this feature?","Upgrade","Close").then(function(){"Pay as you go"!==n.currentUser.subscription.subscription.name?a.go("main.user",{view:2}):m.paymentPopup(n.currentUser.subscription.subscription,0)})),r}},this.paymentPopup=function(e,t,r){var l=n.$new();l.selectedPlan=e,l.pricePolicyKey=t,l.pricePolicy=l.selectedPlan.pricePolicies[l.pricePolicyKey],l.pricePolicyBeforePromo=null,l.cardDataLoaded=!1,l.cardDataSaved={},l.loadingCard=!0,o.getCard().then(function(e){e.data&&(l.cardData=e.data,l.cardDataSaved.number=l.cardData.number,l.cardData.number="",l.cardData.cvc="",l.cardDataLoaded=!0)})["finally"](function(){l.loadingCard=!1}),l.close=function(){s.hide()},l.promo={code:l.selectedPlan.usedPromoCode||"",applied:l.selectedPlan.usedPromoCode?!0:!1,invalid:!1},l.applyPromo=function(){var e=l.promo.code?l.promo.code.trim():"";""!==e&&(l.promo.invalid=!1,l.waiting=!0,m.applyPromo(e,l.selectedPlan.id).then(function(t){l.promo.code=e,l.promo.applied=!0,l.pricePolicyBeforePromo=l.pricePolicy,l.selectedPlan=t.data,l.pricePolicy=l.selectedPlan.pricePolicies[l.pricePolicyKey]},function(){l.promo.invalid=!0})["finally"](function(){l.waiting=!1}))},l.undoPromo=function(){var e=l.promo.code?l.promo.code.trim():"";""!==e&&(l.waiting=!0,m.undoPromo(e,l.selectedPlan.id).then(function(e){0===e.dataTotalCount?l.promo.invalid=!0:(l.promo.applied=!1,l.pricePolicyBeforePromo=null,l.selectedPlan=e.data,l.pricePolicy=l.selectedPlan.pricePolicies[l.pricePolicyKey],l.promo.code="")})["finally"](function(){l.waiting=!1}))},l.process=function(e){var t=[],s=l.cardDataLoaded&&""!==e.number.$viewValue;if(e&&e.$invalid&&(!l.cardDataLoaded||s)){var o={required:{number:"Please Enter Card Number",cvc:"Please Enter Card CVC Code",exp_month:"Please Enter Card Expiration Month",exp_year:"Please Enter Card Expiration Year",address_zip:"Payment zip code is missing"},pattern:{number:"Please Enter Correct Card Number",cvc:"Please Enter Correct Card CVC Code",exp_month:"Please Enter Correct Card Expiration Month",exp_year:"Please Enter Correct Card Expiration Year"},max:{exp_month:"Please Enter Correct Card Expiration Month"},min:{exp_year:"Please Enter Correct Card Expiration Year"}};angular.forEach(e.$error,function(e,i){o[i]&&angular.forEach(e,function(e){o[i][e.$name]&&t.push(o[i][e.$name])})})}if(l.terms||t.push("You must accept terms and conditions"),t.length>0)return void i.error(t.join(", "));var d={subscriptionId:l.selectedPlan.id,pricePolicyId:l.pricePolicy.id};(!l.cardDataLoaded||s)&&(d.card=l.cardData),l.waiting=!0,m.setUserSubscription(d).then(function(e){n.currentUser.subscription=e.data,l.close(),"choose_plan"===a.current.name?a.go("main.welcome"):r&&r()},function(e){i.confirm(null,e.data.message,"OK","")})["finally"](function(){l.waiting=!1})},s.show({scope:l,templateUrl:"app/user/templates/payment-popup.html"})}}]),angular.module("gliist").service("permissionsService",["$rootScope",function(e){this.roles={admin:{label:"Administrator",denyAccess:[]},manager:{label:"Manager",desc:"Same access as Admin but cant add contributor",denyAccess:[]},staff:{label:"Staff",desc:"Allow to check guests in and check on event stats",denyAccess:["main.create_event","main.list_management","main.edit_glist","main.create_list_management"]},promoter:{label:"Promoter",desc:"Allow to add guests to the list he is assigned to",denyAccess:["main.create_event","main.user"]}},this.roleExisis=function(){return angular.isDefined(this.roles[e.currentUser.permissions])},this.roleDenyAccess=function(t){return this.roles[e.currentUser.permissions].denyAccess.indexOf(t)>-1},this.isRole=function(t){return e.currentUser&&e.currentUser.permissions.indexOf(t)>-1}}]),angular.module("gliist").factory("paymentsService",["$http","$q","dialogService","$rootScope",function(e,t,i,n){var a=function(e,t){var n=t.data&&t.data.message||"Endpoint "+t.config.url+" "+t.statusText.toLowerCase();i.error(n),t.data&&t.data.success===!1?e.reject(t):e.reject()},s=function(e,t){t.data.success?e.resolve({data:t.data.data,dataTotalCount:t.data.dataTotalCount}):(i.error(t.data.message),e.reject())};return{getCharges:function(){var i=t.defer();return e.get("user/charges",{api:"payments_api"}).then(function(e){s(i,e)},function(e){a(i,e)}),i.promise},getCard:function(){var i=t.defer();return e.get("user/card",{api:"payments_api"}).then(function(e){s(i,e)},function(e){a(i,e)}),i.promise},updateCard:function(i){var n=t.defer();return e.put("user/cards",i,{api:"payments_api"}).then(function(e){s(n,e)},function(e){a(n,e)}),n.promise},addCard:function(i){var o=t.defer();return i.name=n.currentUser.firstName+" "+n.currentUser.lastName,e.post("user/cards",i,{api:"payments_api"}).then(function(e){s(o,e)},function(e){a(o,e)}),o.promise},deleteCard:function(i){var n=t.defer();return e["delete"]("user/cards",{api:"payments_api",data:{cardId:i},headers:{"Content-Type":"application/json"}}).then(function(e){s(n,e)},function(e){a(n,e)}),n.promise},getCards:function(){var i=t.defer();return e.get("user/cards",{api:"payments_api"}).then(function(e){s(i,e)},function(e){a(i,e)}),i.promise}}}]),angular.module("gliist").service("guestListParserService",function(){this.parse=function(e){var t=e.split("\n"),i=t.length;if(!i)return null;for(var n=[],a=0;i>a;a++){var s=t[a];if(""!==s){var o=null,r=null,l=0,d=[];if(-1!==s.indexOf(",")){if(d=s.split(","),3!==d.length)return"Invalid format on line "+(a+1)+". Valid format is: Name, Note, Pluses.";if(o=d[0].trim(),""===o)continue;if(r=d[1].trim(),l=parseInt(d[2].trim(),10),isNaN(l))return'Invalid "Plus" value on line '+(a+1)}else if(-1!==s.indexOf("+")){if(d=s.split("+"),o=d[0].trim(),""===o)continue;if(r="",l=parseInt(d[1].trim(),10),isNaN(l))return'Invalid "Plus" value on line '+(a+1)}else o=s.trim(),r="";var c={firstName:null,lastName:null,email:"",notes:r,plus:l},u=o.indexOf(" ");-1!==u?(c.firstName=o.substr(0,u).trim(),c.lastName=o.substr(u+1).trim()):(c.firstName=o,c.lastName=""),n.push(c)}}return n}}),angular.module("gliist").factory("guestFactory",["$resource",function(e){return{Guest:e("api/guest/:id",{id:"@id"},{update:{method:"PUT",params:{id:"@id"},url:"api/guest/:id"}}),GuestLists:e("api/guestlists",{},{get:{method:"GET",isArray:!0}}),GuestList:e("api/guestlists/:id",{id:"@id"},{update:{method:"POST",params:{},url:"api/guestlists"},"delete":{method:"DELETE",params:{},url:"api/guestlists/:id"}}),GuestListInstance:e("api/GuestListInstances/:id/:promoter_Id",{id:"@id",promoter_Id:"@promoter_Id"},{update:{method:"POST",params:{},url:"api/GuestListInstances"},"delete":{method:"DELETE",params:{},url:"api/GuestListInstances/:id"}})}}]),angular.module("gliist").factory("eventsService",["$rootScope","$http","$q",function(e,t,i){return{removeGuestsFromGL:function(e,n){var a=i.defer();return t({method:"POST",url:"api/GuestEventController/DeleteGuestsGuestList",data:{id:e,ids:n}}).success(function(e){a.resolve(e)}).error(function(){a.reject("Oops there was an error, please try again")}),a.promise},removeGuestsFromGLInstance:function(e,n){var a=i.defer();return t({method:"POST",url:"api/GuestEventController/DeleteGuestsGuestListInstance",data:{id:e,ids:n}}).success(function(e){a.resolve(e)}).error(function(){a.reject("Oops there was an error, please try again")}),a.promise},postGuestCheckin:function(e,n){var a=i.defer();return t({method:"POST",url:"api/GuestEventController/CheckinGuest",data:{guestId:e.guest.id,gliId:n.id,plus:e.plus}}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},postGuestUndoCheckin:function(e,n){var a=i.defer();return t({method:"POST",url:"api/GuestEventController/UndoCheckinGuest",data:{guestId:e.guest.id,gliId:n.id,plus:e.plus}}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},getGuestCheckin:function(e,n){var a=i.defer();return t({method:"GET",url:"api/GuestEventController/GetGuestCheckin",params:{gliId:n,guestId:e}}).success(function(e){a.resolve(e)}).error(function(){a.reject("Oops there was an error trying to get guest information, please try again")}),a.promise},updateGuestNotes:function(e,n){var a=i.defer();return t({method:"POST",url:"api/guest/updatenotes",data:{GuestId:e,Notes:n}}).success(function(e){a.resolve(e)}).error(function(){a.reject("Oops there was an error trying to get guest information, please try again")}),a.promise},createEvent:function(e){var n=i.defer();return t.post("api/event",e).then(function(e){n.resolve(e)},function(e){var t="Oops there was an error trying to get events, please try again";403===e.status,n.reject(t)}),n.promise},addGuestToEvent:function(e,n){var a=i.defer();return t({method:"POST",url:"api/GuestEventController/AddGuest",data:{guest:e,eventId:n}}).success(function(e){a.resolve(e)}).error(function(){a.reject("Oops there was an error trying to get events, please try again")}),a.promise},publishEvent:function(e,n){var a=i.defer();return t({method:"POST",url:"api/GuestEventController/PublishEvent",data:{ids:e,eventId:n}}).success(function(e){a.resolve(e)}).error(function(){a.reject("Oops there was an error publishing event, please try again")}),a.promise},linkGuestList:function(e,n,a){var s=i.defer(),o=e.map(function(e){return e?e.id:void 0});return t({method:"POST",url:"api/GuestEventController/linkGuestList",data:{guestListIds:o,eventId:n,instanceType:a}}).success(function(e){s.resolve(e)}).error(function(){s.reject("Oops there was an error trying to get events, please try again")}),s.promise},importGuestList:function(e,n,a){var s=i.defer(),o=n.map(function(e){return e?e.id:void 0});return t({method:"POST",url:"api/GuestEventController/ImportGuestList",data:{ids:o,id:e,gl:a}}).success(function(e){s.resolve(e)}).error(function(){s.reject("Oops there was an error trying to get events, please try again")}),s.promise},importGuestsToGLInstance:function(e,n){var a=i.defer(),s=n.map(function(e){return e?e.id:void 0});return t({method:"POST",url:"api/GuestListInstances/:id/Import/GuestLists".replace(":id",e),data:s}).success(function(e){a.resolve(e)}).error(function(){a.reject("Oops there was an error trying to get events, please try again")}),a.promise},deleteGuestList:function(e,n){var a=i.defer(),s=[e.id];return t({method:"POST",url:"api/GuestEventController/DeleteGuestList",data:{ids:s,eventId:n}}).success(function(e){a.resolve(e)}).error(function(){a.reject("Oops there was an error trying to get events, please try again")}),a.promise},getPastEvents:function(){var e=i.defer();return t({method:"GET",url:"api/event/PastEvents/"}).success(function(t){e.resolve(t)}).error(function(){e.reject("Oops there was an error trying to get events, please try again")}),e.promise},getCurrentEvents:function(){var e=i.defer();return t({method:"GET",url:"api/event/CurrentEvents/"}).success(function(t){e.resolve(t)}).error(function(){e.reject("Oops there was an error trying to get events, please try again")}),e.promise},getEvents:function(e){var n=i.defer();return t({method:"GET",url:"api/event/"+(e||"")}).success(function(e){n.resolve(e)}).error(function(){n.reject("Oops there was an error trying to get events, please try again")}),n.promise},deleteEvent:function(e){var n=i.defer();return t({method:"DELETE",url:"api/event",params:{id:e}}).success(function(e){n.resolve(e)}).error(function(){n.reject("Oops there was an error trying to get events, please try again")}),n.promise},getGuestInfo:function(e,n){var a=i.defer();return t({method:"GET",url:"api/guest/",params:{eventId:e,guestId:n}}).success(function(e){a.resolve(e)}).error(function(){a.reject("Oops there was an error trying to get events, please try again")}),a.promise},getPublicEventDetails:function(e,n,a){var s=i.defer();return t({method:"GET",url:"api/"+e+"/PublicDetails/"+n+"/"+a}).success(function(e){s.resolve(e)}).error(function(e){s.reject(e)}),s.promise},getPersonalEventDetails:function(e,n){var a=i.defer();return t({method:"GET",url:"api/"+e+"/InvitedDetails/"+n}).success(function(e){a.resolve(e)}).error(function(e){a.reject(e)}),a.promise},confirmRSVPPublicEvent:function(e){var n=i.defer();return t({method:"POST",url:"api/rsvp/PublicConfirm",data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},confirmRSVPPersonalEvent:function(e){var n=i.defer();return t({method:"POST",url:"api/rsvp/InvitedConfirm",data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},incRSVPVisitors:function(e){t({method:"POST",url:"api/reports/rsvpvisitors/"+e})},getRSVPVisitors:function(e){var n=i.defer();return t({method:"GET",url:"api/reports/rsvpvisitors/"+e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},checkGuestsEmailBeforePublishing:function(e){var n=i.defer();return t({method:"POST",url:"api/GuestEventController/CheckGuestsEmailBeforePublishing",data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},getEmailDeliveryReport:function(e){var n=i.defer();return t({method:"GET",url:"api/GuestEventController/GetEmailDeliveryReport/"+e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise},resendGuestEmails:function(e){var n=i.defer();return t({method:"POST",url:"api/GuestEventController/ResendGuestEmail",data:e}).success(function(e){n.resolve(e)}).error(function(e){n.reject(e)}),n.promise}}}]),angular.module("gliist").factory("dialogService",["$mdToast","$mdDialog",function(e,t){return{error:function(t){e.show(e.simple().content(t).position("center center").hideDelay(3e3))},success:function(t){e.show(e.simple().content(t).position("center center").hideDelay(3e3))},confirm:function(e,i,n,a,s){var o=t.confirm().content(i||"").ok(n||"Yes").targetEvent(e),r=a&&""!==a;return r&&o.cancel(a||"Cancel"),o._options.template='<md-dialog md-theme="{{ dialog.theme }}" aria-label="{{ dialog.ariaLabel }}"'+(s?' class="'+s+'"':"")+'><img src="assets/images/popup-close.png" ng-click="dialog.abort()" style="display:none"/><md-dialog-content role="document" tabIndex="-1"><h2 class="md-title">{{ dialog.title }}</h2><p ng-bind-html="dialog.content" style="font-size: 20px;"></p></md-dialog-content><div class="md-actions" style="padding: 0 20px 20px 20px;">'+(r?'<md-button ng-if="dialog.$type == \'confirm\'" ng-click="dialog.abort()" class="md-primary">{{ dialog.cancel }}</md-button>':"")+'<md-button ng-click="dialog.hide()" class="md-primary">{{ dialog.ok }}</md-button></div></md-dialog>',t.show(o)}}}]),angular.module("gliist").filter("spaceless",function(){return function(e){return e?e.replace(/\s/g,"_"):void 0}}),angular.module("gliist").filter("nl2br",["$sanitize",function(e){var t=/xhtml/i.test(document.doctype)?"<br />":"<br>";return function(i){return i=(i+"").replace(/(\r\n|\n\r|\r|\n|&#10;&#13;|&#13;&#10;|&#10;|&#13;)/g,t+"$1"),e(i)}}]),angular.module("gliist").filter("money",["$filter","$locale",function(e,t){var i=e("currency"),n=t.NUMBER_FORMATS,a=function(e){switch(e.toUpperCase()){case"EUR":return"";case"USD":case"MXN":case"CAD":case"AUD":case"NZD":case"HKD":case"SGD":case"ARS":return"$";case"CNY":case"JPY":return"";case"GBP":case"GIP":return"";case"BRL":return"R$";case"INR":return"Rp";case"CHF":return"Fr";case"SEK":case"NOK":return"kr";case"KPW":case"KRW":return"";default:return e}};return function(e,t){var s;s=t?i(e/100,a(t)):i(e/100);var o=new RegExp("\\"+n.DECIMAL_SEP+"0+","i");return s.replace(o,"")}}]),angular.module("gliist").filter("html",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]),angular.module("gliist").filter("encodeURIComponent",["$window",function(e){return e.encodeURIComponent}]),angular.module("gliist").directive("userDetails",[function(){return{restrict:"EA",scope:{user:"="},controller:"UserDetailsCtrl",replace:!0,templateUrl:"app/user/templates/user-details.tmpl.html"}}]),angular.module("gliist").directive("uiGridResponsive",[function(){return{restrict:"EA",scope:{options:"=?"},controller:"UIGridResponsiveCtrl",replace:!0,templateUrl:"app/templates/ui-grid-responsive.tmpl.html"}}]),angular.module("gliist").directive("spinner",[function(){return{restrict:"E",require:"ngModel",scope:{min:"@",max:"@",nullable:"@",ngModel:"=",change:"&",view:"@"},replace:!0,templateUrl:"app/templates/spinner.tmpl.html",controller:["$scope",function(e){function t(e,t){return t=angular.isNumber(t)?t:null,e=parseInt(e),isNaN(e)?t:e}var i=!!e.nullable,n=t(e.min,0),a=t(e.max,365);e.view=e.view?"h":"v",e.ngModel=t(e.ngModel,i?null:0),e.validate=function(){var s=i?"":n;e.ngModel=t(e.ngModel,s),null!==e.ngModel&&(e.ngModel=e.ngModel<n?n:e.ngModel,e.ngModel=e.ngModel>a?a:e.ngModel,e.change())},e.$watch("ngModel",function(t,i){t!==i&&e.change()}),e.validate(),e.minus=function(){e.ngModel=t(e.ngModel,n),e.ngModel>n&&e.ngModel--},e.plus=function(){e.ngModel=t(e.ngModel,n-1),e.ngModel<a&&e.ngModel++}}]}}]),angular.module("gliist").directive("removeByRoles",["$rootScope",function(e){return{link:function(t,i,n){var a=n.removeByRoles.split(",");a.indexOf(e.currentUser.permissions)>-1&&i.remove()}}}]),angular.module("gliist").directive("ngMatch",[function(){return{require:"ngModel",link:function(e,t,i,n){var a=function(){var t=e.$eval(i.ngModel),n=e.$eval(i.ngMatch);return t===n};e.$watch(a,function(e){n.$setValidity("match",e)})}}}]),angular.module("gliist").filter("ignoreTimeZone",function(){return function(e){if(e){var t=e.split(/[^0-9]/);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])}}}),angular.module("gliist").directive("currency",["$filter",function(e){return{restrict:"A",require:"^ngModel",scope:!0,link:function(t,i,n,a){function s(t){t=parseInt(t.toString().replace(/[^0-9]/g,"")),0>t?t=0:t>9999&&(t=9999);var n=e("currency")(t,"",0);return i.val(n),n}a.$formatters.push(s),i.bind("focus",function(){i.val("")}),i.bind("blur",function(){s(i.val())})}}}]),angular.module("gliist").directive("alignmentHeight",[function(){return{restrict:"A",link:function(e,t){e.$watch(function(){return t[0].children.length},function(i){if(i>0)var n=e.$watchCollection(function(){for(var e=[],i=0;i<t[0].children.length;i++)e.push(t[0].children[i].clientHeight);return e},function(e){var i=0;angular.forEach(e,function(e){e>i&&(i=e)});var a=angular.element(t[0]).find(".tariff-block");if(a.length>0){var s=angular.element(a[0]).find(".tariff-header"),o=angular.element(a[0]).find(".tariff-footer");s.length>0&&o.length>0&&(n(),angular.forEach(a,function(e){angular.element(e).find(".tariff-content").css("min-height",i-s[0].clientHeight-o[0].clientHeight+"px")}))}})})}}}]),angular.module("gliist").controller("WelcomeController",["$scope","$mdDialog","$mdMedia","$rootScope","$anchorScroll","$location","$timeout","$window","userService","dialogService","permissionsService",function(e,t,i,n,a,s,o,r,l,d,c){e.options={limit:3,readyOnly:!0},e.hideArrow=!1;var u=e.$watch("currentUser",function(m){m&&angular.isDefined(m)&&(u(),e.permissionTitle=" - "+n.currentUser.permissions.charAt(0).toUpperCase()+n.currentUser.permissions.slice(1).toLowerCase(),e.permissionTitle+="admin"===n.currentUser.permissions?" Account":" Access",o(function(){if(n.currentUser.IsFirstLogin&&!c.isRole("promoter")){var o=e.$new();o.close=function(){e.hideArrow=!0,t.hide(),l.markCurrentUserAsLoggedInAtLeastOnce().then(function(){n.currentUser.IsFirstLogin=!1},function(e){e&&e.message&&d.error(e.message)})},o.getStyles=function(){var t=549;return c.isRole("staff")&&(t=389),{top:t-r.scrollY+"px",display:i("gt-lg")&&!e.hideArrow?"block":"none"}},s.hash("bottom"),a(),t.show({scope:o,templateUrl:"app/templates/welcome-popup.html"})}},500))})}]),angular.module("gliist").controller("UIGridResponsiveCtrl",["$scope","$mdMedia","$parse",function(e,t,i){var n={filter:{active:!1,placeholder:"Search",fields:[]},sorting:{active:!1,placeholder:"Sort by"},display:{totalMobileViewportItems:2,totalViewportItems:11,verticalScroll:!0,readOnly:!1,enableSelection:!1,enableGridSelection:!1,enableEditCells:!1,tip:""},gridOptions:{enableFiltering:!1,enableColumnMenus:!1,enableHorizontalScrollbar:0,selectionRowHeaderWidth:50,rowTemplate:'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.uid" ui-grid-one-bind-id-grid="rowRenderIndex + \'-\' + col.uid + \'-cell\'" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }" role="{{col.isRowHeader ? \'rowheader\' : \'gridcell\'}}" ng-keydown="grid.appScope.options.methods.gridCellTab($event, col)"><dl><dt hide-gt-sm ng-hide="col.cellClass === \'actions-col\'">{{col.name}}</dt><dd ui-grid-cell class="ui-grid-cell"></dd></dl></div>',columnDefs:[]},gridData:[],methods:{updateGridData:function(){var t=[];
angular.copy(e.options.gridOptions.data,t),angular.copy(t,e.options.gridData)},gridCellTab:function(){},onRegisterApi:function(){}}};angular.forEach(n,function(t,i){e.options[i]=angular.merge(t,e.options[i])}),e.$watchCollection("options.gridData",function(t){t&&(e.options.gridOptions.data=e.options.gridData)}),e.options.gridOptions.enableVerticalScrollbar=e.options.display.verticalScroll===!1?0:2,e.options.gridOptions.enableSorting=e.options.sorting.active,e.options.gridOptions.enableRowHeaderSelection=e.options.display.enableGridSelection,e.options.gridOptions.enableCellEdit=e.options.display.enableEditCells,e.options.gridOptions.enableCellEditOnFocus=e.options.display.enableEditCells,e.options.gridOptions.onRegisterApi=function(t){e.gridApi=t,e.options.filter.active&&e.gridApi.grid.registerRowsProcessor(e.singleFilter,200),e.options.methods.onRegisterApi(e.gridApi)},e.sort={sortingFields:[],sortField:""},angular.forEach(e.options.gridOptions.columnDefs,function(t){(void 0===t.enableSorting||t.enableSorting)&&e.sort.sortingFields.push(t)}),e.setSortField=function(){var t=e.gridApi.grid.getColumn(e.sort.sortField);e.gridApi.grid.sortColumn(t),e.gridApi.grid.refresh()},e.filter={refresh:function(){e.gridApi.grid.refresh()},value:""},e.singleFilter=function(t){var n=new RegExp(e.filter.value,"i");return t.forEach(function(t){var a=!1;e.options.filter.fields.forEach(function(e){var s=i("entity."+e),o=s(t)||"";o.match(n)&&(a=!0)}),a||(t.visible=!1)}),t},e.$watch(function(){return!t("gt-sm")},function(t){if(e.isMobile=t,e.options.gridOptions.columnDefs.length>0){var i=e.options.gridOptions.columnDefs.length;"actions-col"===e.options.gridOptions.columnDefs[e.options.gridOptions.columnDefs.length-1].cellClass&&i--,e.options.gridOptions.rowHeight=e.isMobile?40*i+22:45,e.options.methods.updateGridData()}}),e.getTableHeight=function(){var t=e.isMobile?e.options.display.totalMobileViewportItems:e.options.display.totalViewportItems;return e.options.display.verticalScroll===!1&&(t=e.options.gridOptions.data.length),e.isMobile||t++,{height:t*e.options.gridOptions.rowHeight+5+"px"}},e.getClass=function(){var t=["margin-top"];return e.options.display.verticalScroll===!1&&t.push("no-vertical-scroll"),e.options.display.enableEditCells===!0&&t.push("grid-editable"),t}}]),angular.module("gliist").controller("StatsCtrl",["$scope",function(e){e.options={past:!0,readyOnly:!0,stats:!0,filter:{active:!0}}}]),angular.module("gliist").controller("MainCtrl",["$scope","$mdSidenav",function(e,t){e.openLeftMenu=function(){t("left").toggle()}}]),angular.module("gliist").constant("EnvironmentConfig",{gjests_api:"http://54.228.219.224:8007/",subscriptions_api:"http://54.228.219.224:8008/api/",payments_api:"http://54.228.219.224:8009/api/"}),angular.module("gliist").controller("AppController",["$scope","$rootScope","userService","$state","dialogService","$mdSidenav","$mdMedia","permissionsService",function(e,t,i,n,a,s,o,r){e.credentials={},e.hidePhoto=!1,e.menuItems=[{title:"Create Event",ui_sref:"main.create_event",icon:{src:"assets/images/icons/create_event.png"}},{title:"Upcoming Events",ui_sref:"main.current_events",icon:{src:"assets/images/icons/upcoming_events.png"}},{title:"Guest List Management",ui_sref:"main.list_management",icon:{src:"assets/images/icons/guest_list_management.png"}},{title:"Events Stats",ui_sref:"main.stats",icon:{src:"assets/images/icons/event_stats.png"}},{title:"User Profile",ui_sref:"main.user",icon:{src:"assets/images/icons/user_profile.png"}}],t.$watch("currentUser",function(t){e.currentUser=t,e.getUserPhoto()}),t.$on("userUpdated",function(){e.suffix=(new Date).getTime(),e.userProfilePic=i.getUserPhoto(null,e.currentUser,e.suffix)}),e.getMenuItems=function(){return r.isRole("promoter")?[e.menuItems[1],e.menuItems[2],e.menuItems[3]]:r.isRole("staff")?[e.menuItems[1],e.menuItems[3],e.menuItems[4]]:e.menuItems},e.getUserPhoto=function(t){e.userProfilePic=i.getUserPhoto(t,e.currentUser,e.suffix)},e.toggleSidebar=function(){s("left").toggle()},e.setSelected=function(t){e.selectedMenuItem=t,o("gt-lg")||s("left").close()},e.getItemClass=function(t){return t===e.selectedMenuItem?"item-selected":void 0},e.getBg=function(){return n.current["abstract"]||n.includes("home")||n.includes("signup")||n.includes("signup_invite")||n.includes("recover_password")||n.includes("reset_password")?"logo-bg "+n.current.name:n.current.name.match(/^landing_.+/)?n.current.name.split("_"):"choose_plan"===n.current.name?"choose_plan":void 0},e.showUserBars=function(){return n.current.name.match(/^landing_.+/)||"choose_plan"===n.current.name?!1:t.currentUser},e.login=function(){e.credentials.username&&e.credentials.password&&(e.fetchingData=!0,i.login(e.credentials).then(function(){n.go("main.welcome")},function(e){var t=e&&500!==e.status&&e.error_description||"Something went wrong. Try again later please.";a.error(t)})["finally"](function(){e.fetchingData=!1}))},t.logout=function(){i.logout(),n.go("home")},e.onEnterPress=function(t){13===t.which&&e.credentials.username&&e.credentials.password&&e.login()}}]),angular.module("gliist").run(["$templateCache",function(e){e.put("app/templates/choose-plan.html",'<div layout="column" layout-align="start center" layout-fill=""><img ng-src="assets/images/gliist_logo_blue.png" class="header-image"><h4>Select your plan!</h4><subscriptions></subscriptions></div>'),e.put("app/templates/create-event.html",'<div><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Create Event</h3></div><event-details event="currentEvent"></event-details></div>'),e.put("app/templates/current-events.html",'<div><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Upcoming Events</h3></div><event-list events="currentEvents" class="margin-top"></event-list></div>'),e.put("app/templates/home.html",'<div class="signin" layout="column" layout-align="space-between center" layout-fill=""><div layout="column" layout-align="center center" class="content"><div><img src="assets/images/gliist_logo.png" style="height:90px"></div><div><md-input-container><label>Email</label> <input class="rounded-lr" type="text" ng-model="credentials.username" ng-keypress="onEnterPress($event)" required=""></md-input-container><md-input-container><label>Password</label> <input class="rounded-lr" type="password" ng-model="credentials.password" ng-keypress="onEnterPress($event)" required=""></md-input-container></div><div class="action"><md-button class="raised-btn" ng-click="login()" ng-disabled="!credentials.username || !credentials.password">login</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></div><div><md-button class="md-primary" style="color:white!important;" ui-sref="recover_password">Forgot Password</md-button></div></div><div class="footer"><div layout="column" layout-align="center center"><h3>New Users</h3><p>Get started with gjests and ditch the clipboard</p><md-button ui-sref="signup" class="raised-btn">Sign Up</md-button></div></div></div>'),e.put("app/templates/list-management.html",'<div><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Guest List Management</h3><md-button class="raised-btn" ui-sref="main.create_list_management" remove-by-roles="staff,promoter" ng-cloak="" hide-sm="">Create</md-button></div><div layout="row" layout-align="end center" hide-gt-sm="" class="margin-top"><md-button class="raised-btn" ui-sref="main.create_list_management" remove-by-roles="staff,promoter" ng-cloak="">Create</md-button></div><guest-list-view options="options" class="margin-top"></guest-list-view></div>'),e.put("app/templates/main.html",'<div layout-fill="" flex=""><div ui-view="" layout-fill=""></div></div>'),e.put("app/templates/past-events.html",'<div><h1>Past Events</h1><event-list events="currentEvents" options="options"></event-list></div>'),e.put("app/templates/spinner.tmpl.html",'<div class="spinner spinner-{{view}}"><a ng-click="plus()" class="btn btn-link"><span class="glyphicon" ng-class="view === \'v\' ? \'glyphicon-chevron-up\' : \'glyphicon-plus\'"></span></a> <input class="form-control text-center" type="text" ng-model="ngModel" ng-change="validate(); change()"> <a ng-click="minus()" class="btn btn-link"><span class="glyphicon" ng-class="view === \'v\' ? \'glyphicon-chevron-down\' : \'glyphicon-minus\'"></span></a></div>'),e.put("app/templates/stats.html",'<div><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Event Statistics</h3></div><event-list events="currentEvents" options="options" class="margin-top"></event-list></div>'),e.put("app/templates/ui-grid-responsive.tmpl.html",'<div class="ui-grid-responsive"><div layout="row" layout-align="space-between end" layout-sm="column" layout-align-sm="center stretch" ng-if="options.filter.active"><p class="info" flex-order-sm="1" ng-bind-html="options.display.tip" ng-style="options.display.tip === \'\' ? {margin:0} : {}"></p><md-input-container flex="40" flex-sm="100" md-no-float="" class="search"><input type="text" name="search" ng-model="filter.value" ng-change="filter.refresh()" placeholder="{{options.filter.placeholder}}"><md-icon class="input-icon" md-svg-src="assets/images/SVG/active-search.svg"></md-icon></md-input-container></div><div layout="row" layout-align="space-between center" class="margin-top" hide-gt-sm="" ng-if="options.sorting.active"><md-input-container flex="" md-no-float=""><md-select ng-model="sort.sortField" ng-change="setSortField()"><md-select-label>{{sort.sortField || options.sorting.placeholder}}</md-select-label><md-option value="{{sf.name}}" ng-repeat="sf in sort.sortingFields">{{sf.name}}</md-option></md-select></md-input-container></div><div ui-grid="options.gridOptions" ui-grid-edit="" ui-grid-cellnav="" ui-grid-selection="" ui-grid-auto-resize="" ng-class="getClass()" ng-style="getTableHeight()"></div></div>'),e.put("app/templates/welcome-popup.html",'<md-dialog flex="60" flex-sm="90" class="welcome-popup"><div class="header" layout="row" layout-align="end center"><img src="assets/images/welcome-close.png" ng-click="close()"></div><div class="content"><h2>Welcome to gjests!</h2><p>To get started, please go to User Profile to upload your <b>company\'s logo</b>, and fill out your <b>company\'s details</b> and <b>contact info</b>.</p><p>All communication will include your company\'s/your <b>social media handles</b>.<br>Please enter the links for your guests to connect.</p></div></md-dialog><img src="assets/images/welcome-select.png" class="welcome-select" ng-style="getStyles()">'),e.put("app/templates/welcome.html",'<div><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Welcome to gjests{{permissionTitle}}</h3></div><div layout="row" layout-align="space-between stretch" class="margin-top" layout-sm="column" layout-align-sm="start stretch"><div layout="column" layout-align="space-between stretch" flex=""><div class="billet"><h4>Download gjests app</h4><md-content><a href="https://geo.itunes.apple.com/us/app/gjests/id1001494301?mt=8" target="_blank"><img alt="iOS app on App Store" src="assets/images/app-store.png"></a> <a href="https://play.google.com/store/apps/details?id=com.gjests.app" target="_blank"><img alt="Android app on Google Play" src="assets/images/google-play.png"></a></md-content></div><div class="billet" flex=""><h4>Updates</h4><md-content><ul><li>We are open to public. Please <a href="mailto:INFO@gjests.com">contact us</a> if you want to continue using gjests for free</li><li>Email delivery status feature is ready (beta)</li><li>Adding new RSVP features in June</li><li>Offline mode ready in July</li></ul></md-content></div></div><div class="billet" flex=""><h4>Questions?</h4><md-content><ul><li><a href="http://www.gjests.com/questions/2016/6/7/adding-guest-to-or-deleting-guests-from-the-guest-list" target="_blank">Adding/Deleting guests to an Event</a></li><li><a href="https://vimeo.com/169579329" target="_blank">How to create a guest list event</a></li><li><a href="https://vimeo.com/160246973" target="_blank">How to create an RSVP event</a></li><li><a href="http://www.gjests.com/questions/2016/3/23/how-limit-check-in" target="_blank">How to limit check-in</a></li><li><a href="http://www.gjests.com/questions/2016/3/23/confirmation-email-rsvp-invite" target="_blank">How does gjests confirmation email & RSVP invite look like</a></li><li><a href="http://www.gjests.com/blog/2016/3/22/qzio5bse3b2ca3zgp65hsldqcz52h4" target="_blank">Contributor levels: Manager, Promoter, and Staff</a></li><li><a href="http://www.gjests.com/questions/2016/3/23/public-event-vs-private-event" target="_blank">Private VS Public event</a></li><li><a href="http://www.gjests.com/questions/2016/3/23/upload-excelgoogle-excelcsv-formats" target="_blank">Upload formats</a></li></ul></md-content></div></div><div class="billet margin-top" layout="column" layout-align="start stretch"><h4>Upcoming events</h4><event-list events="currentEvents" options="options"></event-list></div></div>'),e.put("app/events/templates/edit-event.html",'<div><div ng-show="initializing"><h4 style="color:#aaaaaa">Loading Event...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-if="!initializing"><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Edit {{event.title}}</h3></div><event-details event="event"></event-details></div></div>'),e.put("app/events/templates/email-stats.html",'<div ng-init="init()" class="email-stats"><div ng-show="initializing"><h4>Loading Event...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-show="!initializing" class="email-stats"><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Email Management</h3></div><event-preview event="event"></event-preview><div layout="row" layout-align="space-between center" class="tabs"><md-button ng-class="getSelected(0)" ng-click="selectedIndex = 0" flex="">Email Status</md-button></div><div class="tab-content"><ng-switch on="selectedIndex"><div role="tabpanel" id="tab1-content" aria-labelledby="tab1" ng-switch-when="0"><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular><ui-grid-responsive options="options"></ui-grid-responsive><div flex="" layout="row" layout-align="end center" class="margin-top" ng-if="!fetchingData"><md-progress-circular class="md-hue-2 near" md-mode="indeterminate" ng-show="sendingData"></md-progress-circular><md-button class="raised-btn" ng-click="resend()" ng-disabled="sendingData || selected.length === 0">Resend</md-button></div></div></ng-switch></div></div></div>'),e.put("app/events/templates/event-add-guestlist.html",'<div><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Create Guest List</h3></div><guest-list-editor list="currentGlist" on-save="goBackToEvent" on-before-save="checkSubscription"></guest-list-editor></div>'),e.put("app/events/templates/event-checkin.html",'<div class="event-checkin"><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Check In Guests</h3></div><div ng-show="initializing"><h4>Loading Event...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-show="!initializing"><div layout="row" layout-align="space-between center" class="block-field"><md-radio-group ng-model="filter.status"><md-radio-button value="pending" class="radio-icon"><img ng-src="assets/images/icons/pending.png">Pending</md-radio-button><md-radio-button value="checked" class="radio-icon"><img ng-src="assets/images/icons/checked-in.png">Checked</md-radio-button></md-radio-group><a href="{{getExportExcelUrl()}}" class="md-button raised-btn">EXPORT</a></div><div class="block-field"><ui-grid-responsive options="options"></ui-grid-responsive></div></div></div>'),e.put("app/events/templates/event-details.tmpl.html",'<div ng-init="init()" class="event-details-page"><div layout="row" layout-align="space-between center" class="steps margin-top"><div class="step"><div class="line"></div><h4 ng-class="getSelected(0) ? \'text-bg\' : \'\'">Details</h4><md-button class="md-fab" ng-class="getSelected(0) ? \'logo-bg\' : \'\'" ng-disabled="isPromoter()" ng-click="selectedIndex = 0" aria-label="Details"></md-button></div><div flex="" class="line"></div><div class="step"><div class="line"></div><h4 ng-class="getSelected(1) ? \'text-bg\' : \'\'">Event</h4><md-button class="md-fab" ng-class="getSelected(1) ? \'logo-bg\' : \'\'" ng-disabled="!event.id || isPromoter()" ng-click="selectedIndex = 1" aria-label="Event"></md-button></div><div flex="" class="line"></div><div class="step"><div class="line"></div><h4 ng-class="getSelected(2) ? \'text-bg\' : \'\'">Invite</h4><md-button class="md-fab" ng-class="getSelected(2) ? \'logo-bg\' : \'\'" ng-disabled="!event.id || isPromoter()" ng-click="selectedIndex = 2" aria-label="Invite"></md-button></div><div flex="" class="line"></div><div class="step"><div class="line"></div><h4 ng-class="getSelected(3) ? \'text-bg\' : \'\'">Guests</h4><md-button class="md-fab" ng-class="getSelected(3) ? \'logo-bg\' : \'\'" ng-disabled="!event.id" ng-click="selectedIndex = 3" aria-label="Guests"></md-button></div><div flex="" class="line"></div><div class="step"><div class="line"></div><h4 ng-class="getSelected(4) ? \'text-bg\' : \'\'">Preview</h4><md-button class="md-fab" ng-class="getSelected(4) ? \'logo-bg\' : \'\'" ng-disabled="!event.id" ng-click="selectedIndex = 4" aria-label="Preview"></md-button></div></div><ng-switch on="selectedIndex"><div role="tabpanel" id="tab1-content" aria-labelledby="tab1" ng-switch-when="0" md-swipe-left="next($event)" md-swipe-right="previous($event)"><div><form name="eventForm"><div class="block-field"><div layout="" layout-sm="column"><md-input-container flex="75" md-no-float=""><h4>Event Title</h4><input required="" name="title" ng-model="event.title" placeholder="Enter event title, e.g. Holiday Party"></md-input-container><md-input-container flex="25" md-no-float=""><h4>Event Category</h4><md-select required="" name="category" placeholder="Select event category" ng-model="event.category"><md-select-label>{{event.category || \'Select event category\'}}</md-select-label><md-option value="{{t}}" ng-repeat="t in eventCategories"><img ng-src="assets/images/category_icons/blue_{{t | lowercase | spaceless}}.png" width="24" height="24" style="margin-right: 10px">{{t}}</md-option></md-select></md-input-container></div><div layout="" layout-sm="column"><md-input-container flex="75" md-no-float=""><h4>Event Location</h4><input type="text" name="location" ng-change="clearLocation()" required="" ng-autocomplete="" ng-model="location.value" options="{watchEnter: true}" details="location.details" placeholder="Enter event location"><md-icon class="input-icon" md-svg-src="assets/images/SVG/location.svg"></md-icon></md-input-container><md-input-container flex="25" md-no-float=""><h4>Event Capacity</h4><input name="capacity" required="" ng-model="event.capacity" type="number" min="0" step="1" placeholder="Enter event capacity"><md-icon class="input-icon" md-svg-src="assets/images/SVG/capacity.svg"></md-icon></md-input-container></div></div><div layout="" layout-sm="column" class="block-field date"><fieldset flex="" md-no-float="" ng-disabled="eventStarted"><h4>Starts</h4><datetimepicker ng-model="dt.startEventDateTime" name="time" min-date="minDate" minue-step="minuteStep" date-format="dd-MMM-yyyy" date-options="dateOptions" readonly-date="true"></datetimepicker></fieldset><div flex="" md-no-float=""><h4>Ends</h4><datetimepicker ng-model="dt.endEventDateTime" name="endTime" min-date="endMinDate()" minute-step="minuteStep" date-format="dd-MMM-yyyy" date-options="dateOptions" readonly-date="true"></datetimepicker></div></div><div layout="" layout-sm="column" class="block-field"><md-input-container flex="" md-no-float=""><h4>Confirmation Email</h4><textarea name="details" ng-model="event.description" columns="1" placeholder="Event Details (to be included in confirmation email)"></textarea></md-input-container><md-input-container flex="" md-no-float=""><h4>RSVP Details</h4><textarea name="details" ng-model="event.additionalDetails" columns="1" placeholder="Event Details (to be included in RSVP page)"></textarea></md-input-container></div></form></div><div layout="row" layout-align="end center"><md-progress-circular class="md-hue-2 near" md-mode="indeterminate" ng-show="savingEvent"></md-progress-circular><md-button class="raised-btn" ng-click="next($event, eventForm)">Next</md-button></div></div><div role="tabpanel" id="tab2-content" aria-labelledby="tab2" ng-switch-when="1" md-swipe-left="next($event)" md-swipe-right="previous($event)" class="event-step"><div><form name="rsvpForm"><div class="block-field" layout="column"><h4>Select the type of Event</h4><md-radio-group ng-model="event.type" layout="" layout-sm="column"><md-content layout="row" layout-align="left center" flex="20"><md-tooltip md-direction="top">Send event invite to guests to confirm the attendance</md-tooltip><md-radio-button ng-value="2" aria-label="RSVP Event" ng-disabled="subscriptionRestrictions(\'RSVP\')" ng-click="subscriptionRestrictions(\'RSVP\', null, $event)">RSVP Event</md-radio-button></md-content><md-content layout="row" layout-align="left center" flex="20"><md-tooltip md-direction="top">Send confirmation email to guests that are attending the event</md-tooltip><md-radio-button ng-value="1" aria-label="Guest List Event">Guest List Event</md-radio-button></md-content></md-radio-group></div><div class="block-field" layout="column" ng-show="event.type !== 1"><h4>{{event.type === 3 ? \'Send ticket purchase invite to:\' : \'Send RSVP Invite to:\'}}</h4><md-radio-group ng-model="event.rsvpType" layout="" layout-sm="column"><md-content layout="row" layout-align="left center" flex="20"><md-tooltip md-direction="top">{{event.type === 3 ? \'Only these guests can purchase tickets. Tickets & Invites are non transferable\' : \'Only these guests can rsvp the event. Invite is non transferable\'}}</md-tooltip><md-radio-button ng-value="2" aria-label="{{event.type === 3 ? \'Private\' : \'Private/Invited guests\'}}">{{event.type === 3 ? \'Private\' : \'Private/Invited guests\'}}</md-radio-button></md-content><md-content layout="row" layout-align="left center" flex="20"><md-tooltip md-direction="top">{{event.type === 3 ? \'Ticket sale is open to public. Tickets are transferable\' : \'Anyone can rsvp the event with the rsvp link\'}}</md-tooltip><md-radio-button ng-value="3" aria-label="{{event.type === 3 ? \'Public\' : \'Public Guests\'}}" ng-click="event.additionalGuests = 1">{{event.type === 3 ? \'Public\' : \'Public Guests\'}}</md-radio-button></md-content></md-radio-group></div><div class="block-field" layout="column" ng-show="event.type === 3"><h4>Ticket types:</h4><div layout="row" class="ticket-blocks"><div ng-repeat="ticket in tickets track by $index" class="ticket-block" ng-class="ticket.control.edit ? \'edit\' : \'\'"><div layout="column" ng-if="ticket.control.edit"><div layout="row" layout-align="space-between center" class="top"><md-input-container md-no-float=""><input ng-model="ticket.data.name" aria-label="Ticket name" placeholder="Enter ticket name"></md-input-container><md-input-container md-no-float="" class="currency"><input ng-model="ticket.data.price" aria-label="Ticket price" type="number" min="1"></md-input-container></div><div layout="column" class="bottom"><div md-no-float="" class="block-field start-date"><h4>Set start when</h4><md-radio-group ng-model="ticket.data.previousId" layout="column"><md-radio-button ng-repeat="t in tickets track by $index" ng-value="t.data.id" ng-if="$index !== $parent.$index && t.data.id" aria-label="{{t.data.name}} sale ends"><h4>{{t.data.name}} sale ends</h4></md-radio-button><md-radio-button ng-value="0" aria-label="Set start date and time"><h4>Set start date and time</h4></md-radio-button><md-content ng-if="ticket.data.previousId === 0"><md-tooltip md-direction="top">Set start date and time</md-tooltip><datetimepicker ng-model="ticket.data.startTime" min-date="minDate" max-date="maxTicketDate()" minute-step="minuteStep" date-format="dd-MMM-yyyy" date-options="dateOptions" readonly-date="true"></datetimepicker></md-content></md-radio-group></div><div class="block-field radio-height"><md-radio-group ng-model="ticket.control.endBy" layout="column"><md-radio-button ng-value="0" aria-label="Set end by date and time"><h4>Set end by date and time</h4></md-radio-button><md-content ng-if="ticket.control.endBy === 0"><md-tooltip md-direction="top">Set timer for ticket sales end</md-tooltip><datetimepicker ng-model="ticket.data.expirationTime" min-date="ticket.data.startTime" max-date="maxTicketDate()" minute-step="minuteStep" date-format="dd-MMM-yyyy" date-options="dateOptions" readonly-date="true"></datetimepicker></md-content><md-radio-button ng-value="1" aria-label="Set end by quantity"><h4>Set end by quantity</h4></md-radio-button><md-content ng-if="ticket.control.endBy === 1"><md-tooltip md-direction="top">Set quantity for ticket sales end</md-tooltip><spinner ng-model="ticket.data.quantity" min="{{ticket.data.soldTicketsCount === 0 ? 1 : ticket.data.soldTicketsCount}}"></spinner></md-content></md-radio-group></div><div class="block-field actions" layout="row" layout-align="center center"><md-button class="raised-btn" ng-click="updateTicket(ticket)" ng-disabled="!validateTicket(ticket) || ticket.control.waiting">Save</md-button><md-button class="raised-btn" ng-if="!ticket.data.id" ng-click="cancelTicket($index)" ng-disabled="ticket.control.waiting">Cancel</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="ticket.control.waiting"></md-progress-circular></div></div></div><div layout="column" ng-if="!ticket.control.edit"><div layout="row" layout-align="space-between center" class="top"><h4>{{ticket.data.name}}</h4><h3 class="currency">{{ticket.data.price}}</h3></div><div layout="column" class="bottom"><div class="block-field"><div ng-if="ticket.data.previousId === 0"><h4>Start date and time</h4><p>{{ticket.data.startTime | date : \'d MMM yyyy\' | uppercase}} <strong>{{ticket.data.startTime | date : \'h:mm a\'}}</strong></p></div><div ng-if="ticket.data.previousId > 0"><h4>Start by {{getTicketById(ticket.data.previousId).data.name}} sale ends</h4></div></div><div class="block-field"><div ng-if="ticket.control.endBy === 0"><h4>End by date and time</h4><p>{{ticket.data.expirationTime | date : \'d MMM yyyy\' | uppercase}} <strong>{{ticket.data.expirationTime | date : \'h:mm a\'}}</strong></p></div><div ng-if="ticket.control.endBy === 1"><h4>End by quantity</h4><p><strong>{{ticket.data.quantity}}</strong></p></div></div><div class="block-field actions" layout="row" layout-align="center center"><md-button class="icon-btn" ng-click="ticket.control.edit = true" ng-disabled="ticket.control.waiting" aria-label="Edit ticket"><md-tooltip md-direction="top">Edit ticket</md-tooltip><ng-md-icon icon="mode_edit" size="24"></ng-md-icon></md-button><md-button class="icon-btn" ng-click="deleteTicket(ticket)" ng-disabled="ticket.control.waiting" aria-label="Delete ticket"><md-tooltip md-direction="top">Delete ticket</md-tooltip><ng-md-icon icon="delete" size="24"></ng-md-icon></md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="ticket.control.waiting"></md-progress-circular></div></div></div></div></div></div><div layout="column" ng-show="event.type !== 1"><div class="block-field"><h4>Additional Guests:</h4><span layout="row" layout-align="start center" layout-sm="column" layout-align-sm="center start"><span>Guests are allowed to bring&nbsp;</span><spinner ng-model="event.additionalGuests"></spinner><span>&nbsp;additional people to the event.</span></span></div><div class="block-field date"><h4>RSVP expires on:</h4><datetimepicker ng-model="dt.endEventRsvpDateTime" min-date="minDate" max-date="endMaxDate()" minute-step="minuteStep" date-format="dd-MMM-yyyy" date-options="dateOptions" readonly-date="true"></datetimepicker></div></div></form></div><div layout="row" layout-align="end center" layout-sm="column" class="actions"><md-button class="raised-btn" ng-click="addNewTicket()" ng-show="event.type === 3">Add Ticket</md-button><md-button class="raised-btn" ng-click="previous()">Back</md-button><md-button class="raised-btn" ng-click="next($event, rsvpForm)">Next</md-button></div></div><div role="tabpanel" id="tab3-content" aria-labelledby="tab3" ng-switch-when="2" md-swipe-left="next($event)" md-swipe-right="previous($event)"><div><md-list><md-list-item layout="row" layout-sm="column"><div flex="70" flex-sm="100"><p>Upload your invite (jpg,gif, file formats supported)</p></div><div flex="30" layout="row" layout-align="end center" flex-sm="100"><md-button class="raised-btn" ng-file-select="onInviteSelected($files)" accept=".jpg,.png,.gif">UPLOAD</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></div></md-list-item></md-list><div layout="row"><div flex="" ng-style="getEventInvite(\'300px\')" class="event-image"></div></div></div><div layout="row" layout-align="end center" class="actions"><md-button class="raised-btn" ng-click="previous()">Back</md-button><md-button class="raised-btn" ng-click="next($event)">Next</md-button></div></div><div role="tabpanel" id="tab4-content" aria-labelledby="tab4" ng-switch-when="3" md-swipe-left="next($event)" md-swipe-right="previous($event)"><div><div class="block-field" remove-by-roles="promoter"><h4>Add confirmed guests</h4><md-list><md-list-item layout="row"><div flex=""><p>Link previous guest list</p></div><div flex="" layout="row" layout-align="end center"><md-button class="raised-btn" ng-click="onAddGLClicked($event, 1)">Link</md-button></div></md-list-item><md-list-item layout="row"><div flex=""><p>Create new guest list</p></div><div flex="" layout="row" layout-align="end center"><md-button class="raised-btn" ui-sref="main.create_gl_event({eventId: event.id, instanceType: 1})">Create</md-button></div></md-list-item></md-list></div><div class="block-field" ng-if="event.type !== 1" remove-by-roles="promoter"><h4>{{event.type === 3 ? \'Send ticket purchase invite to\' : \'Add RSVP guests to send RSVP invite\'}}</h4><md-list><md-list-item layout="row"><div flex=""><p>Link previous {{event.type === 3 ? \'Ticketing\' : \'RSVP\'}} list</p></div><div flex="" layout="row" layout-align="end center"><md-button class="raised-btn" ng-click="onAddGLClicked($event, event.type === 3 ? 3 : 2)">Link</md-button></div></md-list-item><md-list-item layout="row"><div flex=""><p>Create new {{event.type === 3 ? \'Ticketing\' : \'RSVP\'}} list</p></div><div flex="" layout="row" layout-align="end center"><md-button class="raised-btn" ui-sref="main.create_gl_event({eventId: event.id, instanceType: 2})">Create</md-button></div></md-list-item></md-list></div><div class="block-field"><div layout="row" layout-align="start center" layout-sm="column" layout-align-sm="center start"><h4>Guest Lists</h4><p class="info">(<span>Add/delete</span> guests to a guest list associates with this event here)</p></div><guest-list-instance-view event="event" lists="event.guestLists" options="gliOptions"></guest-list-instance-view></div></div><div layout="row" layout-align="end center" class="actions"><md-button class="raised-btn" ng-click="previous()" remove-by-roles="promoter">Back</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="savingEvent"></md-progress-circular><md-button class="raised-btn" ng-click="next($event, eventForm)" remove-by-roles="promoter" ng-cloak="">Next</md-button></div></div><div role="tabpanel" id="tab5-content" aria-labelledby="tab5" ng-switch-when="4" md-swipe-left="next($event)" md-swipe-right="previous($event)"><event-publish event-id="event.id" options="previewOptions"></event-publish></div></ng-switch></div>'),e.put("app/events/templates/event-dialog.tmpl.html",'<md-dialog aria-label="Edit" flex="" style="min-height: 80%"><md-content style="padding: 0;min-height:80%"><event-details event="currentEvent"></event-details></md-content><div class="md-actions" layout="row"><md-button ng-click="cancel()">Cancel</md-button><md-button ng-click="save()" class="md-primary">Save</md-button></div></md-dialog>'),e.put("app/events/templates/event-edit-guestlist.html",'<div><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Edit Guest List</h3></div><guest-list-instance-editor id="gliId" on-save="goBackToEvent" on-before-save="checkSubscription"></guest-list-instance-editor></div>'),e.put("app/events/templates/event-list.tmpl.html",'<div class="event-list"><h3 class="md-title" ng-show="events.length == 0">No events found</h3><div layout="row" layout-align="end center" class="margin-top" ng-if="options.filter.active"><md-input-container flex="40" flex-sm="100" md-no-float=""><input type="text" name="search" ng-model="filter.value" placeholder="Search Event"><md-icon class="input-icon" md-svg-src="assets/images/SVG/active-search.svg"></md-icon></md-input-container></div><md-list class="margin-top"><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular><md-list-item ng-repeat="event in events | filter:{title: filter.value} | limitTo:(options.limit || events.length) | orderBy: orderField" layout="row" layout-align="space-between center" layout-sm="column" layout-align-sm="start start" flex=""><div ng-if="!event.isActive" class="not-active" ng-click="showUpgradePopup($event)"></div><div ng-style="getEventInvite(event)" class="event-image"></div><div layout="column" layout-align="start stretch" flex="" class="event-details"><h3>{{event.title}}</h3><div layout="row" layout-align="space-between start" layout-sm="column"><div><p><b>Starts:</b>&nbsp;{{event.time | ignoreTimeZone | date:\'MMM dd, yyyy h:mma\'}}</p><p><b>Ends:</b>&nbsp;{{event.endTime | ignoreTimeZone | date : \'MMM dd, yyyy h:mma\'}}</p><div layout="row" layout-align="start center"><md-icon md-svg-src="assets/images/SVG/location.svg"></md-icon><p ng-bind-html="event.location"></p></div></div><div layout="row" ng-cloak="" layout-align="end center" layout-align-sm="center center" ng-hide="options.local" class="actions"><md-button class="icon-btn" remove-by-roles="promoter" ui-sref="main.event_checkin({eventId:{{event.id}}})" aria-label="CheckIn"><md-tooltip md-direction="top">{{options.stats ? \'Guests checkin stats\' : \'check guests in\'}}</md-tooltip><ng-md-icon icon="assignment_turned_in" size="24"></ng-md-icon></md-button><md-button class="icon-btn" remove-by-roles="staff" ng-if="!options.readyOnly" ui-sref="main.edit_event({eventId:{{event.id}}})" aria-label="Edit event"><md-tooltip md-direction="top">Edit event</md-tooltip><ng-md-icon icon="mode_edit" size="24"></ng-md-icon></md-button><md-button class="icon-btn" remove-by-roles="staff" ng-if="!options.readyOnly" ui-sref="main.event_summary({eventId:{{event.id}}})" aria-label="Preview event"><md-tooltip md-direction="top">Preview event</md-tooltip><md-icon md-svg-src="assets/images/SVG/play.svg" size="24"></md-icon></md-button><md-button class="icon-btn" remove-by-roles="staff,promoter" ng-if="!options.readyOnly" ui-sref="main.email_stats({eventId:{{event.id}}})" aria-label="Email Management"><md-tooltip md-direction="top">Email Management</md-tooltip><md-icon md-svg-src="assets/images/SVG/email.svg" size="24"></md-icon></md-button><md-button class="icon-btn" ui-sref="main.event_stats({eventId:{{event.id}}})" aria-label="Event stats"><md-tooltip md-direction="top">Event stats</md-tooltip><ng-md-icon icon="insert_chart" size="24"></ng-md-icon></md-button><md-button class="icon-btn" remove-by-roles="staff,promoter" ng-if="!options.readyOnly" ng-click="deleteEvent($event,event)" aria-label="Delete event"><md-tooltip md-direction="top">Delete event</md-tooltip><ng-md-icon icon="delete" size="24"></ng-md-icon></md-button></div></div></div></md-list-item></md-list></div>'),e.put("app/events/templates/event-preview.html",'<div class="event-preview margin-top" layout="row" layout-align="space-between stretch" layout-sm="column" layout-align-sm="start stretch"><div layout="row" layout-align="start center" layout-sm="column" layout-align-sm="center stretch" flex="60" flex-sm="100"><div ng-style="getEventInvite(\'230px\')" class="event-image"></div><div layout="column" layout-align="center stretch" class="event-descr" flex=""><h2>{{event.title}}</h2><div ng-bind-html="event.description | linky:\'_blank\'"></div><div class="links"><span ng-if="event.type === 2 && event.rsvpType === 3">RSVP link : <a href="{{event.rsvpUrl}}" target="_blank">{{event.rsvpUrl}}</a></span> <span ng-if="event.type === 3">Ticketing link : <a href="{{event.ticketingUrl}}" target="_blank">{{event.ticketingUrl}}</a></span></div></div></div><div layout="row" layout-align="end stretch" layout-sm="column" flex=""><div layout="column" layout-align="center start" flex="" flex-order-sm="2"><div class="time">{{event.time | ignoreTimeZone | date: \'h:mm a\'}}</div><div layout="column" layout-align="center start" class="event-prop" flex=""><div><img ng-src="assets/images/category_icons/gray_{{event.category | lowercase | spaceless}}.png" width="24" height="24">{{event.category}}</div><div class="location" layout="row"><md-icon md-svg-src="assets/images/SVG/location.svg"></md-icon><p ng-bind-html="event.location" flex=""></p></div></div></div><div class="date logo-bg" layout="column" layout-align="start center" layout-sm="row" flex-order-sm="1"><div class="dayOfWeek">{{event.time | ignoreTimeZone | date: \'EEE\' | uppercase}}</div><div class="month">{{event.time | ignoreTimeZone | date: \'MMM\' | uppercase}}</div><div class="day">{{event.time | ignoreTimeZone | date: \'d\'}}</div></div></div></div>'),e.put("app/events/templates/event-publish.html",'<div><div ng-show="initializing"><h4>Loading...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-show="!initializing"><event-preview event="event"></event-preview><guest-list-instance-view published="toPublish" lists="event.guestLists" options="glOptions"></guest-list-instance-view><div class="actions" layout="row" layout-align="end center"><md-button class="raised-btn" ng-hide="options.hideEdit" ng-click="editEvent()">Edit</md-button><md-button class="raised-btn" ng-click="checkGuestLists($event)">Publish</md-button></div></div></div>'),e.put("app/events/templates/event-stats.html",'<div ng-init="init()" class="event-stats event-type-{{eventType}}"><div ng-if="initializing"><h4>Loading Event...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-if="!initializing"><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3 class="capitalize">{{event.title}} Stats</h3></div><div layout="row" class="block-field"><event-preview flex="" event="event"></event-preview></div><h3 ng-if="event.guestLists.length === 0" class="block-field">Event has no guests</h3><div ng-if="event.guestLists.length > 0"><div layout="row" layout-align="space-between start" layout-sm="column" layout-align-sm="start stretch" class="block-field chart"><div layout="column" flex="50" flex-sm="100"><div ng-if="isRSVP() || (!isRSVP() && isMobile)"><h4 class="chart-title">Total Checked in Guests: {{totalCheckedIn}}</h4><div google-chart="" chart="chartObject"></div></div><div layout="row" layout-align="center center"><div class="details" ng-class="table1Visible ? \'up\' : \'down\'" hide-gt-sm="" ng-click="table1Visible = !table1Visible">See details</div></div><md-list ng-show="table1Visible"><md-list-item><div flex="25">Categories</div><div flex="25">Checked in</div><div flex="25">Total</div><div flex="25">Percentage</div></md-list-item><md-list-item ng-repeat="category in categories" style="background-color: {{category.color}};"><div flex="">{{category.name}}</div><div flex="">{{getCategoryStats(category.name).totalCheckedIn}}</div><div flex="">{{getCategoryStats(category.name).total}}</div><div flex="">{{getCategoryStats(category.name).total > 0 ? Math.round(getCategoryStats(category.name).totalCheckedIn / getCategoryStats(category.name).total * 100) + \'%\' : \'N/A\'}}</div></md-list-item></md-list></div><div layout="column" flex="" ng-if="eventType !== 1 || (eventType === 1 && !isMobile)"><div ng-if="!isRSVP() && !isMobile"><h4 class="chart-title">Total Checked in Guests: {{totalCheckedIn}}</h4><div google-chart="" chart="chartObject"></div></div><div layout="column" ng-if="isRSVP()"><div><h4 class="chart-title">Total RSVP: {{rsvp[1].total}}</h4><div google-chart="" chart="chartObjectRSVP"></div></div><div layout="row" layout-align="center center"><div class="details" ng-class="table2Visible ? \'up\' : \'down\'" hide-gt-sm="" ng-click="table2Visible = !table2Visible">See details</div></div><md-list ng-show="table2Visible"><md-list-item><div flex="">RSVP Data</div><div flex="10"></div></md-list-item><md-list-item ng-repeat="item in rsvp" style="background-color: {{item.color}};"><div flex="">{{item.name}}</div><div flex="10">{{item.total}}</div></md-list-item></md-list><div layout="row" layout-align="end center" layout-align-sm="center center" class="margin-top" ng-show="table2Visible"><a href="{{getExportExcelUrl()}}" class="md-button raised-btn">Export Rsvp Report</a></div><md-list class="margin-top" ng-show="table2Visible"><md-list-item><div flex="">RSVP Page</div><div flex="10"></div></md-list-item><md-list-item style="background-color: #f0f6fb;"><div flex="">Total Visitors</div><div flex="10">{{rsvpTotalVisitors}}</div></md-list-item></md-list></div></div></div><div class="block-field"><guest-list-instance-view event="event" lists="event.guestLists" options="gliOptions"></guest-list-instance-view></div></div></div></div>'),e.put("app/events/templates/event-summary.html",'<div ng-init="init()"><div layout="row" layout-wrap="" style="margin-bottom: 8px"><div flex="" class="section-title"><h3>Preview Event</h3></div></div><event-publish event-id="eventId"></event-publish></div>'),e.put("app/guest-lists/templates/create-list-management.html",'<div><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Create New Guest List</h3></div><guest-list-editor list="event.guestList"></guest-list-editor></div>'),e.put("app/guest-lists/templates/edit-list-management.html",'<div><div layout="row" layout-wrap=""><div flex="" class="section-title"><h3>Edit Guest List {{list.title}}</h3></div></div><guest-list-editor list="list"></guest-list-editor></div>'),e.put("app/guest-lists/templates/glist-import-dialog.html",'<md-dialog flex="80" flex-sm="95" class="glist-import-dialog"><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Link Previous Guest List</h3></div><div class="actions-sm" layout="row" layout-align="space-around center" hide-gt-sm=""><md-button ng-click="cancel()">Cancel</md-button><md-button class="raised-btn" ng-click="importGLists($event)">Import</md-button></div><md-content style="overflow-x: hidden"><guest-list-view selected="selected" options="options"></guest-list-view></md-content><div class="actions" layout="row" layout-align="end center" hide-sm=""><md-button ng-click="cancel()">Cancel</md-button><md-button class="raised-btn" ng-click="importGLists($event)">Import</md-button></div></md-dialog>'),e.put("app/guest-lists/templates/guest-checkin.html",'<div ng-init="init()" class="guest-checkin"><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Check In Guest</h3></div><div ng-show="fetchingData"><h4>Loading...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-hide="fetchingData"><div layout="column" layout-align="start stretch" class="content"><div flex=""><img src="assets/images/guest-checkin.png"></div><div flex=""><h3><u>{{guestListInstance.title}}</u></h3></div><div flex=""><h3><b>{{guestCheckin.guest.firstName}} {{guestCheckin.guest.lastName}}</b></h3></div><div flex=""><h3>{{guestCheckin.guest.type}}</h3></div><div flex=""><b>{{checkInGuests}}/{{maxGuests}} Checked</b></div><div flex="" class="notes" layout="row" layout-align="center center" layout-sm="column"><b>Note</b> <textarea ng-model="guestCheckin.guest.notes" columns="1" flex=""></textarea><md-button class="raised-btn" ng-click="updateNotes()" aria-label="UpdateNote"><md-icon md-svg-src="assets/images/SVG/checkWhite.svg"></md-icon></md-button></div><div flex="" class="spinner-plusminus-h" ng-show="notCheckInGuests > 0"><md-button class="raised-btn" ng-click="subtractGuestCount()" ng-disabled="checkingGuest">-</md-button><h4>{{guestCheckin.plus}}</h4><md-button class="raised-btn" ng-click="addGuestCount()" ng-disabled="checkingGuest">+</md-button></div><div flex=""><md-button class="raised-btn" ng-click="checkIn()" ng-disabled="checkingGuest" ng-show="notCheckInGuests > 0">check in</md-button><md-button class="raised-btn" ng-click="undoCheckIn()" ng-disabled="checkingGuest" ng-show="checkInGuests > 0">undo</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="checkingGuest"></md-progress-circular></div><div flex=""><md-button class="raised-btn" ng-click="back()">Back</md-button></div></div></div></div>'),e.put("app/guest-lists/templates/guest-list-editor.tmpl.html",'<div class="guest-list-editor"><div ng-show="loading"><h4>Loading Guest List...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-show="!loading"><div><form name="form.createGuestListForm"><div class="block-field"><div layout="" layout-sm="column"><md-input-container flex="75" md-no-float=""><h4>Guest List Title</h4><input type="text" ng-model="list.title" name="title" required="" placeholder="Enter Guest List Title" ng-change="onDataChange()"></md-input-container><md-input-container flex="25" md-no-float=""><h4>Guest Type</h4><ui-select required="" name="listType" ng-model="list.listType" search-enabled="false" ng-disabled="isPromoter()" ng-change="onDataChange()" flex=""><ui-select-match placeholder="Select Type">{{$select.selected}}</ui-select-match><ui-select-choices repeat="t in guestListTypes">{{t}}</ui-select-choices></ui-select></md-input-container></div></div><div class="block-field"><h4>Promoter</h4><md-input-container flex="" md-no-float=""><ui-select name="promoter" ng-model="list.promoter_Id" search-enabled="false" ng-disabled="isPromoter()" ng-change="onDataChange()"><ui-select-match placeholder="Select Promoter to Manage List">{{$select.selected.firstName}} {{$select.selected.lastName}}</ui-select-match><ui-select-choices repeat="promoter.Id as promoter in promoters">{{promoter.firstName}} {{promoter.lastName}}</ui-select-choices></ui-select></md-input-container></div></form></div><div class="block-field"><h4>Import Guests</h4><md-list><md-list-item layout="row" layout-align="space-between center" layout-sm="column" layout-align-sm="center stretch"><p flex="">Link previous guest list</p><div><md-button class="raised-btn" ng-click="onLinkClicked($event)">Link</md-button></div></md-list-item><md-list-item layout="row" layout-align="space-between center" layout-sm="column" layout-align-sm="center stretch"><p flex="">Upload new guest list (csv, xlsx) Upload: <a href="assets/docs/Guest List Upload format 1.xlsx">format 1</a>, <a href="assets/docs/Guest List Upload format 2.xlsx">format 2</a></p><div><md-button class="raised-btn" ng-file-select="onFileSelect($files)" accept=".csv,.xlsx,.xls">Upload</md-button></div></md-list-item><md-list-item layout="column" layout-align="space-between stretch" layout-sm="column" layout-align-sm="space-between stretch"><div layout-fill=""><p>Add Multiple Guests by Copying and Pasting</p><p><i>Paste your guest list here in these formats: <b>Name</b> OR <b>Name +1</b> OR <b>Name, Note, Pluses</b>.<br>Use line break for each guest.</i></p></div><div layout="row" layout-align="start center" layout-fill="" md-no-float=""><textarea class="guest-list-import-box" ng-model="textGuestList" placeholder="Example: Amy White +1" rows="10" md-no-autogrow=""></textarea></div><md-input-container layout="row" layout-align="end center" layout-fill=""><div layout-margin=""><md-button class="raised-btn" ng-click="onAddGuestsClicked($event)">Add</md-button></div></md-input-container></md-list-item></md-list></div><div class="block-field"><h4>Guests</h4><md-list><md-list-item layout="row"><div flex="" class="actions"><md-button class="raised-btn" ng-click="addMore()" ng-disabled="fetchingData">Add Guest</md-button><md-button class="raised-btn" ng-disabled="!rowSelected || fetchingData" ng-click="deleteSelectedRows()">Delete</md-button></div><div layout="row" layout-align="end center" hide-sm=""><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular><md-button class="raised-btn" ng-click="save()" ng-disabled="fetchingData">Save</md-button></div></md-list-item></md-list><ui-grid-responsive options="options"></ui-grid-responsive><div flex="" layout="row" layout-align="end center" hide-gt-sm=""><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular><md-button class="raised-btn" ng-click="save()" ng-disabled="fetchingData">Save</md-button></div></div></div></div>'),e.put("app/guest-lists/templates/guest-list-instance-editor.html",'<div class="guest-list-editor"><div ng-show="loading"><h4>Loading Guest List...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-show="!initializing"><div><form name="form.createGuestListForm"><div class="block-field"><div layout="" layout-sm="column"><md-input-container flex="75" md-no-float=""><h4>Guest List Title</h4><input type="text" ng-model="gli.title" name="title" required="" placeholder="Enter Guest List Title" ng-change="onDataChange()"></md-input-container><md-input-container flex="25" md-no-float=""><h4>Guest Type</h4><ui-select required="" name="listType" ng-model="gli.listType" ng-disabled="\'true\'" search-enabled="false" flex=""><ui-select-match placeholder="Select Type">{{$select.selected}}</ui-select-match><ui-select-choices repeat="t in guestListTypes">{{t}}</ui-select-choices></ui-select></md-input-container></div></div><div class="block-field"><h4>Promoter</h4><md-input-container flex="" md-no-float=""><ui-select name="promoter" ng-model="gli.promoter_Id" search-enabled="false" ng-disabled="isPromoter()" ng-change="onDataChange()"><ui-select-match placeholder="Select Promoter to Manage List">{{$select.selected.firstName}} {{$select.selected.lastName}}</ui-select-match><ui-select-choices repeat="promoter.Id as promoter in promoters">{{promoter.firstName}} {{promoter.lastName}}</ui-select-choices></ui-select></md-input-container></div></form></div><div class="block-field"><h4>Import Guests</h4><md-list><md-list-item layout="row" layout-align="space-between center" layout-sm="column" layout-align-sm="center stretch"><p flex="">Link previous guest list</p><div><md-button class="raised-btn" ng-click="onLinkClicked($event)">Link</md-button></div></md-list-item><md-list-item layout="row" layout-align="space-between center" layout-sm="column" layout-align-sm="center stretch"><p flex="">Upload new guest list (csv, xlsx) Upload: <a href="assets/docs/Guest List Upload format 1.xlsx">format 1</a>, <a href="assets/docs/Guest List Upload format 2.xlsx">format 2</a></p><div><md-button class="raised-btn" ng-file-select="onFileSelect($files)" accept=".csv,.xlsx,.xls">Upload</md-button></div></md-list-item><md-list-item layout="column" layout-align="space-between stretch" layout-sm="column" layout-align-sm="space-between stretch"><div layout-fill=""><p>Add Multiple Guests by Copying and Pasting</p><p><i>Paste your guest list here in these formats: <b>Name</b> OR <b>Name +1</b> OR <b>Name, Note, Pluses</b>.<br>Use line break for each guest.</i></p></div><div layout="row" layout-align="start center" layout-fill="" md-no-float=""><textarea class="guest-list-import-box" ng-model="textGuestList" placeholder="Example: Amy White +1" rows="10" md-no-autogrow=""></textarea></div><md-input-container layout="row" layout-align="end center" layout-fill=""><div layout-margin=""><md-button class="raised-btn" ng-click="onAddGuestsClicked($event)">Add</md-button></div></md-input-container></md-list-item></md-list></div><div class="block-field"><h4>Guests</h4><md-list><md-list-item layout="row"><div flex="" class="actions"><md-button class="raised-btn" ng-click="addMore()" ng-disabled="fetchingData">Add Guest</md-button><md-button class="raised-btn" ng-disabled="!rowSelected || fetchingData" ng-click="deleteSelectedRows()">Delete</md-button></div><div layout="row" layout-align="end center" hide-sm=""><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular><md-button class="raised-btn" ng-click="save()" ng-disabled="fetchingData">Save</md-button></div></md-list-item></md-list><ui-grid-responsive options="options"></ui-grid-responsive><div flex="" layout="row" layout-align="end center" hide-gt-sm=""><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular><md-button class="raised-btn" ng-click="save()" ng-disabled="fetchingData">Save</md-button></div></div></div></div>'),e.put("app/guest-lists/templates/guest-list-instance-viewer.html",'<div class="guest-list-instance-viewer"><md-list class="zebra" ng-show="lists.length > 0"><md-list-item hide-sm=""><div flex="{{flexWidth[0]}}">Title</div><div flex="{{flexWidth[1]}}">Category</div><div flex="{{flexWidth[2]}}" ng-if="options.stats">Checked in</div><div flex="{{flexWidth[3]}}" ng-if="!options.stats">Total</div><div flex="{{flexWidth[4]}}" ng-if="options.stats">Unconfirmed</div><div flex="{{flexWidth[5]}}" ng-if="options.stats">Total</div><div flex="{{flexWidth[6]}}" ng-if="!options.stats">Capacity</div><div flex="{{flexWidth[7]}}">Type</div><div flex="{{flexWidth[8]}}" ng-if="options.publish" class="center">Send Invites</div><div flex="{{flexWidth[9]}}" ng-if="options.publish && isShowColumn(\'published\')" class="center">Sent</div><div flex="" ng-if="!options.readOnly" style="text-align: right">{{isPromoter() ? \'Edit\' : \'Edit/Delete\'}}</div></md-list-item><md-list-item ng-repeat="instance in lists"><div layout="row" layout-sm="column" flex=""><dl flex="{{flexWidth[0]}}" flex-sm="100"><dt hide-gt-sm="">Title</dt><dd>{{instance.title}}</dd></dl><dl flex="{{flexWidth[1]}}" flex-sm="100"><dt hide-gt-sm="">Category</dt><dd>{{instance.listType}}</dd></dl><dl flex="{{flexWidth[2]}}" flex-sm="100" ng-if="options.stats"><dt hide-gt-sm="">Checked in</dt><dd>{{getActualGuests(instance)}}</dd></dl><dl flex="{{flexWidth[3]}}" flex-sm="100" ng-if="!options.stats"><dt hide-gt-sm="">Total</dt><dd>{{getTotalGuests(instance)}}</dd></dl><dl flex="{{flexWidth[4]}}" flex-sm="100" ng-if="options.stats"><dt hide-gt-sm="">Unconfirmed</dt><dd>{{getUnconfirmedGuests(instance)}}</dd></dl><dl flex="{{flexWidth[5]}}" flex-sm="100" ng-if="options.stats"><dt hide-gt-sm="">Total</dt><dd>{{getTotalGuests(instance)}}</dd></dl><dl flex="{{flexWidth[6]}}" flex-sm="100" ng-if="!options.stats"><dt hide-gt-sm="">Capacity</dt><dd ng-if="!options.details">{{instance.capacity}}</dd><dd ng-if="options.details" class="no-padding"><md-input-container ng-if="options.details"><md-tooltip md-direction="top">Enter # of guests that can be checked in</md-tooltip><input name="capacity" ng-model="instance.capacity" ng-disabled="options.readOnly || isPromoter()" type="number" min="0" step="1" ng-blur="onCapacityChanged(instance)" aria-label="capacity"></md-input-container></dd></dl><dl flex="{{flexWidth[7]}}" flex-sm="100"><dt hide-gt-sm="">Type</dt><dd ng-if="instance.instanceType === 1">Guest</dd><dd ng-if="instance.instanceType === 2 || instance.instanceType === 4">RSVP</dd></dl><dl flex="{{flexWidth[8]}}" flex-sm="100" ng-if="options.publish" class="center"><dt hide-gt-sm="">Send Invites</dt><dd class="no-padding"><md-checkbox ng-checked="isPublished(instance)" ng-click="togglePublished(instance)" aria-label="Import" ng-show="true"><md-tooltip md-direction="top">select list to send invites</md-tooltip></md-checkbox></dd></dl><dl flex="{{flexWidth[9]}}" flex-sm="100" ng-if="options.publish && isShowColumn(\'published\')" class="center"><dt hide-gt-sm="">Sent</dt><dd class="no-padding"><md-icon class="single-icon" md-svg-src="assets/images/SVG/sent.svg" ng-if="instance.published"></md-icon></dd></dl><dl flex="" ng-cloak="" ng-if="!options.readOnly"><dt hide-gt-sm="">{{isPromoter() ? \'Edit\' : \'Edit/Delete\'}}</dt><dd class="actions"><div layout="row" layout-align="end center"><div><md-button class="icon-btn" ng-click="editInstance($event,instance)" aria-label="Edit"><ng-md-icon icon="mode_edit" size="24"></ng-md-icon></md-button></div><div><md-button class="icon-btn" ng-click="deleteInstance($event,instance)" aria-label="Delete" remove-by-roles="promoter"><ng-md-icon icon="delete" size="24"></ng-md-icon></md-button></div><md-checkbox ng-checked="glistSelected1(glist)" ng-click="toggleSelected(glist)" aria-label="Import" ng-show="options.enableSelection"></md-checkbox></div></dd></dl></div></md-list-item></md-list><div layout="row" layout-align="end center" ng-show="lists.length > 0 && options.showSummary" class="margin-top totals"><h4>Total Guest: {{getGrandTotalGuests()}}</h4><h4>Total Capacity: {{getGrandTotalCapacity()}}</h4></div><div class="waiting"><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></div></div>'),e.put("app/guest-lists/templates/guest-list-management.html",'<div><md-list style="background-color: white"><md-item><md-item-content><div class="md-tile-left"><img ng-src="{{event.photo}}" class="face" style="height: 60px"></div><div class="md-tile-content"><h3>Browse and edit previous guests lists</h3></div><md-button class="raised-btn" ui-sref="main.edit_list_management">Edit</md-button></md-item-content><md-divider></md-divider></md-item><md-item><md-item-content><div class="md-tile-left"><img ng-src="{{event.photo}}" class="face" style="height: 60px"></div><div class="md-tile-content"><h3>Upload new guest list (csv)</h3></div><md-button class="raised-btn" ng-file-select="onFileSelect($files)" accept=".csv">Upload</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></md-item-content><md-divider ng-if="!options.hideManualImport"></md-divider></md-item><md-item ng-hide="options.hideManualImport"><md-item-content><div class="md-tile-left"><img ng-src="{{event.photo}}" class="face" style="height: 60px"></div><div class="md-tile-content"><h3>Manually enter your guest list</h3></div><md-button class="raised-btn" ui-sref="main.create_list_management">Enter</md-button></md-item-content></md-item></md-list></div>'),e.put("app/guest-lists/templates/guest-list-viewer.html",'<div ng-init="getGuestLists()"><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular><h3 class="md-title" ng-show="guestLists.length === 0">No guest lists found</h3><div ng-show="guestLists.length > 0"><ui-grid-responsive options="options"></ui-grid-responsive></div></div>'),e.put("app/landing/templates/landing-custom.html",'<div layout="column" layout-align="center stretch" class="custom"><div class="content" ng-show="loading" layout="row" layout-align="center center" flex=""><h4>Loading ...</h4><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></div><div layout="row" layout-align="space-between stretch" layout-sm="column" ng-show="!loading" class="content"><div flex="50" flex-sm="100" class="landing-bg" layout="column" layout-align="space-around center"><img src="assets/images/landing/landing-logo-custom-top.png"><div layout="column" layout-align="center center"><img src="assets/images/landing/landing-logo-custom-middle.png"> <span>DJ Chelsea Leyland | DJ MAAD*MOISELLE</span></div><img src="assets/images/landing/landing-logo-custom-bottom.png"></div><div layout="column" layout-align="space-between stretch" flex="50" flex-sm="100"><div layout="column" layout-align="center center" flex="50" class="event-details"><p>Join Us Poolside</p><br><p><strong>{{event.event.time | ignoreTimeZone | date:\'EEEE, MMM d | ha\'}} - {{event.event.endTime | ignoreTimeZone | date:\'ha\'}}</strong></p><p><strong>{{getCustomLocation()}}</strong></p><br><p><strong>#POPSUGARcc</strong></p></div><div layout="column" layout-align="center center" flex="" class="landing-form"><h4 ng-if="success" class="success">{{message}}</h4><form name="rsvpLandingForm"><div class="form-item" ng-if="public && !event.event.isRsvpExpired"><label>Name</label> <input type="text" name="name" ng-model="rsvp.name" required=""></div><div class="form-item" ng-if="public && !event.event.isRsvpExpired"><label>Email</label> <input type="email" name="email" ng-model="rsvp.email" required=""></div><div class="form-item"><label>Plus</label> <input type="number" name="plus" ng-model="rsvp.plus" min="0" max="{{event.event.additionalGuests}}"></div><div class="actions" ng-if="!success"><a class="md-button raised-btn" ng-click="onSubmitClicked(rsvpLandingForm)" ng-disabled="waiting">RSVP</a></div><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="waiting"></md-progress-circular></form></div></div></div><div class="footer"><p>Powered by <a href="http://gjests.com" target="_blank">gjests</a></p></div></div>'),e.put("app/landing/templates/landing-ticketing-thank-you.html",'<div layout="column" layout-align="center stretch"><div class="header" flex="" layout="row" layout-align="space-between center"><img ng-src="{{getCompanyLogo()}}" height="130"> <img src="assets/images/gliist_logo_landing.png" alt="logo"></div><div class="content" layout="column" layout-align="start stretch" flex=""></div><div class="footer" flex="" layout="row" layout-align="space-between center" layout-sm="column"><div><p>Please note that all sales are final.<br><span>And please share with awesome friends - our community grows through amazing people like you spreading the word.</span></p></div><md-button class="raised-btn" ng-click="purchase()">Get Tickets</md-button></div></div><div layout="column" layout-align="center center" class="landing-ticketing-thank-you"><div class="header"><img class="header-image" ng-src="{{getCompanyLogo()}}" height="60px"><img class="header-logo" src="assets/images/landing/landing-logo.png" alt="logo"></div><div class="content"><div layout="row" layout-align="space-between stretch"><div class="event-header" flex=""><h2>Thank you <span>Jocelyn Loo</span> for purchasing your ticket.</h2><h4>Your ticket details have been emailed to <span>jocelynloo@gmail.com</span></h4>Order #: 096409959711</div><div class="event-tickets">Ticket<br><span>1</span></div></div><div layout="row" layout-align="space-between stretch"><div class="event-details" flex=""><img src="{{event.event.invitePicture}}" height="212px"><div class="left"><h2>{{event.event.title}}</h2><div class="event-date"><div class="month">{{event.event.time | ignoreTimeZone | date: \'MMM\' | uppercase}}</div><div class="day">{{event.event.time | ignoreTimeZone | date: \'d\'}}</div><div class="day-week">{{event.event.time | ignoreTimeZone | date: \'EEE\' | uppercase}}</div><div class="time">{{event.event.time | ignoreTimeZone | date: \'h:mm\'}}</div><div class="ampm">{{event.event.time | ignoreTimeZone | date: \'a\'}}</div></div><div class="event-location"><div class="category">{{event.event.category}}</div><div class="address">{{event.event.location}}</div></div></div></div><div class="event-price"><div><h2>GA 2</h2>General Admission</div><div>Early Bird Passes<br><span class="price">$498</span></div><div><span>*</span>Event is 21 and over Save paper + show us the digital ticket. No need for a print out.</div></div></div><div layout="row" layout-align="space-between stretch"><div class="event-descr" flex="">{{event.event.description}}</div></div></div><div class="footer" layout="row" layout-align="space-between center"><div><p>Please note that we don\'t offer refunds.<br><span>And please share with awesome friends - our community grows through amazing people like you spreading the word.</span></p></div><div><md-button class="md-primary md-raised">View Event Details</md-button></div></div></div>'),e.put("app/landing/templates/landing-ticketing.html",'<div layout="column" layout-align="center stretch"><div class="header" flex="" layout="row" layout-align="space-between center"><img ng-src="{{getCompanyLogo()}}" height="130"> <img src="assets/images/gliist_logo_landing.png" alt="logo"></div><div class="content" layout="column" layout-align="start stretch" flex=""><event-preview flex="" event="event.event"></event-preview><md-list class="margin-top"><md-list-item><div flex="">Ticket type</div><div flex="20">Price</div><div flex="20">Quantity</div></md-list-item><md-list-item ng-repeat="ticket in tickets track by $index"><div flex="">{{ticket.name}}</div><div flex="20">$ {{ticket.price}}</div><div flex="20"><spinner ng-model="ticket.quantity" view="h"></spinner></div></md-list-item></md-list><div layout="row" layout-align="start center" layout-sm="column" class="promo"><div>Promo Code</div><md-input-container md-no-float=""><input type="text" placeholder="Please Enter your promo code"></md-input-container><md-button class="raised-btn">Apply Code</md-button></div></div><div class="footer" flex="" layout="row" layout-align="space-between center" layout-sm="column"><div><p>Please note that all sales are final.<br><span>And please share with awesome friends - our community grows through amazing people like you spreading the word.</span></p></div><md-button class="raised-btn" ng-click="purchase()">Get Tickets</md-button></div></div>'),e.put("app/landing/templates/landing.html",'<div layout="column" layout-align="center stretch"><div class="header" flex="" layout="row" layout-align="center center"><img ng-src="{{getCompanyLogo()}}" height="130"></div><div class="content" ng-show="loading" layout="row" layout-align="center center" flex=""><h4>Loading ...</h4><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></div><div class="content" ng-show="!loading" layout="column" layout-align="start center" flex=""><h4 ng-if="(public && !event.event.isRsvpExpired) || !event.guest.firstName">Dear guest, you are cordially invited to this event.</h4><h4 ng-if="!public && !event.event.isRsvpExpired && event.guest.firstName">Dear {{event.guest.firstName}} {{event.guest.lastName}}, you are cordially invited to this event.</h4><h4 ng-if="!public && !event.event.isRsvpExpired"></h4><div class="event-image"><img class="header-image" src="{{event.event.invitePicture}}" height="295"></div><div class="title"><h4>Event:</h4><h3>{{event.event.title}}</h3></div><div layout="row" layout-sm="column" class="blocks event-details"><div layout="column"><div class="item"><div class="item-label">Date + Time:</div><div class="item-text">{{event.event.time | ignoreTimeZone | date:\'MMMM d, yyyy h:mm a\'}}</div></div><div class="item"><div class="item-label">Location:</div><div class="item-text" ng-bind-html="event.event.location"></div></div><div class="item"><div class="item-label">Details:</div><div class="item-text" ng-bind-html="event.event.additionalDetails | linky:\'_blank\' | nl2br"></div></div></div><div layout="column"><div class="item-label">RSVP:</div><h4 ng-if="success" class="success">{{message}}</h4><form name="rsvpLandingForm"><div class="form-item" ng-if="(public && !event.event.isRsvpExpired) || nameIsMissing"><label>Name</label> <input type="text" name="name" ng-model="rsvp.name" required=""></div><div class="form-item" ng-if="public && !event.event.isRsvpExpired"><label>Email</label> <input type="email" name="email" ng-model="rsvp.email" required=""></div><div class="form-item"><label>Plus</label> <input type="number" name="plus" ng-model="rsvp.plus" min="0" max="{{event.event.additionalGuests}}"></div><div class="actions" ng-if="!success"><a class="md-button raised-btn" ng-click="onSubmitClicked(rsvpLandingForm)" ng-disabled="waiting">RSVP</a></div><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="waiting"></md-progress-circular></form></div></div><div layout="row" layout-sm="column" class="blocks socials"><div><div class="item-label">Share this event:</div><ul class="social share"><li><a href="https://www.facebook.com/sharer/sharer.php?u={{getPageURL() | encodeURIComponent}}" target="_blank"><img src="assets/images/icons/ifacebook.png" alt="facebook"></a></li><li><a href="https://twitter.com/share?url={{getPageURL() | encodeURIComponent}}&text={{event.company.name+\' is hosting \'+event.event.title+\' ! RSVP here\' | encodeURIComponent}}&hashtags={{event.company.name | spaceless}},{{event.event.title | spaceless}}" target="_blank"><img src="assets/images/icons/itwitter.png" alt="twitter"></a></li><li><a href="mailto:?subject={{event.event.title}}&body={{event.company.name}} is hosting {{event.event.title}}! RSVP here {{event.event.rsvpUrl}}"><img src="assets/images/icons/email.png" alt="email"></a></li></ul></div><div><div ng-if="event.event.facebookPageUrl || event.event.twitterPageUrl || event.event.instagrammPageUrl"><div class="item-label">Event on Social:</div><ul class="social"><li ng-if="event.event.facebookPageUrl"><a href="{{event.event.facebookPageUrl}}" target="_blank"><img src="assets/images/icons/facebook.png" alt="facebook"></a></li><li ng-if="event.event.twitterPageUrl"><a href="{{event.event.twitterPageUrl}}" target="_blank"><img src="assets/images/icons/twitter.png" alt="twitter"></a></li><li ng-if="event.event.instagrammPageUrl"><a href="{{event.event.instagrammPageUrl}}" target="_blank"><img src="assets/images/icons/instagram.png" alt="instagram"></a></li></ul></div></div></div></div><div class="footer" flex=""><p>Powered by <a href="http://gjests.com" target="_blank">gjests</a></p></div></div>'),e.put("app/user/templates/account-details.html",'<div ng-init="init()" class="account-details"><div ng-show="initializing"><h4>Loading...</h4><span><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></span></div><div ng-hide="initializing" ng-cloak=""><div class="block-field"><h4>Manage Accounts</h4><md-list><md-list-item layout="row" layout-sm="column"><div flex="75" flex-sm="100"><p>Create new Account (Enter details for the users you would like to invite)</p></div><div flex="25" flex-sm="100" layout="row" layout-align="end center" layout-align-sm="center center"><md-button class="raised-btn" ng-click="linkNewAccount($event)">Invite</md-button></div></md-list-item><md-list-item layout="row" layout-sm="column"><div flex="75" flex-sm="100"><p>Delete Account</p></div><div flex="25" flex-sm="100" layout="row" layout-align="end center" layout-align-sm="center center"><md-button class="raised-btn" ng-click="deleteAccount($event)">Delete</md-button></div></md-list-item></md-list></div><div class="block-field"><h4>Edit previously added Accounts</h4><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-if="refreshing"></md-progress-circular><md-list ng-if="!refreshing"><md-list-item ng-repeat="user in getLinkedUsers()" layout="row" layout-sm="column"><div flex="" layout="row" layout-sm="column"><div flex="40" flex-sm="100"><p>{{user.firstName}} {{user.lastName}}</p></div><div flex="15" flex-sm="100" ng-if="user.permission"><p>{{user.permission}}</p></div><div flex="20" flex-sm="100" ng-if="user.UserName"><p>{{user.UserName}}</p></div><div flex="10" flex-sm="100" ng-if="user.phoneNumber" style="padding: 0"><p>{{user.phoneNumber}}</p></div></div><div class="actions"><md-button class="icon-btn" ng-click="deleteUser($event, user)" ng-hide="options.readOnly" ng-cloak="" aria-label="Delete"><ng-md-icon icon="delete" size="24"></ng-md-icon></md-button><md-button class="icon-btn" ng-click="editUser($event, user)" ng-hide="options.readOnly" ng-cloak="" aria-label="Edit"><ng-md-icon icon="mode_edit" size="24"></ng-md-icon></md-button></div></md-list-item></md-list></div></div></div>'),e.put("app/user/templates/billing.html",'<div class="billing margin-top"><div class="block-field"><h4>Payment Information</h4><div layout="row" layout-align="start center" layout-sm="column" layout-align-sm="center center" class="payment-info"><div class="card-number">XXXX XXXX XXXX {{cards[0].cardDataSaved.number}}</div><md-button class="raised-btn" ng-click="editPaymentInfo()" ng-disabled="loadingCards">Edit</md-button></div></div><div class="block-field"><h4>Subscriptions</h4><subscriptions options="options"></subscriptions></div><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="loadingInvoices"></md-progress-circular><div class="block-field" ng-if="!loadingInvoices"><h4>Invoice</h4><md-list class="zebra"><md-list-item><div flex="30">Date</div><div flex="30">Amount</div><div flex=""></div></md-list-item><md-list-item ng-repeat="invoice in invoices"><div flex="30">{{invoice.date | date : \'MM/dd/yyyy\'}}</div><div flex="30">{{invoice.amount | money : invoice.currency}}</div><div flex="" class="actions" layout="row" layout-align="end center"><a href="{{getExportPdfUrl(invoice.id)}}" class="md-button icon-btn"><img ng-src="assets/images/icons/download.png"></a></div></md-list-item></md-list></div></div>'),e.put("app/user/templates/link-account-dialog.html",'<md-dialog flex="50" flex-sm="90" class="link-account-dialog"><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Invite Information</h3></div><md-content><form name="userForm"><div layout="" layout-sm="column"><md-input-container flex=""><label>First Name</label> <input ng-model="linkedAccountInEdit.firstName" required="" name="firstName"></md-input-container><md-input-container flex=""><label>Last Name</label> <input ng-model="linkedAccountInEdit.lastName" required="" name="lastName"></md-input-container></div><div layout="" layout-sm="column"><md-input-container flex=""><label>Email</label> <input type="email" ng-model="linkedAccountInEdit.UserName" ng-disabled="linkedAccountInEdit.Id" required="" name="userName"></md-input-container><md-input-container flex=""><label>Phone Number</label> <input ng-model="linkedAccountInEdit.phoneNumber" type="tel" name="phone"></md-input-container></div></form><p>Permissions (assign contributor\'s role for the account)</p><md-list><md-list-item ng-repeat="role in rolesOrder" flex=""><div flex="" layout="row"><div flex="" layout="column"><b>{{roles[role].label}}</b><div>{{roles[role].desc}}</div></div><div layout="row" layout-align="end center"><md-checkbox ng-checked="isSelected(role)" ng-click="toggleSelected(role)" aria-label="Invite"></md-checkbox></div></div><md-divider ng-if="!$last"></md-divider></md-list-item></md-list></md-content><div class="actions" layout="row" layout-align="end center"><md-button ng-click="cancel()">Cancel</md-button><md-button class="raised-btn" ng-click="save(userForm)">{{linkedAccountInEdit.Id ? \'Update\' : \'Invite\'}}</md-button><div ng-if="fetchingData"><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></div></div></md-dialog>'),e.put("app/user/templates/payment-info.html",'<md-dialog flex="50" flex-sm="90" class="payment-info"><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>Edit Payment Information</h3></div><md-content><div class="block-field" ng-repeat="card in cards"><h4>{{card.cardDataSaved.isDefault ? \'Primary Payment\' : (card.cardData.cardId ? \'Different Card\' : \'Add a Different Card\')}}</h4><form name="cardForm[{{$index}}]"><div layout="row" layout-align="space-between stretch" layout-sm="column"><md-input-container flex="60" md-no-float="" flex-sm="100"><h4>Credit Card Number</h4><input type="text" ng-model="card.cardData.number" name="number" pattern="\\d{14,16}" placeholder="{{cardsDataLoaded ? \'XXXX XXXX XXXX \'+card.cardDataSaved.number : \'Enter Credit Card Number\'}}" required="" ng-disabled="card.cardData.cardId"></md-input-container><md-input-container flex="40" md-no-float="" flex-sm="100"><h4>Security Code</h4><input type="text" ng-model="card.cardData.cvc" name="cvc" pattern="\\d{2,4}" placeholder="{{cardsDataLoaded ? \'XXX\' : \'Enter Security Code\'}}" required="" ng-disabled="card.cardData.cardId"></md-input-container></div><div layout="row" layout-align="space-between stretch" layout-sm="column"><div flex="60" flex-sm="100"><h4>Expire Date</h4><div layout="row" layout-align="start center" class="expire-date"><md-input-container md-no-float="" flex="30"><input type="number" ng-model="card.cardData.expiryMonth" name="exp_month" pattern="\\d{1,2}" min="1" max="12" placeholder="Month" required=""></md-input-container><md-input-container md-no-float="" flex="30"><input type="number" ng-model="card.cardData.expiryYear" name="exp_year" pattern="\\d{4}" min="1970" placeholder="Year" required=""></md-input-container></div></div><div flex="40" flex-sm="100"><md-input-container md-no-float=""><h4>Billing Zip Code</h4><input type="text" ng-model="card.cardData.zipCode" name="address_zip" placeholder="Enter Zip Code" ng-disabled="card.cardData.cardId"></md-input-container></div></div></form><div layout="row" layout-align="{{!card.cardDataSaved.isDefault ? \'space-between\' : \'end\'}} center"><md-radio-group ng-model="card.cardData.isDefault" ng-if="!card.cardDataSaved.isDefault"><md-radio-button ng-value="true" aria-label="Default card" ng-click="">Set this card as primary payment</md-radio-button></md-radio-group><md-button ng-click="close()" ng-if="$last">Cancel</md-button><md-button class="raised-btn" ng-click="card.cardData.cardId ? delete($index) : update(cardForm[$index], $index)" ng-disabled="savingCard">{{card.cardData.cardId ? \'Delete\' : \'Add\'}}</md-button><div ng-if="savingCard"><md-progress-circular class="md-hue-2" md-mode="indeterminate"></md-progress-circular></div></div></div></md-content></md-dialog>'),e.put("app/user/templates/payment-popup.html",'<md-dialog class="payment-popup"><div class="header" layout="row" layout-align="center center"><img src="assets/images/gliist_logo_blue.png" style="height:90px"></div><div class="content"><div layout="row" layout-align="space-between stretch" layout-sm="column"><div flex="50" flex-sm="100" class="order"><h3>YOUR ORDER SUMMARY</h3><div class="summary"><md-list><md-list-item><div flex="80">Plan</div><div flex="20" layout="row" layout-align="end center">Total</div></md-list-item><md-list-item><div flex="80">{{selectedPlan.name}}</div><div flex="20" layout="row" layout-align="end center"><div ng-if="pricePolicyBeforePromo"><i><s>{{pricePolicyBeforePromo.prices[0].amount | money : pricePolicyBeforePromo.prices[0].currency}}</s></i>&nbsp;&nbsp;</div>{{pricePolicy.prices[0].amount | money : pricePolicy.prices[0].currency}}</div></md-list-item></md-list></div><div class="promo" ng-if="selectedPlan.hasPromo"><h4>Promo Code</h4><div layout="row" layout-align="space-between start"><md-input-container md-no-float="" flex="50"><input type="text" ng-disabled="waiting" ng-model="promo.code" aria-label="Promo Code" placeholder="Enter your promo code"><div class="promo-apply" ng-if="promo.applied">Applied</div></md-input-container><md-button class="raised-btn" ng-click="applyPromo()" ng-disabled="waiting" ng-if="!promo.applied">Enter</md-button><md-button class="raised-btn" ng-click="undoPromo()" ng-disabled="waiting" ng-if="promo.applied">Delete</md-button></div><div class="promo-status" ng-if="promo.invalid">This promo code is invalid. Please use a different promo code, thank you.</div></div></div><div flex="50" flex-sm="100" class="payment"><h3>ENTER PAYMENT DETAIL</h3><form name="card"><div class="block-field"><div layout="row" layout-align="space-between stretch" layout-sm="column"><md-input-container flex="60" md-no-float="" flex-sm="100"><h4>Card Number Number</h4><input type="text" ng-disabled="waiting" ng-model="cardData.number" name="number" pattern="\\d{14,16}" placeholder="{{cardDataLoaded ? \'XXXX XXXX XXXX \'+cardDataSaved.number : \'Enter Credit Card Number\'}}" required=""></md-input-container><md-input-container flex="40" md-no-float="" flex-sm="100"><h4>Security Code</h4><input type="text" ng-disabled="waiting" ng-model="cardData.cvc" name="cvc" pattern="\\d{2,4}" placeholder="{{cardDataLoaded ? \'XXX\' : \'Enter Security Code\'}}" required=""></md-input-container></div><div layout="row" layout-align="space-between stretch" layout-sm="column"><div flex="60" flex-sm="100"><h4>Expire Date</h4><div layout="row" layout-align="start center"><md-input-container md-no-float="" flex="30"><input type="number" ng-disabled="waiting" ng-model="cardData.expiryMonth" name="exp_month" pattern="\\d{1,2}" min="1" max="12" placeholder="Month" required=""></md-input-container><md-input-container md-no-float="" flex="30"><input type="number" ng-disabled="waiting" ng-model="cardData.expiryYear" name="exp_year" pattern="\\d{4}" min="1970" placeholder="Year" required=""></md-input-container></div></div><div flex="40" flex-sm="100"><md-input-container md-no-float=""><h4>Billing Zip Code</h4><input type="text" ng-disabled="waiting" ng-model="cardData.zipCode" name="address_zip" placeholder="Enter Zip Code" required=""></md-input-container></div></div></div><div layout="row" layout-align="start center"><md-checkbox aria-label="Terms" ng-disabled="waiting" ng-model="terms">I agree to the</md-checkbox><a href="http://www.gjests.com/terms-conditions/" target="_blank">Terms and Conditions</a></div></form></div></div><div class="payment-actions margin-top" layout="row" layout-align="space-between start"><md-button class="raised-btn" ng-click="close()" ng-disabled="waiting">BACK</md-button><md-progress-circular class="md-hue-2 near" md-mode="indeterminate" ng-show="waiting"></md-progress-circular><md-button class="raised-btn" ng-click="process(card)" ng-disabled="waiting || loadingCard">PROCESS PAYMENT</md-button></div></div></md-dialog>'),e.put("app/user/templates/profile.html",'<div class="profile"><div layout="row" layout-wrap="" layout-align="space-between center" class="section-title"><h3>User Profile</h3></div><div layout="row" layout-align="space-between center" class="tabs margin-top"><md-button ng-class="getSelected(0)" ng-click="toIndex(0)" flex="">Profile</md-button><md-button ng-class="getSelected(1)" ng-click="toIndex(1)" remove-by-roles="promoter,staff,manager" flex="">Account</md-button><md-button ng-class="getSelected(2)" ng-click="toIndex(2)" flex="">Billing</md-button></div><div class="tab-content"><ng-switch on="selectedIndex"><div role="tabpanel" id="tab1-content" aria-labelledby="tab1" ng-switch-when="0" md-swipe-left="next($event)" md-swipe-right="previous($event)"><user-details user="currentUser"></user-details><div layout="column" layout-align="start stretch" class="social-links-edit"><h4>Enter company\'s social media account link (to be included in all communications to guests)</h4><div layout="row" layout-align="start center" layout-sm="column" layout-align-sm="center start"><img src="assets/images/instagram.png"><md-input-container md-no-float="" flex="60" flex-sm="100"><input type="text" ng-model="currentUser.instagrammPageUrl" placeholder="Enter instagram link"></md-input-container></div><div layout="row" layout-align="start center" layout-sm="column" layout-align-sm="center start"><img src="assets/images/facebook.png"><md-input-container md-no-float="" flex="60" flex-sm="100"><input type="text" ng-model="currentUser.facebookPageUrl" placeholder="Enter facebook link"></md-input-container></div><div layout="row" layout-align="start center" layout-sm="column" layout-align-sm="center start"><img src="assets/images/twitter.png"><md-input-container md-no-float="" flex="60" flex-sm="100"><input type="text" ng-model="currentUser.twitterPageUrl" placeholder="Enter twitter link"></md-input-container></div><div layout="row" layout-align="end start" class="actions" layout-align-sm="center center"><md-button class="raised-btn" ng-click="link()">Link</md-button></div></div></div><div role="tabpanel" id="tab2-content" aria-labelledby="tab2" ng-switch-when="1" md-swipe-left="next($event)" md-swipe-right="previous($event)"><account-details user="currentUser"></account-details></div><div role="tabpanel" id="tab3-content" aria-labelledby="tab3" ng-switch-when="2" md-swipe-left="next()" md-swipe-right="previous()"><billing></billing></div></ng-switch></div></div>'),e.put("app/user/templates/recover-password.html",'<div layout="column" layout-align="space-between stretch" ng-init="init()" class="recover-password"><div layout="row" layout-align="center center" class="header" flex=""><a href="/"><img src="assets/images/gliist_logo.png" style="height:90px"></a></div><div layout="column" layout-align="center center" class="content" flex=""><h3>Password Recovery</h3><p>Enter your email address associated with your gjests account.<br>We\'ll send you a link to a page where you can easily create a password.</p><md-input-container md-no-float=""><input type="email" name="email" ng-model="user.email" placeholder="Enter Email Address" required=""></md-input-container><md-button class="raised-btn" ng-click="onRecoverClicked()" ng-if="!recoverSent" ng-disabled="!user.email">Recover</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular><a href="/">Back to login page</a></div><div layout="row" layout-align="center center" class="footer" flex="">Ditch the clipboard&trade;</div></div>'),e.put("app/user/templates/reset-password.html",'<div layout="column" layout-align="space-between stretch" ng-init="init()" class="reset-password"><div layout="row" layout-align="center center" class="header" flex=""><a href="/"><img src="assets/images/gliist_logo.png" style="height:90px"></a></div><div layout="column" layout-align="center center" class="content" flex=""><h3>Reset Password</h3><form name="resetPassword"><md-input-container md-no-float=""><input type="password" name="password" ng-model="user.password" placeholder="Enter new password" required=""></md-input-container><md-input-container md-no-float=""><input type="password" name="confirm" ng-model="user.confirmPassword" placeholder="Confirm password" required="" ng-match="user.password"><div ng-messages="resetPassword.confirm.$error" class="errors"><div ng-message="match">Passwords don\'t match.</div></div></md-input-container><md-button class="raised-btn" ng-click="onResetClicked(resetPassword)" ng-if="!resetSent">Reset</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></form><a href="/">Back to login page</a></div><div layout="row" layout-align="center center" class="footer" flex="">Ditch the clipboard&trade;</div></div>'),e.put("app/user/templates/signup.html",'<div flex="" layout="column" layout-align="space-between center" layout-fill="" ng-init="init()"><div layout="column" layout-align="center center" class="content"><div><img src="assets/images/gliist_logo_blue.png" style="height:90px"></div><md-progress-circular ng-show="loading" class="md-hue-2" md-mode="indeterminate"></md-progress-circular><div class="signup-form" ng-if="!loading"><form name="userForm"><div layout="" layout-sm="column"><md-input-container flex=""><label>First Name</label> <input name="firstName" ng-model="user.firstName" required="" class="rounded-l"><div ng-messages="userForm.firstName.$error" ng-if="displayErrorMessage(userForm.firstName)"><div ng-message="required">First name is required</div></div></md-input-container><md-input-container flex=""><label>Last Name</label> <input name="lastName" ng-model="user.lastName" required=""><div ng-messages="userForm.lastName.$error" ng-if="displayErrorMessage(userForm.lastName)"><div ng-message="required">Last name is required</div></div></md-input-container><md-input-container flex="" ng-class="userForm.firstName.$valid && userForm.lastName.$valid && userForm.email.$valid ? \'checked\' : \'\'"><label>Email</label> <input type="email" name="email" ng-model="user.username" ng-disabled="options.inviteMode" ng-required="!options.inviteMode" class="rounded-r"><div ng-messages="userForm.email.$error" ng-if="displayErrorMessage(userForm.email)"><div ng-message="required">Email is required</div><div ng-message="email">Email is incorrect</div></div></md-input-container></div><div layout="" layout-sm="column"><md-input-container flex=""><label>Phone Number</label> <input name="phoneNumber" ng-model="user.phoneNumber" class="rounded-l" type="text" ng-pattern="/^[0-9+-. ()]*$/"><div ng-messages="userForm.phoneNumber.$error" ng-if="displayErrorMessage(userForm.phoneNumber)"><div ng-message="pattern">Correct phone number</div></div></md-input-container><md-input-container flex=""><label>Organization</label> <input name="company" ng-model="user.company" ng-disabled="options.inviteMode" ng-required="!options.inviteMode"><div ng-messages="userForm.company.$error" ng-if="displayErrorMessage(userForm.company)"><div ng-message="required">Company is required</div></div></md-input-container><md-input-container flex="" ng-class="userForm.company.$valid ? \'checked\' : \'\'"><label>Industry</label> <input name="industry" ng-model="user.industry" class="rounded-r"></md-input-container></div><div layout="" layout-align="center center" layout-sm="column" class="passwords"><md-input-container><label>Password</label> <input class="rounded-lr" name="password" type="password" ng-model="user.password" ng-minlength="6" required=""><div ng-messages="userForm.password.$error" ng-if="displayErrorMessage(userForm.password)"><div ng-message="required">Password is required</div><div ng-message="minlength">Minimum password length 6 symbols</div></div></md-input-container><md-input-container ng-class="userForm.password.$valid && userForm.re_password.$valid ? \'checked\' : \'\'"><label>Re-enter Password</label> <input class="rounded-lr" type="password" name="re_password" ng-model="user.confirmPassword" ng-minlength="6" required="" ng-match="user.password"><div ng-messages="userForm.re_password.$error" ng-if="displayErrorMessage(userForm.re_password)"><div ng-message="match">Passwords don\'t match.</div></div></md-input-container></div><div layout="" layout-sm="column" layout-align="center center" ng-if="!options.freeRegister"><md-input-container ng-if="!options.inviteMode"><label>Invite Code</label> <input name="inviteCode" class="rounded-lr" type="text" ng-model="user.inviteCode" required=""><div ng-messages="userForm.inviteCode.$error" ng-if="displayErrorMessage(userForm.inviteCode)"><div ng-message="required">Invite is required</div></div></md-input-container></div></form><div class="md-actions" layout="row" layout-align="center center"><md-button class="raised-btn" ng-click="register(userForm)" ng-disabled="sendingData">Get Started</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="sendingData"></md-progress-circular></div></div></div><div class="footer"><div layout="column" layout-align="center center"><h3>Existing Users</h3><p>Login and get going with your lists</p><md-button class="raised-btn" ui-sref="home">Login</md-button></div></div></div>'),e.put("app/user/templates/subscriptions.html",'<div class="tariff-blocks" alignment-height=""><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="loading"></md-progress-circular><div class="tariff-block" ng-show="!loading" ng-repeat="tariff in plans"><div layout="column" class="tariff-header{{tariff.isPopular ? \' popular\' : \'\'}}" layout-align="space-between center"><div ng-if="options.billing" layout="row" layout-align="space-between start"><div class="title">{{tariff.name}}</div><img ng-src="assets/images/plan_icons/{{tariff.name | spaceless | lowercase}}_blue.png"></div><div ng-if="!options.billing"><img ng-src="assets/images/plan_icons/{{tariff.name | spaceless | lowercase}}.png"><div class="title">{{tariff.name}}</div></div><div class="price-details">{{tariff.pricePolicies[0].prices[0].title}}</div><div ng-if="!options.billing">{{tariff.description}}</div></div><div layout="column" class="tariff-content" layout-align="space-between center"><ul><li ng-repeat="policy in tariff.policies">{{policy.description}}</li></ul><md-radio-group ng-if="tariff.pricePolicies.length > 1 && showButton($index)" ng-model="pricePolicyKeys[$index]" ng-init="tariffIndex = $index"><md-radio-button ng-if="!tariff.isCurrentlyUsed || (tariff.isCurrentlyUsed && pricePolicyKeys[tariffIndex] === $index)" ng-repeat="pricePolicy in tariff.pricePolicies" ng-value="$index" aria-label="{{pricePolicy.prices[0].type}}">{{pricePolicy.prices[0].description}}<br>{{pricePolicy.description}}</md-radio-button></md-radio-group></div><div layout="column" class="tariff-footer" layout-align="center center"><h4 ng-if="tariff.isCurrentlyUsed" class="small-font">ACTIVE{{getEndDate() ? \': expires on \' + (getEndDate() | date:\'MM/dd/yyyy\') : \'\'}}</h4><div><md-button class="raised-btn" ng-click="beforeSelectPlan($index, $event)" ng-if="showButton($index)">{{planLabels[$index]}}</md-button><a class="md-button raised-btn" href="mailto:info@gjests.com?subject={{tariff.name}} Account" ng-if="!allowToSelect($index)">CONTACT US</a></div></div></div></div>'),e.put("app/user/templates/user-details.tmpl.html",'<div layout="column"><md-whiteframe flex="" class="user-details"><div ng-show="!editMode" layout="" layout-align="center stretch" layout-sm="column" layout-align-sm="space-between stretch" class="user-details-teaser"><div flex="30" flex-sm="100" ng-style="getUserPhoto(\'150px\')"></div><div flex="40" flex-sm="100" layout="column" layout-align="space-around start" layout-align-sm="space-around center" class="description"><h3>{{user.firstName}} {{user.lastName}}</h3><div ng-if="user.email">{{user.email}}</div><div ng-if="user.phoneNumber">{{user.phoneNumber}}</div><div ng-if="user.city">{{user.city}}</div><div ng-if="user.company">{{user.company}}</div></div><div flex="30" layout="row" layout-align="end center" layout-align-sm="center center"><md-button class="raised-btn" ng-click="editMode = !editMode">Edit</md-button></div></div><div ng-show="editMode"><div class="block-field"><h4>Upload Company Logo</h4><div layout="row" layout-sm="column" layout-align="space-between center"><md-input-container>Support jpg, gif file. (To be included in all communication to guests)</md-input-container><md-input-container><md-button class="raised-btn" ng-file-select="onFileSelect($files)" accept=".jpg,.png,.gif">UPLOAD</md-button><md-progress-circular class="md-hue-2" md-mode="indeterminate" ng-show="fetchingData"></md-progress-circular></md-input-container></div></div><div class="block-field"><h4>Edit Personal Details</h4><form name="userForm"><div layout="row" layout-sm="column" layout-md="column" layout-align="space-between stretch"><div layout="column" layout-align="start stretch" flex=""><div layout="row" layout-sm="column" layout-align="space-between stretch"><md-input-container flex="" md-no-float=""><h4>First Name</h4><input ng-model="user.firstName" name="firstName" required="" placeholder="First Name"><div ng-messages="userForm.firstName.$error" ng-if="displayErrorMessage(userForm.firstName)" class="errors"><div ng-message="required">First name is required</div></div></md-input-container><md-input-container flex="" md-no-float=""><h4>Last Name</h4><input ng-model="user.lastName" name="lastName" required="" placeholder="Last Name"><div ng-messages="userForm.lastName.$error" ng-if="displayErrorMessage(userForm.lastName)" class="errors"><div ng-message="required">Last name is required</div></div></md-input-container></div><div><md-input-container flex="" md-no-float=""><h4>Email</h4><input ng-model="user.email" type="email" disabled="" placeholder="Email"></md-input-container></div><div><md-input-container flex="" md-no-float=""><h4>Company</h4><input ng-model="user.company" placehoder="Company" ng-disabled="true" aria-label="Company"></md-input-container></div><div layout="row" layout-sm="column" layout-align="space-between stretch" class="margin-top"><md-input-container flex="" md-no-float=""><h4>Phone Number</h4><input ng-model="user.phoneNumber" type="tel" placeholder="Phone Number"></md-input-container><md-input-container flex="" md-no-float=""><h4>City</h4><input ng-model="user.city" placeholder="City"></md-input-container></div><div layout="row" layout-sm="column" layout-align="space-between stretch" class="margin-top"><md-input-container flex="" md-no-float=""><h4>Contact Email for Guests</h4><input ng-model="user.contactEmail" placeholder="Contact Email for guests"></md-input-container></div><div layout="row" layout-sm="column" layout-align="space-between stretch" class="margin-top"><md-input-container flex="" md-no-float=""><h4>Contact Phone Number for Guests</h4><input ng-model="user.contactPhone" placeholder="Contact Phone Number for guests"></md-input-container></div></div><md-input-container class="bio" md-no-float="" flex=""><h4>Company\'s info for guest</h4><textarea ng-model="user.bio" placeholder="Company\'s info for guest"></textarea></md-input-container></div><div class="actions" layout="row" layout-align="end center" ng-show="editMode"><md-button class="raised-btn" ng-click="editMode=!editMode">Cancel</md-button><md-button class="raised-btn" ng-click="saveChanges(userForm)">Save</md-button></div></form></div><div class="block-field"><h4>Change your password</h4><form name="userPasswordForm"><div layout="" layout-sm="column"><md-input-container md-no-float=""><h4>Enter old password</h4><input ng-model="user.password" type="password" placeholder="Enter old password" required=""></md-input-container></div><div layout="" layout-sm="column"><md-input-container md-no-float=""><h4>Enter new password</h4><input ng-model="user.new_password" type="password" name="new_password" placeholder="Enter new password" required=""></md-input-container><md-input-container md-no-float=""><h4>Re-enter new password</h4><input ng-model="user.re_password" type="password" ng-match="user.new_password" name="re_password" placeholder="Re-enter new password" required=""><div ng-messages="userPasswordForm.re_password.$error" class="errors"><div ng-message="match">Passwords don\'t match.</div></div></md-input-container></div><div class="actions" layout="row" layout-align="end center" ng-show="editMode"><md-button class="raised-btn" ng-click="editMode=!editMode">Cancel</md-button><md-button class="raised-btn" ng-click="updatePassword(userPasswordForm)">Save</md-button></div></form></div></div></md-whiteframe></div>')
}]);